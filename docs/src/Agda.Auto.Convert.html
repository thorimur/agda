<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Auto.Convert</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(!!)</span></span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bifunctor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">first</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">catMaybes</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-16"></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier">Hiding</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier">getHiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier">Arg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Concrete.html"><span class="hs-identifier">Agda.Syntax.Concrete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier">exprFieldA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom%27"><span class="hs-identifier">Dom'</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier">domInfo</span></a></span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier">unDom</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Pattern.html"><span class="hs-identifier">Agda.Syntax.Internal.Pattern</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IP</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cm</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html"><span class="hs-identifier">Agda.Syntax.Abstract.Name</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AN</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SP</span></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MB</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Signature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier">getConstInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier">getDefFreeVars</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#ignoreAbstractMode"><span class="hs-identifier">ignoreAbstractMode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Level.html"><span class="hs-identifier">Agda.TypeChecking.Level</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier">reallyUnLevelView</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Base</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#mvJudgement"><span class="hs-identifier">mvJudgement</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier">mvPermutation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier">getMetaInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#envContext"><span class="hs-identifier">envContext</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#clEnv"><span class="hs-identifier">clEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html"><span class="hs-identifier">Agda.TypeChecking.Monad.MetaVars</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupMeta"><span class="hs-identifier">lookupMeta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier">withMetaInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionPoint"><span class="hs-identifier">lookupInteractionPoint</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Context</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier">getContextArgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Constraints.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Constraints.html#getAllConstraints"><span class="hs-identifier">getAllConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier">applySubst</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html#renamingR"><span class="hs-identifier">renamingR</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-identifier">piApplyM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier">absBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier">normalise</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier">instantiate</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html"><span class="hs-identifier">Agda.TypeChecking.EtaContract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier">etaContract</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Builtin</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier">constructorForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html"><span class="hs-identifier">Agda.TypeChecking.Free</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Free</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-identifier">freeIn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.MakeCase.html"><span class="hs-identifier">Agda.Interaction.MakeCase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.MakeCase.html#getClauseZipperForIP"><span class="hs-identifier">getClauseZipperForIP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html"><span class="hs-identifier">Agda.Auto.NarrowingSearch</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html"><span class="hs-identifier">Agda.Auto.Syntax</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#getConst"><span class="hs-identifier">getConst</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html"><span class="hs-identifier">Agda.Auto.CaseSplit</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#lift"><span class="hs-identifier">lift</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>       </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html#forMaybeMM"><span class="hs-identifier">forMaybeMM</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#Permutation"><span class="hs-identifier">Permutation</span></a></span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier">Perm</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier">permute</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier">takeP</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#compactP"><span class="hs-identifier">compactP</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html"><span class="hs-identifier">Agda.Utils.Pretty</span></a></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span class="hs-keyword">data</span><span> </span><span id="Hint"><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Hint"><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="hintIsConstructor"><span class="annot"><span class="annottext">Hint -&gt; Bool
</span><a href="Agda.Auto.Convert.html#hintIsConstructor"><span class="hs-identifier hs-var hs-var">hintIsConstructor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="hintQName"><span class="annot"><span class="annottext">Hint -&gt; QName
</span><a href="Agda.Auto.Convert.html#hintQName"><span class="hs-identifier hs-var hs-var">hintQName</span></a></span></span><span>         </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">I.QName</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span class="hs-keyword">type</span><span> </span><span id="O"><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-var">O</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-comment">-- Nothing - Def</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-comment">-- Just npar - Con with npar parameters which don't appear in Agda</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">data</span><span> </span><span id="TMode"><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-var">TMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TMAll"><span class="annot"><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span></span><span> </span><span class="hs-comment">-- can be extended to distinguish between different modes (all, only def)</span><span>
</span><span id="line-71"></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621681155107"><span id="local-6989586621681155109"><span class="annot"><span class="annottext">TMode -&gt; TMode -&gt; Bool
(TMode -&gt; TMode -&gt; Bool) -&gt; (TMode -&gt; TMode -&gt; Bool) -&gt; Eq TMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: TMode -&gt; TMode -&gt; Bool
$c/= :: TMode -&gt; TMode -&gt; Bool
== :: TMode -&gt; TMode -&gt; Bool
$c== :: TMode -&gt; TMode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">type</span><span> </span><span id="MapS"><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-var">MapS</span></a></span></span><span> </span><span id="local-6989586621681155105"><span class="annot"><a href="#local-6989586621681155105"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621681155104"><span class="annot"><a href="#local-6989586621681155104"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621681155105"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155104"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681155105"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span id="local-6989586621681156082"><span id="local-6989586621681156083"><span class="annot"><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-type">initMapS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156083"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156082"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-76"></span><span id="initMapS"><span class="annot"><span class="annottext">initMapS :: forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var hs-var">initMapS</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map a b
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span id="local-6989586621681156073"><span id="local-6989586621681156074"><span class="annot"><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-type">popMapS</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681156074"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681156073"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681156074"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681156073"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681156073"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-79"></span><span id="popMapS"><span class="annot"><span class="annottext">popMapS :: forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var hs-var">popMapS</span></a></span></span><span> </span><span id="local-6989586621681155094"><span class="annot"><span class="annottext">S -&gt; (a, [b])
</span><a href="#local-6989586621681155094"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681155093"><span class="annot"><span class="annottext">(a, [b]) -&gt; S -&gt; S
</span><a href="#local-6989586621681155093"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681155092"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681155092"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681155091"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621681155091"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; (a, [b])) -&gt; StateT S (TCMT IO) (a, [b])
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; (a, [b])
</span><a href="#local-6989586621681155094"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-80"></span><span>                 </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621681155091"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-81"></span><span>                  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe b -&gt; TOM (Maybe b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe b
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-82"></span><span>                  </span><span class="hs-special">(</span><span id="local-6989586621681155089"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681155089"><span class="hs-identifier hs-var">x</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681155088"><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621681155088"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-83"></span><span>                   </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, [b]) -&gt; S -&gt; S
</span><a href="#local-6989586621681155093"><span class="hs-identifier hs-var">w</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681155092"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[b]
</span><a href="#local-6989586621681155088"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span>                   </span><span class="annot"><span class="annottext">Maybe b -&gt; TOM (Maybe b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe b -&gt; TOM (Maybe b)) -&gt; Maybe b -&gt; TOM (Maybe b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; Maybe b
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681155089"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-keyword">data</span><span> </span><span id="S"><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="S"><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-var">S</span></a></span></span><span> </span><span class="hs-special">{</span><span id="sConsts"><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var hs-var">sConsts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>            </span><span id="sMetas"><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var hs-var">sMetas</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>            </span><span id="sEqs"><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var hs-var">sEqs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MapS"><span class="hs-identifier hs-type">MapS</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>            </span><span id="sCurMeta"><span class="annot"><span class="annottext">S -&gt; Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var hs-var">sCurMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>            </span><span id="sMainMeta"><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var hs-var">sMainMeta</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span>
</span><span id="line-91"></span><span>           </span><span class="hs-special">}</span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="hs-keyword">type</span><span> </span><span id="TOM"><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-var">TOM</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span>
</span><span id="line-94"></span><span class="hs-keyword">type</span><span> </span><span id="MOT"><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-var">MOT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomy"><span class="hs-identifier hs-type">tomy</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-97"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-98"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-99"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-101"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span id="tomy"><span class="annot"><span class="annottext">tomy :: MetaId
-&gt; [Hint]
-&gt; [Type'' Term Term]
-&gt; TCM
     ([ConstRef O], [MExp O],
      Map
        MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
      [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
</span><a href="Agda.Auto.Convert.html#tomy"><span class="hs-identifier hs-var hs-var">tomy</span></a></span></span><span> </span><span id="local-6989586621681155078"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681155078"><span class="hs-identifier hs-var">imi</span></a></span></span><span> </span><span id="local-6989586621681155077"><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681155077"><span class="hs-identifier hs-var">icns</span></a></span></span><span> </span><span id="local-6989586621681155076"><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681155076"><span class="hs-identifier hs-var">typs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-103"></span><span> </span><span id="local-6989586621681155075"><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621681155075"><span class="hs-identifier hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM [(Bool, Term, Term)]
</span><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-var">getEqs</span></a></span><span>
</span><span id="line-104"></span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><a href="#local-6989586621681155073"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621681155073"><span class="annot"><span class="annottext">r :: [QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681155072"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155072"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>   </span><span id="local-6989586621681155071"><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621681155071"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS QName (TMode, ConstRef O))
-&gt; (MapS QName (TMode, ConstRef O) -&gt; S -&gt; S) -&gt; TOM (Maybe QName)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681155070"><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
</span><a href="#local-6989586621681155070"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681155069"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681155069"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681155069"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
</span><a href="#local-6989586621681155070"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><a href="#local-6989586621681155071"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681155068"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155068"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-110"></span><span>     </span><span id="local-6989586621681155067"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681155067"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S (TCMT IO) (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681155065"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681155065"><span class="hs-identifier hs-var">mode</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681155064"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681155064"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681155067"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O) -&gt; QName -&gt; (TMode, ConstRef O)
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155068"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-112"></span><span>     </span><span id="local-6989586621681155062"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681155062"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S (TCMT IO) Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S (TCMT IO) Definition)
-&gt; TCM Definition -&gt; StateT S (TCMT IO) Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155068"><span class="hs-identifier hs-var">cn</span></a></span><span>
</span><span id="line-113"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681155060"><span class="annot"><span class="annottext">typ :: Type'' Term Term
</span><a href="#local-6989586621681155060"><span class="hs-identifier hs-var hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type'' Term Term
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">MB.defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681155062"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-114"></span><span>         </span><span id="local-6989586621681155058"><span class="annot"><span class="annottext">defn :: Defn
</span><a href="#local-6989586621681155058"><span class="hs-identifier hs-var hs-var">defn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681155062"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-115"></span><span>     </span><span id="local-6989586621681155056"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681155056"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Type'' Term Term) -&gt; StateT S (TCMT IO) (Type'' Term Term)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Type'' Term Term) -&gt; StateT S (TCMT IO) (Type'' Term Term))
-&gt; TCM (Type'' Term Term) -&gt; StateT S (TCMT IO) (Type'' Term Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; TCM (Type'' Term Term)
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681155060"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-116"></span><span>     </span><span id="local-6989586621681155055"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681155055"><span class="hs-identifier hs-var">typ'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681155056"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-117"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681155046"><span class="annot"><span class="annottext">clausesToDef :: [Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621681155046"><span class="hs-identifier hs-var hs-var">clausesToDef</span></a></span></span><span> </span><span id="local-6989586621681155045"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155045"><span class="hs-identifier hs-var">clauses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-118"></span><span>           </span><span id="local-6989586621681155044"><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621681155044"><span class="hs-identifier hs-var">clauses'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; m [Clause o]
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155045"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-119"></span><span>           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681155043"><span class="annot"><span class="annottext">narg :: Int
</span><a href="#local-6989586621681155043"><span class="hs-identifier hs-var hs-var">narg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155045"><span class="hs-identifier hs-var">clauses</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-120"></span><span>                        </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-121"></span><span>                        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">namedClausePats :: Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">I.namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155040"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681155040"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681155040"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-122"></span><span>           </span><span class="annot"><span class="annottext">(DeclCont o, [a]) -&gt; m (DeclCont o, [a])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
forall o. Int -&gt; [Clause o] -&gt; Maybe Int -&gt; Maybe Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681155043"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause o]
</span><a href="#local-6989586621681155044"><span class="hs-identifier hs-var">clauses'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621681155037"><span class="annot"><span class="annottext">DeclCont O
</span><a href="#local-6989586621681155037"><span class="hs-identifier hs-var">cont</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681155036"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155036"><span class="hs-identifier hs-var">projfcns2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681155058"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Axiom"><span class="hs-identifier hs-type">MB.Axiom</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#DataOrRecSig"><span class="hs-identifier hs-type">MB.DataOrRecSig</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#GeneralizableVar"><span class="hs-identifier hs-type">MB.GeneralizableVar</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) (DeclCont O, [QName])
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#AbstractDefn"><span class="hs-identifier hs-type">MB.AbstractDefn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Function"><span class="hs-identifier hs-type">MB.Function</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">funClauses :: Defn -&gt; [Clause]
</span><a href="Agda.TypeChecking.Monad.Base.html#funClauses"><span class="hs-identifier hs-var">MB.funClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155027"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155027"><span class="hs-identifier hs-var">clauses</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall {m :: * -&gt; *} {o} {a}.
(Monad m, Conversion m [Clause] [Clause o]) =&gt;
[Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621681155046"><span class="hs-identifier hs-var">clausesToDef</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155027"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-comment">-- MB.Primitive {MB.primClauses = []} -&gt; throwError $ strMsg &quot;Auto: Primitive functions are not supported&quot; -- Andreas, 2013-06-17 breaks interaction/AutoMisc</span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Primitive"><span class="hs-identifier hs-type">MB.Primitive</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">primClauses :: Defn -&gt; [Clause]
</span><a href="Agda.TypeChecking.Monad.Base.html#primClauses"><span class="hs-identifier hs-var">MB.primClauses</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155024"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155024"><span class="hs-identifier hs-var">clauses</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall {m :: * -&gt; *} {o} {a}.
(Monad m, Conversion m [Clause] [Clause o]) =&gt;
[Clause] -&gt; m (DeclCont o, [a])
</span><a href="#local-6989586621681155046"><span class="hs-identifier hs-var">clausesToDef</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681155024"><span class="hs-identifier hs-var">clauses</span></a></span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PrimitiveSort"><span class="hs-identifier hs-type">MB.PrimitiveSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) (DeclCont O, [QName])
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-132"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Datatype"><span class="hs-identifier hs-type">MB.Datatype</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">dataCons :: Defn -&gt; [QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#dataCons"><span class="hs-identifier hs-var">MB.dataCons</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155020"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155020"><span class="hs-identifier hs-var">cons</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>       </span><span id="local-6989586621681155019"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681155019"><span class="hs-identifier hs-var">cons2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; [QName] -&gt; StateT S (TCMT IO) [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681155017"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155017"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155017"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155020"><span class="hs-identifier hs-var">cons</span></a></span><span>
</span><span id="line-134"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681155019"><span class="hs-identifier hs-var">cons2</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">MB.Record</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">recFields :: Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">MB.recFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155012"><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621681155012"><span class="hs-identifier hs-var">fields</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">recTel :: Defn -&gt; Telescope
</span><a href="Agda.TypeChecking.Monad.Base.html#recTel"><span class="hs-identifier hs-var">MB.recTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681155010"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681155010"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="hs-comment">-- the value of recPars seems unreliable or don't know what it signifies</span><span>
</span><span id="line-136"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681155007"><span class="annot"><span class="annottext">pars :: Int -&gt; Type'' Term Term -&gt; [Arg Term]
</span><a href="#local-6989586621681155007"><span class="hs-identifier hs-var hs-var">pars</span></a></span></span><span> </span><span id="local-6989586621681155006"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681155006"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span id="local-6989586621681155003"><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681155003"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span id="local-6989586621681155002"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681155002"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom (Type'' Term Term) -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">I.domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681155003"><span class="hs-identifier hs-var">it</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">I.var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681155006"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; [Arg Term] -&gt; [Arg Term]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-137"></span><span>                                           </span><span class="annot"><span class="annottext">Int -&gt; Type'' Term Term -&gt; [Arg Term]
</span><a href="#local-6989586621681155007"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681155006"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681155002"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>           </span><span class="annot"><a href="#local-6989586621681155007"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-139"></span><span>           </span><span id="local-6989586621681154998"><span class="annot"><span class="annottext">contyp :: Int -&gt; Telescope -&gt; Type'' Term Term
</span><a href="#local-6989586621681154998"><span class="hs-identifier hs-var hs-var">contyp</span></a></span></span><span> </span><span id="local-6989586621681154997"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154997"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">I.EmptyTel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type'' Term Term
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-comment">{- arbitrary -}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type'' Term Term) -&gt; Term -&gt; Type'' Term Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-140"></span><span>                                      </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681155068"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; Elims -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Elims) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type'' Term Term -&gt; [Arg Term]
</span><a href="#local-6989586621681155007"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154997"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681155056"><span class="hs-identifier hs-var">typ</span></a></span><span>
</span><span id="line-141"></span><span>           </span><span class="annot"><a href="#local-6989586621681154998"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span id="local-6989586621681154992"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154992"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-type">I.ExtendTel</span></a></span><span> </span><span id="local-6989586621681154990"><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154990"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span id="local-6989586621681154988"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154988"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681154987"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681154987"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type'' Term Term
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-comment">{- arbitrary -}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom (Type'' Term Term) -&gt; Abs (Type'' Term Term) -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-var">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154990"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Type'' Term Term -&gt; Abs (Type'' Term Term)
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154988"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Type'' Term Term
</span><a href="#local-6989586621681154998"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154992"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681154987"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>           </span><span class="annot"><a href="#local-6989586621681154998"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span id="local-6989586621681154985"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154985"><span class="hs-identifier hs-var">npar</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-type">I.ExtendTel</span></a></span><span> </span><span id="local-6989586621681154984"><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154984"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">I.NoAbs</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-143"></span><span>       </span><span id="local-6989586621681154982"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154982"><span class="hs-identifier hs-var">contyp'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O))
-&gt; Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Telescope -&gt; Type'' Term Term
</span><a href="#local-6989586621681154998"><span class="hs-identifier hs-var">contyp</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681155010"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-144"></span><span>       </span><span id="local-6989586621681154981"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154981"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681155064"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-145"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681154978"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154978"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; DeclCont O
forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154981"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-146"></span><span>       </span><span class="annot"><span class="annottext">TCM () -&gt; StateT S (TCMT IO) ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; StateT S (TCMT IO) ())
-&gt; TCM () -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; (ConstDef O -&gt; ConstDef O) -&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154978"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154975"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154975"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154975"><span class="hs-identifier hs-var">cdef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154982"><span class="hs-identifier hs-var">contyp'</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>       </span><span id="local-6989586621681154973"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154973"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; [Dom QName] -&gt; StateT S (TCMT IO) [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154972"><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621681154972"><span class="hs-identifier hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom QName -&gt; QName
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">I.unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom QName
</span><a href="#local-6989586621681154972"><span class="hs-identifier hs-var">dom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Dom QName]
</span><a href="#local-6989586621681155012"><span class="hs-identifier hs-var">fields</span></a></span><span>
</span><span id="line-149"></span><span>       </span><span class="hs-comment">-- Equivalently projfcns &lt;- mapM (($ TMAll) . getConst False . I.unDom) fields</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154978"><span class="hs-identifier hs-var">con</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154973"><span class="hs-identifier hs-var">projfcns</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-comment">{-map snd fields-}</span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Constructor"><span class="hs-identifier hs-type">MB.Constructor</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">conData :: Defn -&gt; QName
</span><a href="Agda.TypeChecking.Monad.Base.html#conData"><span class="hs-identifier hs-var">MB.conData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154969"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154969"><span class="hs-identifier hs-var">dt</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-153"></span><span>       </span><span class="annot"><span class="annottext">ConstRef O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154969"><span class="hs-identifier hs-var">dt</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span> </span><span class="hs-comment">-- make sure that datatype is included</span><span>
</span><span id="line-154"></span><span>       </span><span id="local-6989586621681154968"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154968"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681155064"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-155"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154967"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154967"><span class="hs-identifier hs-var">nomi</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154968"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-156"></span><span>       </span><span class="annot"><span class="annottext">(DeclCont O, [QName]) -&gt; StateT S (TCMT IO) (DeclCont O, [QName])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; DeclCont O
forall o. Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154967"><span class="hs-identifier hs-var">nomi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; Int
forall o. ConstDef o -&gt; Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154968"><span class="hs-identifier hs-var">cc</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>     </span><span class="annot"><span class="annottext">TCM () -&gt; StateT S (TCMT IO) ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM () -&gt; StateT S (TCMT IO) ())
-&gt; TCM () -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; (ConstDef O -&gt; ConstDef O) -&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681155064"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154963"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154963"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154963"><span class="hs-identifier hs-var">cdef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681155055"><span class="hs-identifier hs-var">typ'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
</span><a href="#local-6989586621681155037"><span class="hs-identifier hs-var">cont</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>     </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">([QName] -&gt; TOM [QName]) -&gt; [QName] -&gt; TOM [QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155036"><span class="hs-identifier hs-var">projfcns2</span></a></span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; [QName] -&gt; [QName]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155072"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">Maybe QName
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>     </span><span id="local-6989586621681154962"><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681154962"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S
 -&gt; MapS
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; (MapS
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
    -&gt; S -&gt; S)
-&gt; TOM (Maybe MetaId)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154961"><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621681154961"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681154960"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154960"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154960"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621681154961"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681154962"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154959"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-163"></span><span>       </span><span class="annot"><span class="annottext">(((Bool, Term, Term), Int) -&gt; StateT S (TCMT IO) ())
-&gt; [((Bool, Term, Term), Int)] -&gt; StateT S (TCMT IO) ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154957"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154957"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154956"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154956"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154955"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154955"><span class="hs-identifier hs-var">eqi</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>         </span><span class="annot"><span class="annottext">Bool -&gt; StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154957"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154956"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ())
-&gt; StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-165"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681154952"><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621681154952"><span class="hs-identifier hs-var">eqsm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154951"><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621681154951"><span class="hs-identifier hs-var">eqsl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O)))
-&gt; StateT S (TCMT IO) (MapS Int (Maybe (Bool, MExp O, MExp O)))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span>
</span><span id="line-166"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Map Int (Maybe (Bool, MExp O, MExp O)) -&gt; Bool
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Bool
</span><span class="hs-identifier hs-var">Map.notMember</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154955"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621681154952"><span class="hs-identifier hs-var">eqsm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ())
-&gt; StateT S (TCMT IO) () -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>           </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S (TCMT IO) ())
-&gt; (S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681154949"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154949"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154949"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; Maybe (Bool, MExp O, MExp O)
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154955"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621681154952"><span class="hs-identifier hs-var">eqsm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154955"><span class="hs-identifier hs-var">eqi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; [Int]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621681154951"><span class="hs-identifier hs-var">eqsl</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-168"></span><span>        </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Bool, Term, Term)] -&gt; [Int] -&gt; [((Bool, Term, Term), Int)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621681155075"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-169"></span><span>       </span><span id="local-6989586621681154947"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO MetaVariable -&gt; StateT S (TCMT IO) MetaVariable
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO MetaVariable -&gt; StateT S (TCMT IO) MetaVariable)
-&gt; TCMT IO MetaVariable -&gt; StateT S (TCMT IO) MetaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCMT IO MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-170"></span><span>       </span><span id="local-6989586621681154945"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681154945"><span class="hs-identifier hs-var">msol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; MetaInstantiation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvInstantiation"><span class="hs-identifier hs-var">MB.mvInstantiation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-171"></span><span>                     </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#InstV"><span class="hs-identifier hs-type">MB.InstV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-172"></span><span>                      </span><span class="annot"><span class="annottext">TCM (Maybe Term) -&gt; StateT S (TCMT IO) (Maybe Term)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Maybe Term) -&gt; StateT S (TCMT IO) (Maybe Term))
-&gt; TCM (Maybe Term) -&gt; StateT S (TCMT IO) (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCM (Maybe Term) -&gt; TCM (Maybe Term)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCM (Maybe Term) -&gt; TCM (Maybe Term))
-&gt; TCM (Maybe Term) -&gt; TCM (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-173"></span><span>                       </span><span id="local-6989586621681154942"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154942"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Arg Term]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Arg Term]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-var">getContextArgs</span></a></span><span>
</span><span id="line-174"></span><span>                       </span><span class="hs-comment">--sol &lt;- norm (I.MetaV mi args)</span><span>
</span><span id="line-175"></span><span>                       </span><span id="local-6989586621681154941"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154941"><span class="hs-identifier hs-var">sol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a (m :: * -&gt; *). (Instantiate a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier hs-var">instantiate</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCMT IO Term) -&gt; Term -&gt; TCMT IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-var">I.MetaV</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; Elims -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Elims) -&gt; [Arg Term] -&gt; Elims
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Permutation -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier hs-var">permute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier hs-var">takeP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154942"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Permutation) -&gt; Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Permutation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier hs-var">mvPermutation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154942"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-176"></span><span>                       </span><span class="annot"><span class="annottext">Maybe Term -&gt; TCM (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; TCM (Maybe Term)) -&gt; Maybe Term -&gt; TCM (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154941"><span class="hs-identifier hs-var">sol</span></a></span><span>
</span><span id="line-177"></span><span>                     </span><span class="annot"><span class="annottext">MetaInstantiation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; StateT S (TCMT IO) (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-178"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681154945"><span class="hs-identifier hs-var">msol</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-179"></span><span>        </span><span class="annot"><span class="annottext">Maybe Term
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; StateT S (TCMT IO) ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154939"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154939"><span class="hs-identifier hs-var">sol</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-181"></span><span>         </span><span id="local-6989586621681154938"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154938"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-182"></span><span>         </span><span id="local-6989586621681154936"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154936"><span class="hs-identifier hs-var">sol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154939"><span class="hs-identifier hs-var">sol</span></a></span><span>
</span><span id="line-183"></span><span>         </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S (TCMT IO) ())
-&gt; (S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681154935"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154935"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154935"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; Maybe (Bool, MExp O, MExp O)
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O)) -&gt; Int
forall k a. Map k a -&gt; Int
</span><span class="hs-identifier hs-var">Map.size</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154935"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MExp O
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154938"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154936"><span class="hs-identifier hs-var">sol'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154935"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-184"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154932"><span class="annot"><span class="annottext">tt :: Type'' Term Term
</span><a href="#local-6989586621681154932"><span class="hs-identifier hs-var hs-var">tt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Judgement MetaId -&gt; Type'' Term Term
forall a. Judgement a -&gt; Type'' Term Term
</span><a href="Agda.TypeChecking.Monad.Base.html#jMetaType"><span class="hs-identifier hs-var">MB.jMetaType</span></a></span><span> </span><span class="annot"><span class="annottext">(Judgement MetaId -&gt; Type'' Term Term)
-&gt; Judgement MetaId -&gt; Type'' Term Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Judgement MetaId
</span><a href="Agda.TypeChecking.Monad.Base.html#mvJudgement"><span class="hs-identifier hs-var">mvJudgement</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-185"></span><span>           </span><span id="local-6989586621681154930"><span class="annot"><span class="annottext">minfo :: Closure Range
</span><a href="#local-6989586621681154930"><span class="hs-identifier hs-var hs-var">minfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-186"></span><span>           </span><span id="local-6989586621681154929"><span class="annot"><span class="annottext">localVars :: [Type'' Term Term]
</span><a href="#local-6989586621681154929"><span class="hs-identifier hs-var hs-var">localVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom' Term (Name, Type'' Term Term) -&gt; Type'' Term Term)
-&gt; [Dom' Term (Name, Type'' Term Term)] -&gt; [Type'' Term Term]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Name, Type'' Term Term) -&gt; Type'' Term Term
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Name, Type'' Term Term) -&gt; Type'' Term Term)
-&gt; (Dom' Term (Name, Type'' Term Term) -&gt; (Name, Type'' Term Term))
-&gt; Dom' Term (Name, Type'' Term Term)
-&gt; Type'' Term Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term (Name, Type'' Term Term) -&gt; (Name, Type'' Term Term)
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">I.unDom</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Dom' Term (Name, Type'' Term Term)] -&gt; [Type'' Term Term])
-&gt; (Closure Range -&gt; [Dom' Term (Name, Type'' Term Term)])
-&gt; Closure Range
-&gt; [Type'' Term Term]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TCEnv -&gt; [Dom' Term (Name, Type'' Term Term)]
</span><a href="Agda.TypeChecking.Monad.Base.html#envContext"><span class="hs-identifier hs-var">envContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; [Dom' Term (Name, Type'' Term Term)])
-&gt; (Closure Range -&gt; TCEnv)
-&gt; Closure Range
-&gt; [Dom' Term (Name, Type'' Term Term)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCEnv
forall a. Closure a -&gt; TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#clEnv"><span class="hs-identifier hs-var">clEnv</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Range -&gt; [Type'' Term Term])
-&gt; Closure Range -&gt; [Type'' Term Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681154930"><span class="hs-identifier hs-var">minfo</span></a></span><span>
</span><span id="line-187"></span><span>       </span><span class="hs-special">(</span><span id="local-6989586621681154928"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154928"><span class="hs-identifier hs-var">targettype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154927"><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681154927"><span class="hs-identifier hs-var">localVars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Type'' Term Term, [Type'' Term Term])
-&gt; StateT S (TCMT IO) (Type'' Term Term, [Type'' Term Term])
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Type'' Term Term, [Type'' Term Term])
 -&gt; StateT S (TCMT IO) (Type'' Term Term, [Type'' Term Term]))
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
-&gt; StateT S (TCMT IO) (Type'' Term Term, [Type'' Term Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681154930"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Type'' Term Term, [Type'' Term Term])
 -&gt; TCM (Type'' Term Term, [Type'' Term Term]))
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-188"></span><span>        </span><span id="local-6989586621681154926"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154926"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Arg Term]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Arg Term]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-var">getContextArgs</span></a></span><span>
</span><span id="line-189"></span><span>        </span><span id="local-6989586621681154925"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154925"><span class="hs-identifier hs-var">targettype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154932"><span class="hs-identifier hs-var">tt</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; [Arg Term] -&gt; TCM (Type'' Term Term)
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type'' Term Term -&gt; a -&gt; m (Type'' Term Term)
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Permutation -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier hs-var">permute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier hs-var">takeP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154926"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Permutation) -&gt; Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Permutation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier hs-var">mvPermutation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154947"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154926"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-190"></span><span>        </span><span id="local-6989586621681154924"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154924"><span class="hs-identifier hs-var">targettype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; TCM (Type'' Term Term)
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154925"><span class="hs-identifier hs-var">targettype</span></a></span><span>
</span><span id="line-191"></span><span>        </span><span id="local-6989586621681154923"><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681154923"><span class="hs-identifier hs-var">localVars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type'' Term Term -&gt; TCM (Type'' Term Term))
-&gt; [Type'' Term Term] -&gt; TCMT IO [Type'' Term Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; TCM (Type'' Term Term)
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681154929"><span class="hs-identifier hs-var">localVars</span></a></span><span>
</span><span id="line-192"></span><span>        </span><span class="annot"><span class="annottext">(Type'' Term Term, [Type'' Term Term])
-&gt; TCM (Type'' Term Term, [Type'' Term Term])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154924"><span class="hs-identifier hs-var">targettype</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681154923"><span class="hs-identifier hs-var">localVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154922"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154922"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154922"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Maybe MetaId
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>       </span><span id="local-6989586621681154921"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154921"><span class="hs-identifier hs-var">typ'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154928"><span class="hs-identifier hs-var">targettype</span></a></span><span>
</span><span id="line-195"></span><span>       </span><span id="local-6989586621681154920"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154920"><span class="hs-identifier hs-var">ctx'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O))
-&gt; [Type'' Term Term] -&gt; StateT S (TCMT IO) [MExp O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681154927"><span class="hs-identifier hs-var">localVars</span></a></span><span>
</span><span id="line-196"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154919"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154919"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154919"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>       </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154918"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154918"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154918"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
     [MetaId]))
-&gt; MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681154916"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154916"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154915"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681154915"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154916"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(MExp O, [MExp O]) -&gt; Maybe (MExp O, [MExp O])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154921"><span class="hs-identifier hs-var">typ'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154920"><span class="hs-identifier hs-var">ctx'</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681154915"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154959"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154918"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-198"></span><span>       </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155072"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">Maybe MetaId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-200"></span><span>       </span><span id="local-6989586621681154914"><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681154914"><span class="hs-identifier hs-var">nxt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O)))
-&gt; (MapS Int (Maybe (Bool, MExp O, MExp O)) -&gt; S -&gt; S)
-&gt; TOM (Maybe Int)
forall a b.
(S -&gt; (a, [b])) -&gt; ((a, [b]) -&gt; S -&gt; S) -&gt; TOM (Maybe b)
</span><a href="Agda.Auto.Convert.html#popMapS"><span class="hs-identifier hs-var">popMapS</span></a></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154913"><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621681154913"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681154912"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154912"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154912"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="#local-6989586621681154913"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>       </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Int
</span><a href="#local-6989586621681154914"><span class="hs-identifier hs-var">nxt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-202"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154911"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154911"><span class="hs-identifier hs-var">eqi</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-203"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154910"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154910"><span class="hs-identifier hs-var">ineq</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154909"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154909"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154908"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154908"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)]
</span><a href="#local-6989586621681155075"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, Term, Term)] -&gt; Int -&gt; (Bool, Term, Term)
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154911"><span class="hs-identifier hs-var">eqi</span></a></span><span>
</span><span id="line-204"></span><span>         </span><span id="local-6989586621681154906"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154906"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154909"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-205"></span><span>         </span><span id="local-6989586621681154905"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154905"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154908"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-206"></span><span>         </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154904"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154904"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154904"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Int (Maybe (Bool, MExp O, MExp O))
 -&gt; Map Int (Maybe (Bool, MExp O, MExp O)))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Maybe (Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O))
-&gt; Int
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Bool, MExp O, MExp O) -&gt; Maybe (Bool, MExp O, MExp O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154910"><span class="hs-identifier hs-var">ineq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154906"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154905"><span class="hs-identifier hs-var">i'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154911"><span class="hs-identifier hs-var">eqi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154904"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>         </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155072"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-208"></span><span>        </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-209"></span><span>         </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681155072"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-210"></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681154903"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154903"><span class="hs-identifier hs-var">icns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154902"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154902"><span class="hs-identifier hs-var">typs'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154901"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154901"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) ([ConstRef O], [MExp O])
-&gt; S -&gt; TCMT IO (([ConstRef O], [MExp O]), S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span>
</span><span id="line-211"></span><span>  </span><span class="hs-special">(</span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681155078"><span class="hs-identifier hs-var">imi</span></a></span><span>
</span><span id="line-212"></span><span>      </span><span id="local-6989586621681154899"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154899"><span class="hs-identifier hs-var">icns'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Hint -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; [Hint] -&gt; StateT S (TCMT IO) [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span> </span><span id="local-6989586621681154898"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154898"><span class="hs-identifier hs-var">iscon</span></a></span></span><span> </span><span id="local-6989586621681154897"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154897"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154898"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154897"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681155077"><span class="hs-identifier hs-var">icns</span></a></span><span>
</span><span id="line-213"></span><span>      </span><span id="local-6989586621681154896"><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154896"><span class="hs-identifier hs-var">typs'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O))
-&gt; [Type'' Term Term] -&gt; StateT S (TCMT IO) [MExp O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Type'' Term Term]
</span><a href="#local-6989586621681155076"><span class="hs-identifier hs-var">typs</span></a></span><span>
</span><span id="line-214"></span><span>      </span><span id="local-6989586621681154895"><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681154895"><span class="hs-identifier hs-var">projfcns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>      </span><span id="local-6989586621681154894"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154894"><span class="hs-identifier hs-var">projfcns'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; [QName] -&gt; StateT S (TCMT IO) [ConstRef O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154893"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154893"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154893"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681154895"><span class="hs-identifier hs-var">projfcns</span></a></span><span>
</span><span id="line-216"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; TOM [QName]
</span><a href="#local-6989586621681155073"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-217"></span><span>      </span><span class="annot"><span class="annottext">([ConstRef O], [MExp O])
-&gt; StateT S (TCMT IO) ([ConstRef O], [MExp O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154894"><span class="hs-identifier hs-var">projfcns'</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; [ConstRef O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154899"><span class="hs-identifier hs-var">icns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154896"><span class="hs-identifier hs-var">typs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O)
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681155078"><span class="hs-identifier hs-var">imi</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; TCM ()
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; TCM ()) -&gt; IO () -&gt; TCM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; IO ()) -&gt; [ConstRef O] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO ()
forall o. ConstRef o -&gt; IO ()
</span><a href="Agda.Auto.Syntax.html#categorizedecl"><span class="hs-identifier hs-var">categorizedecl</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154903"><span class="hs-identifier hs-var">icns'</span></a></span><span>
</span><span id="line-220"></span><span> </span><span class="annot"><span class="annottext">([ConstRef O], [MExp O],
 Map
   MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
 [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
-&gt; TCM
     ([ConstRef O], [MExp O],
      Map
        MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]),
      [(Bool, MExp O, MExp O)], Map QName (TMode, ConstRef O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681154903"><span class="hs-identifier hs-var">icns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MExp O]
</span><a href="#local-6989586621681154902"><span class="hs-identifier hs-var">typs'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId]))
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId])
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">(Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; (Metavar (Exp O) (RefInfo O), MExp O, [MExp O], [MetaId])
forall {a} {b} {c} {d}. (a, Maybe (b, c), d) -&gt; (a, b, c, d)
</span><a href="#local-6989586621681154890"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154901"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Maybe (Bool, MExp O, MExp O) -&gt; (Bool, MExp O, MExp O))
-&gt; [Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, MExp O, MExp O) -&gt; (Bool, MExp O, MExp O)
forall {a}. Maybe a -&gt; a
</span><a href="#local-6989586621681154889"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">([Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)])
-&gt; [Maybe (Bool, MExp O, MExp O)] -&gt; [(Bool, MExp O, MExp O)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Int (Maybe (Bool, MExp O, MExp O))
-&gt; [Maybe (Bool, MExp O, MExp O)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
-&gt; Map Int (Maybe (Bool, MExp O, MExp O))
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154901"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154901"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-222"></span><span> </span><span id="local-6989586621681154890"><span class="annot"><span class="annottext">flatten :: (a, Maybe (b, c), d) -&gt; (a, b, c, d)
</span><a href="#local-6989586621681154890"><span class="hs-identifier hs-var hs-var">flatten</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154885"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154885"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154884"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681154884"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154883"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621681154883"><span class="hs-identifier hs-var">z</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154882"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621681154882"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154885"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681154884"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621681154883"><span class="hs-identifier hs-var">z</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621681154882"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span> </span><span class="annot"><a href="#local-6989586621681154890"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154881"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154881"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (b, c)
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154880"><span class="annot"><span class="annottext">d
</span><a href="#local-6989586621681154880"><span class="hs-identifier hs-var">w</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, b, c, d)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span> </span><span id="local-6989586621681154889"><span class="annot"><span class="annottext">fromJust :: Maybe a -&gt; a
</span><a href="#local-6989586621681154889"><span class="hs-identifier hs-var hs-var">fromJust</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154877"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154877"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154877"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-226"></span><span> </span><span class="annot"><a href="#local-6989586621681154889"><span class="hs-identifier hs-var">fromJust</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span class="annot"><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-type">getConst</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span id="getConst"><span class="annot"><span class="annottext">getConst :: Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var hs-var">getConst</span></a></span></span><span> </span><span id="local-6989586621681154876"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154876"><span class="hs-identifier hs-var">iscon</span></a></span></span><span> </span><span id="local-6989586621681154875"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681154874"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681154874"><span class="hs-identifier hs-var">mode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-230"></span><span> </span><span id="local-6989586621681154873"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154873"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S (TCMT IO) Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S (TCMT IO) Definition)
-&gt; TCM Definition -&gt; StateT S (TCMT IO) Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-231"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154873"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Record"><span class="hs-identifier hs-type">MB.Record</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">recConHead :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#recConHead"><span class="hs-identifier hs-var">MB.recConHead</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154871"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154871"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-233"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154870"><span class="annot"><span class="annottext">conname :: QName
</span><a href="#local-6989586621681154870"><span class="hs-identifier hs-var hs-var">conname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154871"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-234"></span><span>       </span><span id="local-6989586621681154868"><span class="annot"><span class="annottext">conflds :: [Arg QName]
</span><a href="#local-6989586621681154868"><span class="hs-identifier hs-var hs-var">conflds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; [Arg QName]
</span><a href="Agda.Syntax.Internal.html#conFields"><span class="hs-identifier hs-var">I.conFields</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154871"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-235"></span><span>   </span><span id="local-6989586621681154866"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154866"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S (TCMT IO) (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Map QName (TMode, ConstRef O) -&gt; Maybe (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154866"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154864"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681154864"><span class="hs-identifier hs-var">mode'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154863"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154863"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>     </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154876"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>      </span><span id="local-6989586621681154862"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154862"><span class="hs-identifier hs-var">cd</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154863"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-240"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-type">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681154861"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154861"><span class="hs-identifier hs-var">con</span></a></span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; DeclCont O
forall o. ConstDef o -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154862"><span class="hs-identifier hs-var">cd</span></a></span><span>
</span><span id="line-241"></span><span>      </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154861"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-242"></span><span>     </span><span class="hs-keyword">else</span><span>
</span><span id="line-243"></span><span>      </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154863"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TMode, ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-245"></span><span>     </span><span id="local-6989586621681154860"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154860"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MetaId) -&gt; StateT S (TCMT IO) MetaId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span>
</span><span id="line-246"></span><span>     </span><span id="local-6989586621681154859"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154859"><span class="hs-identifier hs-var">dfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Int -&gt; StateT S (TCMT IO) Int
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; StateT S (TCMT IO) Int)
-&gt; TCMT IO Int -&gt; StateT S (TCMT IO) Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154860"><span class="hs-identifier hs-var">mainm</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-247"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154857"><span class="annot"><span class="annottext">nomi :: Int
</span><a href="#local-6989586621681154857"><span class="hs-identifier hs-var hs-var">nomi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; Int
</span><a href="Agda.Syntax.Internal.html#arity"><span class="hs-identifier hs-var">I.arity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Definition -&gt; Type'' Term Term
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">MB.defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154873"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>     </span><span id="local-6989586621681154855"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154855"><span class="hs-identifier hs-var">ccon</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: String
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.CONS&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, [Arg QName]) -&gt; Maybe (Int, [Arg QName])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154857"><span class="hs-identifier hs-var">nomi</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681154868"><span class="hs-identifier hs-var">conflds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154870"><span class="hs-identifier hs-var">conname</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; DeclCont O
forall o. Int -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Constructor"><span class="hs-identifier hs-var">Constructor</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154857"><span class="hs-identifier hs-var">nomi</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154859"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154859"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ?? correct value of deffreevars for records?</span><span>
</span><span id="line-249"></span><span>     </span><span id="local-6989586621681154851"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154851"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: String
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ConstRef O] -&gt; [ConstRef O] -&gt; DeclCont O
forall o. [ConstRef o] -&gt; [ConstRef o] -&gt; DeclCont o
</span><a href="Agda.Auto.Syntax.html#Datatype"><span class="hs-identifier hs-var">Datatype</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154855"><span class="hs-identifier hs-var">ccon</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154859"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ?? correct value of deffreevars for records?</span><span>
</span><span id="line-250"></span><span>     </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154850"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154850"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154850"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
-&gt; (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681154874"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154851"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154866"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [QName] -&gt; [QName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; [QName]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154850"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154876"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154855"><span class="hs-identifier hs-var">ccon</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154851"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-252"></span><span>  </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-253"></span><span>   </span><span id="local-6989586621681154849"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154849"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Map QName (TMode, ConstRef O))
-&gt; StateT S (TCMT IO) (Map QName (TMode, ConstRef O))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS QName (TMode, ConstRef O) -&gt; Map QName (TMode, ConstRef O))
-&gt; (S -&gt; MapS QName (TMode, ConstRef O))
-&gt; S
-&gt; Map QName (TMode, ConstRef O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Map QName (TMode, ConstRef O) -&gt; Maybe (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154849"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154848"><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681154848"><span class="hs-identifier hs-var">mode'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154847"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154847"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-256"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154847"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><span class="annottext">Maybe (TMode, ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-258"></span><span>     </span><span class="hs-special">(</span><span id="local-6989586621681154846"><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621681154846"><span class="hs-identifier hs-var">miscon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154845"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154845"><span class="hs-identifier hs-var">sname</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154876"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-259"></span><span>       </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Constructor"><span class="hs-identifier hs-type">MB.Constructor</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">conPars :: Defn -&gt; Int
</span><a href="Agda.TypeChecking.Monad.Base.html#conPars"><span class="hs-identifier hs-var">MB.conPars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154843"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154843"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">conData :: Defn -&gt; QName
</span><a href="Agda.TypeChecking.Monad.Base.html#conData"><span class="hs-identifier hs-var">MB.conData</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154842"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154842"><span class="hs-identifier hs-var">dname</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">conSrcCon :: Defn -&gt; ConHead
</span><a href="Agda.TypeChecking.Monad.Base.html#conSrcCon"><span class="hs-identifier hs-var">MB.conSrcCon</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154840"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154840"><span class="hs-identifier hs-var">ch</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">MB.theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154873"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-260"></span><span>       </span><span class="annot"><span class="annottext">(Maybe (Int, [Arg QName]), String)
-&gt; StateT S (TCMT IO) (Maybe (Int, [Arg QName]), String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int, [Arg QName]) -&gt; Maybe (Int, [Arg QName])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154843"><span class="hs-identifier hs-var">npar</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">ConHead -&gt; [Arg QName]
</span><a href="Agda.Syntax.Internal.html#conFields"><span class="hs-identifier hs-var">I.conFields</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154840"><span class="hs-identifier hs-var">ch</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154842"><span class="hs-identifier hs-var">dname</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#qnameName"><span class="hs-identifier hs-var">I.qnameName</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>      </span><span class="hs-keyword">else</span><span>
</span><span id="line-262"></span><span>       </span><span class="annot"><span class="annottext">(Maybe (Int, [Arg QName]), String)
-&gt; StateT S (TCMT IO) (Maybe (Int, [Arg QName]), String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>     </span><span id="local-6989586621681154838"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154838"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; MetaId) -&gt; StateT S (TCMT IO) MetaId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span>
</span><span id="line-264"></span><span>     </span><span id="local-6989586621681154837"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154837"><span class="hs-identifier hs-var">dfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Int -&gt; StateT S (TCMT IO) Int
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; StateT S (TCMT IO) Int)
-&gt; TCMT IO Int -&gt; StateT S (TCMT IO) Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154838"><span class="hs-identifier hs-var">mainm</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-265"></span><span>     </span><span id="local-6989586621681154836"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154836"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O))
-&gt; TCM (ConstRef O) -&gt; StateT S (TCMT IO) (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCM (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCM (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCM (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: String
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154845"><span class="hs-identifier hs-var">sname</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621681154846"><span class="hs-identifier hs-var">miscon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MExp O
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MExp O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154837"><span class="hs-identifier hs-var">dfv</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>     </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154835"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154835"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154835"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
-&gt; (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
-&gt; Map QName (TMode, ConstRef O)
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TMode
</span><a href="#local-6989586621681154874"><span class="hs-identifier hs-var">mode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154836"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154849"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154875"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; [QName] -&gt; [QName]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS QName (TMode, ConstRef O) -&gt; [QName]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S -&gt; MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154835"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>     </span><span class="annot"><span class="annottext">ConstRef O -&gt; StateT S (TCMT IO) (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154836"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-268"></span><span>
</span><span id="line-269"></span><span class="annot"><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-type">getdfv</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">A.QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Nat"><span class="hs-identifier hs-type">Cm.Nat</span></a></span><span>
</span><span id="line-270"></span><span id="getdfv"><span class="annot"><span class="annottext">getdfv :: MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var hs-var">getdfv</span></a></span></span><span> </span><span id="local-6989586621681154833"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154833"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span id="local-6989586621681154832"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154832"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-271"></span><span> </span><span id="local-6989586621681154831"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154831"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCMT IO MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154833"><span class="hs-identifier hs-var">mainm</span></a></span><span>
</span><span id="line-272"></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154831"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; TCMT IO Int) -&gt; TCMT IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Int
forall (m :: * -&gt; *).
(Functor m, Applicative m, ReadTCState m, MonadTCEnv m) =&gt;
QName -&gt; m Int
</span><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-var">getDefFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154832"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-273"></span><span>
</span><span id="line-274"></span><span class="hs-comment">-- | A variant of 'lookupLocalMeta' that, if applied to a remote</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- meta-variable, raises a special error message noting that remote</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- meta-variables are not handled by the auto command.</span><span>
</span><span id="line-277"></span><span>
</span><span id="line-278"></span><span class="annot"><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-type">lookupLocalMetaAuto</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MetaVariable"><span class="hs-identifier hs-type">MB.MetaVariable</span></a></span><span>
</span><span id="line-279"></span><span id="lookupLocalMetaAuto"><span class="annot"><span class="annottext">lookupLocalMetaAuto :: MetaId -&gt; TCMT IO MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var hs-var">lookupLocalMetaAuto</span></a></span></span><span> </span><span id="local-6989586621681154830"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154830"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621681154829"><span class="annot"><span class="annottext">Maybe (Either RemoteMetaVariable MetaVariable)
</span><a href="#local-6989586621681154829"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCMT IO (Maybe (Either RemoteMetaVariable MetaVariable))
forall (m :: * -&gt; *).
ReadTCState m =&gt;
MetaId -&gt; m (Maybe (Either RemoteMetaVariable MetaVariable))
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupMeta"><span class="hs-identifier hs-var">lookupMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154830"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Either RemoteMetaVariable MetaVariable)
</span><a href="#local-6989586621681154829"><span class="hs-identifier hs-var">mv</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681154828"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154828"><span class="hs-identifier hs-var">mv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; TCMT IO MetaVariable
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681154828"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Either RemoteMetaVariable MetaVariable)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO MetaVariable
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCMT IO MetaVariable
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCMT IO MetaVariable)
-&gt; TypeError -&gt; TCMT IO MetaVariable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#GenericError"><span class="hs-identifier hs-var">MB.GenericError</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TypeError) -&gt; String -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-285"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The auto command does not support remote meta-variables,&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-286"></span><span>      </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;consider using --no-save-metas&quot;</span></span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="annot"><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-type">getMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Metavar"><span class="hs-identifier hs-type">Metavar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-289"></span><span id="getMeta"><span class="annot"><span class="annottext">getMeta :: MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var hs-var">getMeta</span></a></span></span><span> </span><span id="local-6989586621681154825"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154825"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span> </span><span id="local-6989586621681154824"><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621681154824"><span class="hs-identifier hs-var">mmap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; StateT
     S
     (TCMT IO)
     (Map
        MetaId
        (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(MapS
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; (S
    -&gt; MapS
         MetaId
         (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; S
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Maybe
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621681154824"><span class="hs-identifier hs-var">mmap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154823"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154823"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-293"></span><span>   </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154823"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-294"></span><span>  </span><span class="annot"><span class="annottext">Maybe
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-295"></span><span>   </span><span id="local-6989586621681154822"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154822"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (Metavar (Exp O) (RefInfo O))
-&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (Metavar (Exp O) (RefInfo O))
 -&gt; TOM (Metavar (Exp O) (RefInfo O)))
-&gt; TCM (Metavar (Exp O) (RefInfo O))
-&gt; TOM (Metavar (Exp O) (RefInfo O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (Metavar (Exp O) (RefInfo O))
-&gt; TCM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">IO (Metavar (Exp O) (RefInfo O))
forall a blk. IO (Metavar a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#initMeta"><span class="hs-identifier hs-var">initMeta</span></a></span><span>
</span><span id="line-296"></span><span>   </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S (TCMT IO) ())
-&gt; (S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154820"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154820"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154820"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
-&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
    [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154822"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="#local-6989586621681154824"><span class="hs-identifier hs-var">mmap</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154825"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; [MetaId]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; [MetaId]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154820"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-297"></span><span>   </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; TOM (Metavar (Exp O) (RefInfo O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154822"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="annot"><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-type">getEqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-300"></span><span id="getEqs"><span class="annot"><span class="annottext">getEqs :: TCM [(Bool, Term, Term)]
</span><a href="Agda.Auto.Convert.html#getEqs"><span class="hs-identifier hs-var hs-var">getEqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO [ProblemConstraint]
-&gt; (ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; TCM [(Bool, Term, Term)]
forall (m :: * -&gt; *) a b.
Monad m =&gt;
m [a] -&gt; (a -&gt; m (Maybe b)) -&gt; m [b]
</span><a href="Agda.Utils.Monad.html#forMaybeMM"><span class="hs-identifier hs-var">forMaybeMM</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO [ProblemConstraint]
forall (m :: * -&gt; *). ReadTCState m =&gt; m [ProblemConstraint]
</span><a href="Agda.TypeChecking.Monad.Constraints.html#getAllConstraints"><span class="hs-identifier hs-var">getAllConstraints</span></a></span><span> </span><span class="annot"><span class="annottext">((ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
 -&gt; TCM [(Bool, Term, Term)])
-&gt; (ProblemConstraint -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; TCM [(Bool, Term, Term)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154819"><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621681154819"><span class="hs-identifier hs-var">eqc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621681154818"><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621681154818"><span class="hs-identifier hs-var">neqc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; TCMT IO ProblemConstraint
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621681154819"><span class="hs-identifier hs-var">eqc</span></a></span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Closure Constraint -&gt; Constraint
forall a. Closure a -&gt; a
</span><a href="Agda.TypeChecking.Monad.Base.html#clValue"><span class="hs-identifier hs-var">MB.clValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Constraint -&gt; Constraint)
-&gt; Closure Constraint -&gt; Constraint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; Closure Constraint
</span><a href="Agda.TypeChecking.Monad.Base.html#theConstraint"><span class="hs-identifier hs-var">MB.theConstraint</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint
</span><a href="#local-6989586621681154818"><span class="hs-identifier hs-var">neqc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-303"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ValueCmp"><span class="hs-identifier hs-type">MB.ValueCmp</span></a></span><span> </span><span id="local-6989586621681154814"><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621681154814"><span class="hs-identifier hs-var">ineq</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompareAs
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154813"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154813"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154812"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154812"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-304"></span><span>      </span><span id="local-6989586621681154811"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154811"><span class="hs-identifier hs-var">ei</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154813"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-305"></span><span>      </span><span id="local-6989586621681154810"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154810"><span class="hs-identifier hs-var">ee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154812"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-306"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term)))
-&gt; Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Bool, Term, Term) -&gt; Maybe (Bool, Term, Term)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Comparison -&gt; Bool
</span><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var">tomyIneq</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621681154814"><span class="hs-identifier hs-var">ineq</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154810"><span class="hs-identifier hs-var">ee</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154811"><span class="hs-identifier hs-var">ei</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>    </span><span class="annot"><span class="annottext">Constraint
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term) -&gt; TCMT IO (Maybe (Bool, Term, Term))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Bool, Term, Term)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span id="local-6989586621681155923"><span class="annot"><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-type">literalsNotImplemented</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155923"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-310"></span><span id="literalsNotImplemented"><span class="annot"><span class="annottext">literalsNotImplemented :: forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var hs-var">literalsNotImplemented</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCMT IO a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCMT IO a) -&gt; TypeError -&gt; TCMT IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotImplemented"><span class="hs-identifier hs-var">MB.NotImplemented</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TypeError) -&gt; String -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The Agda synthesizer (Agsy) does not support literals yet&quot;</span></span><span>
</span><span id="line-312"></span><span>
</span><span id="line-313"></span><span id="local-6989586621681154802"><span class="annot"><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-type">hitsNotImplemented</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681154802"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-314"></span><span id="hitsNotImplemented"><span class="annot"><span class="annottext">hitsNotImplemented :: forall a. TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var hs-var">hitsNotImplemented</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TypeError -&gt; TCMT IO a
forall (m :: * -&gt; *) a.
(HasCallStack, MonadTCError m) =&gt;
TypeError -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#typeError"><span class="hs-identifier hs-var">MB.typeError</span></a></span><span> </span><span class="annot"><span class="annottext">(TypeError -&gt; TCMT IO a) -&gt; TypeError -&gt; TCMT IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; TypeError
</span><a href="Agda.TypeChecking.Monad.Base.html#NotImplemented"><span class="hs-identifier hs-var">MB.NotImplemented</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TypeError) -&gt; String -&gt; TypeError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-315"></span><span>  </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;The Agda synthesizer (Agsy) does not support HITs yet&quot;</span></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="hs-keyword">class</span><span> </span><span id="Conversion"><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-var">Conversion</span></a></span></span><span> </span><span id="local-6989586621681156041"><span class="annot"><a href="#local-6989586621681156041"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681156040"><span class="annot"><a href="#local-6989586621681156040"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621681156039"><span class="annot"><a href="#local-6989586621681156039"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>  </span><span id="convert"><span class="annot"><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-type">convert</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681156040"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681156041"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156039"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-319"></span><span>
</span><span id="line-320"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-321"></span><span>  </span><span id="local-6989586621681154788"><span class="annot"><span class="annottext">convert :: [Clause] -&gt; TOM [Clause O]
</span><a href="#local-6989586621681154788"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Maybe (Clause O)] -&gt; [Clause O])
-&gt; StateT S (TCMT IO) [Maybe (Clause O)] -&gt; TOM [Clause O]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Clause O)] -&gt; [Clause O]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">(StateT S (TCMT IO) [Maybe (Clause O)] -&gt; TOM [Clause O])
-&gt; ([Clause] -&gt; StateT S (TCMT IO) [Maybe (Clause O)])
-&gt; [Clause]
-&gt; TOM [Clause O]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; StateT S (TCMT IO) (Maybe (Clause O)))
-&gt; [Clause] -&gt; StateT S (TCMT IO) [Maybe (Clause O)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; StateT S (TCMT IO) (Maybe (Clause O))
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span id="local-6989586621681154765"><span class="annot"><span class="annottext">convert :: Clause -&gt; StateT S (TCMT IO) (Maybe (Clause O))
</span><a href="#local-6989586621681154765"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154764"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154764"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- Jesper, 2016-07-28:</span><span>
</span><span id="line-326"></span><span>     </span><span class="hs-comment">-- I can't figure out if this should be the old or new</span><span>
</span><span id="line-327"></span><span>     </span><span class="hs-comment">-- clause body (i.e. relative to the positions of pattern variables or</span><span>
</span><span id="line-328"></span><span>     </span><span class="hs-comment">-- relative to the clauseTel). Both options pass the test suite, so I</span><span>
</span><span id="line-329"></span><span>     </span><span class="hs-comment">-- have the impression it doesn't actually matter.</span><span>
</span><span id="line-330"></span><span>     </span><span class="hs-comment">-- ALTERNATIVE CODE:</span><span>
</span><span id="line-331"></span><span>     </span><span class="hs-comment">-- perm = fromMaybe __IMPOSSIBLE__ $ IP.clausePerm cl</span><span>
</span><span id="line-332"></span><span>     </span><span class="hs-comment">-- body = applySubst (renamingR perm) $ I.clauseBody cl</span><span>
</span><span id="line-333"></span><span>        </span><span id="local-6989586621681154763"><span class="annot"><span class="annottext">body :: Maybe Term
</span><a href="#local-6989586621681154763"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">I.clauseBody</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154764"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-334"></span><span>        </span><span id="local-6989586621681154761"><span class="annot"><span class="annottext">pats :: [Arg DeBruijnPattern]
</span><a href="#local-6989586621681154761"><span class="hs-identifier hs-var hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause -&gt; [Arg DeBruijnPattern]
</span><a href="Agda.Syntax.Internal.html#clausePats"><span class="hs-identifier hs-var">I.clausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154764"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621681154759"><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621681154759"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Arg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O))
-&gt; [Arg (Pattern' String)] -&gt; StateT S (TCMT IO) [Pat O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Arg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg DeBruijnPattern] -&gt; [Arg (Pattern' String)]
forall a b. LabelPatVars a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Internal.Pattern.html#unnumberPatVars"><span class="hs-identifier hs-var">IP.unnumberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg DeBruijnPattern]
</span><a href="#local-6989586621681154761"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pattern"><span class="hs-identifier hs-type">I.Pattern</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-336"></span><span>    </span><span id="local-6989586621681154756"><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621681154756"><span class="hs-identifier hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; StateT S (TCMT IO) (MExp O))
-&gt; Maybe Term -&gt; StateT S (TCMT IO) (Maybe (MExp O))
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; StateT S (TCMT IO) (Maybe (MExp O)))
-&gt; StateT S (TCMT IO) (Maybe Term)
-&gt; StateT S (TCMT IO) (Maybe (MExp O))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCM (Maybe Term) -&gt; StateT S (TCMT IO) (Maybe Term)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Term -&gt; TCM (Maybe Term)
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681154763"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Clause O) -&gt; StateT S (TCMT IO) (Maybe (Clause O))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Clause O) -&gt; StateT S (TCMT IO) (Maybe (Clause O)))
-&gt; Maybe (Clause O) -&gt; StateT S (TCMT IO) (Maybe (Clause O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621681154759"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; Clause O) -&gt; Maybe (MExp O) -&gt; Maybe (Clause O)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621681154756"><span class="hs-identifier hs-var">body'</span></a></span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pattern"><span class="hs-identifier hs-type">I.Pattern</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Pat"><span class="hs-identifier hs-type">Pat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-340"></span><span>  </span><span id="local-6989586621681154722"><span class="annot"><span class="annottext">convert :: Arg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O)
</span><a href="#local-6989586621681154722"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154721"><span class="annot"><span class="annottext">Arg (Pattern' String)
</span><a href="#local-6989586621681154721"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Arg (Pattern' String) -&gt; Pattern' String
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">Cm.unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg (Pattern' String)
</span><a href="#local-6989586621681154721"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">I.IApplyP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154718"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154718"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S (TCMT IO) (Pat O))
-&gt; Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pat O
forall o. String -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154718"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">I.VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154715"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154715"><span class="hs-identifier hs-var">n</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S (TCMT IO) (Pat O))
-&gt; Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pat O
forall o. String -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154715"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">I.DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S (TCMT IO) (Pat O))
-&gt; Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pat O
forall o. String -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatVar"><span class="hs-identifier hs-var">PatVar</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span>
</span><span id="line-344"></span><span>      </span><span class="hs-comment">-- because Agda includes these when referring to variables in the body</span><span>
</span><span id="line-345"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">I.ConP</span></a></span><span> </span><span id="local-6989586621681154712"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154712"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154711"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154711"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-346"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154710"><span class="annot"><span class="annottext">n :: QName
</span><a href="#local-6989586621681154710"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154712"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-347"></span><span>      </span><span id="local-6989586621681154709"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154709"><span class="hs-identifier hs-var">c</span></a></span></span><span>     </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154710"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-348"></span><span>      </span><span id="local-6989586621681154708"><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621681154708"><span class="hs-identifier hs-var">pats'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(NamedArg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O))
-&gt; [NamedArg (Pattern' String)] -&gt; StateT S (TCMT IO) [Pat O]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg (Pattern' String) -&gt; StateT S (TCMT IO) (Pat O))
-&gt; (NamedArg (Pattern' String) -&gt; Arg (Pattern' String))
-&gt; NamedArg (Pattern' String)
-&gt; StateT S (TCMT IO) (Pat O)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Named NamedName (Pattern' String) -&gt; Pattern' String)
-&gt; NamedArg (Pattern' String) -&gt; Arg (Pattern' String)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Named NamedName (Pattern' String) -&gt; Pattern' String
forall name a. Named name a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedThing"><span class="hs-identifier hs-var">Cm.namedThing</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154711"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span id="local-6989586621681154706"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154706"><span class="hs-identifier hs-var">def</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S (TCMT IO) Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S (TCMT IO) Definition)
-&gt; TCM Definition -&gt; StateT S (TCMT IO) Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154710"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-350"></span><span>      </span><span id="local-6989586621681154705"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154705"><span class="hs-identifier hs-var">cc</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154709"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-351"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154704"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154704"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154705"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="annot"><span class="annottext">Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Pat O -&gt; StateT S (TCMT IO) (Pat O))
-&gt; Pat O -&gt; StateT S (TCMT IO) (Pat O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; [Pat O] -&gt; Pat O
forall o. ConstRef o -&gt; [Pat o] -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatConApp"><span class="hs-identifier hs-var">PatConApp</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154709"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Pat O -&gt; [Pat O]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154704"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="annot"><span class="annottext">Pat O
forall o. Pat o
</span><a href="Agda.Auto.Syntax.html#PatExp"><span class="hs-identifier hs-var">PatExp</span></a></span><span> </span><span class="annot"><span class="annottext">[Pat O] -&gt; [Pat O] -&gt; [Pat O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Pat O]
</span><a href="#local-6989586621681154708"><span class="hs-identifier hs-var">pats'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">I.ProjP</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154699"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154699"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; Pat O
forall o. ConstRef o -&gt; Pat o
</span><a href="Agda.Auto.Syntax.html#PatProj"><span class="hs-identifier hs-var">PatProj</span></a></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; Pat O)
-&gt; StateT S (TCMT IO) (ConstRef O) -&gt; StateT S (TCMT IO) (Pat O)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154699"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-comment">-- UNSUPPORTED CASES</span><span>
</span><span id="line-356"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">I.LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM (Pat O) -&gt; StateT S (TCMT IO) (Pat O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCM (Pat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">I.DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM (Pat O) -&gt; StateT S (TCMT IO) (Pat O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCM (Pat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var">hitsNotImplemented</span></a></span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-360"></span><span>  </span><span id="local-6989586621681154693"><span class="annot"><span class="annottext">convert :: Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
</span><a href="#local-6989586621681154693"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154692"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154692"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154692"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-comment">-- sort info is thrown away</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621681154617"><span class="annot"><span class="annottext">convert :: Term -&gt; StateT S (TCMT IO) (MExp O)
</span><a href="#local-6989586621681154617"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154616"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154616"><span class="hs-identifier hs-var">v0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#unSpine"><span class="hs-identifier hs-var">I.unSpine</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154616"><span class="hs-identifier hs-var">v0</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-365"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154613"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154613"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681154612"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154612"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-366"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154611"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154611"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154612"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-367"></span><span>        </span><span id="local-6989586621681154609"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154609"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S (TCMT IO) (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154611"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-368"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elr O
forall o. Int -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154613"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154609"><span class="hs-identifier hs-var">as'</span></a></span><span>
</span><span id="line-369"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621681154603"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154603"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621681154602"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154602"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-370"></span><span>        </span><span id="local-6989586621681154601"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154601"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154602"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Abs (MExp O) -&gt; Exp O
forall o. Hiding -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-var">Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154603"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp O -&gt; Abs (MExp O)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; MId) -&gt; String -&gt; MId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Abs Term -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">I.absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154602"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154601"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-372"></span><span>      </span><span id="local-6989586621681154596"><span class="annot"><span class="annottext">t :: Term
</span><a href="#local-6989586621681154596"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-373"></span><span>        </span><span id="local-6989586621681154594"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154594"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S (TCMT IO) Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; StateT S (TCMT IO) Term)
-&gt; TCMT IO Term -&gt; StateT S (TCMT IO) Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier hs-var">constructorForm</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154596"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-374"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154594"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-375"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM (MExp O) -&gt; StateT S (TCMT IO) (MExp O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">TCM (MExp O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-376"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154594"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-377"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">I.Level</span></a></span><span> </span><span id="local-6989586621681154592"><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621681154592"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; StateT S (TCMT IO) (MExp O))
-&gt; StateT S (TCMT IO) Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S (TCMT IO) Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Level -&gt; TCMT IO Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Level -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier hs-var">reallyUnLevelView</span></a></span><span> </span><span class="annot"><span class="annottext">Level
</span><a href="#local-6989586621681154592"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621681154591"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154591"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681154590"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154590"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-379"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154589"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154589"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154590"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-380"></span><span>        </span><span id="local-6989586621681154588"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154588"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154591"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-381"></span><span>        </span><span id="local-6989586621681154587"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154587"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S (TCMT IO) (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154589"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-382"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; Elr O
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154588"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154587"><span class="hs-identifier hs-var">as'</span></a></span><span>
</span><span id="line-383"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621681154584"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154584"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span id="local-6989586621681154583"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681154583"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621681154582"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154582"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-384"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154581"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154581"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Maybe [Arg Term]
forall a. [Elim' a] -&gt; Maybe [Arg a]
</span><a href="Agda.Syntax.Internal.Elim.html#allApplyElims"><span class="hs-identifier hs-var">I.allApplyElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154582"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-385"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154580"><span class="annot"><span class="annottext">name :: QName
</span><a href="#local-6989586621681154580"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154584"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-386"></span><span>        </span><span id="local-6989586621681154579"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154579"><span class="hs-identifier hs-var">c</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154580"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span>
</span><span id="line-387"></span><span>        </span><span id="local-6989586621681154578"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154578"><span class="hs-identifier hs-var">as'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Arg Term] -&gt; StateT S (TCMT IO) (MArgList O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154581"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-388"></span><span>        </span><span id="local-6989586621681154577"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681154577"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM Definition -&gt; StateT S (TCMT IO) Definition
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM Definition -&gt; StateT S (TCMT IO) Definition)
-&gt; TCM Definition -&gt; StateT S (TCMT IO) Definition
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154580"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-389"></span><span>        </span><span id="local-6989586621681154576"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154576"><span class="hs-identifier hs-var">cc</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O))
-&gt; TCM (ConstDef O) -&gt; StateT S (TCMT IO) (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154579"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-390"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154575"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154575"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154576"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; Elr O
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154579"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MArgList O -&gt; Int -&gt; MArgList O)
-&gt; MArgList O -&gt; [Int] -&gt; MArgList O
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154573"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154573"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgList O -&gt; MArgList O) -&gt; ArgList O -&gt; MArgList O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MArgList O -&gt; ArgList O
forall o. MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-var">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154573"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154578"><span class="hs-identifier hs-var">as'</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154575"><span class="hs-identifier hs-var">npar</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154570"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154570"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154569"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154569"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154568"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154568"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-393"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154567"><span class="annot"><span class="annottext">y :: Type'' Term Term
</span><a href="#local-6989586621681154567"><span class="hs-identifier hs-var hs-var">y</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154568"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-394"></span><span>            </span><span id="local-6989586621681154566"><span class="annot"><span class="annottext">name :: String
</span><a href="#local-6989586621681154566"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">I.absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154568"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-395"></span><span>        </span><span id="local-6989586621681154565"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154565"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154569"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-396"></span><span>        </span><span id="local-6989586621681154564"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154564"><span class="hs-identifier hs-var">y'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154567"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; Hiding -&gt; Bool -&gt; MExp O -&gt; Abs (MExp O) -&gt; Exp O
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154570"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Type'' Term Term -&gt; Bool
forall a. Free a =&gt; Int -&gt; a -&gt; Bool
</span><a href="Agda.TypeChecking.Free.html#freeIn"><span class="hs-identifier hs-var">Free.freeIn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154567"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154565"><span class="hs-identifier hs-var">x'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp O -&gt; Abs (MExp O)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154566"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154564"><span class="hs-identifier hs-var">y'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ClosedLevel"><span class="hs-identifier hs-type">I.ClosedLevel</span></a></span><span> </span><span id="local-6989586621681154559"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681154559"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">(Sort -&gt; Exp O) -&gt; Sort -&gt; Exp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Sort
</span><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Sort) -&gt; Int -&gt; Sort
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681154559"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-399"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span>
</span><span id="line-400"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">I.Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MExp O) -&gt; Exp O -&gt; MExp O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span>
</span><span id="line-401"></span><span>      </span><span id="local-6989586621681154554"><span class="annot"><span class="annottext">t :: Term
</span><a href="#local-6989586621681154554"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-402"></span><span>        </span><span id="local-6989586621681154553"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154553"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO Term -&gt; StateT S (TCMT IO) Term
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Term -&gt; StateT S (TCMT IO) Term)
-&gt; TCMT IO Term -&gt; StateT S (TCMT IO) Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall a (m :: * -&gt; *). (Instantiate a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#instantiate"><span class="hs-identifier hs-var">instantiate</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154554"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-403"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154553"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-404"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span> </span><span id="local-6989586621681154552"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154552"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-405"></span><span>            </span><span id="local-6989586621681154551"><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681154551"><span class="hs-identifier hs-var">mcurmeta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(S -&gt; Maybe MetaId) -&gt; TOM (Maybe MetaId)
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">S -&gt; Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span>
</span><span id="line-406"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
</span><a href="#local-6989586621681154551"><span class="hs-identifier hs-var">mcurmeta</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-407"></span><span>              </span><span class="annot"><span class="annottext">Maybe MetaId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; StateT S (TCMT IO) ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154550"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154550"><span class="hs-identifier hs-var">curmeta</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-409"></span><span>                </span><span class="annot"><span class="annottext">(S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((S -&gt; S) -&gt; StateT S (TCMT IO) ())
-&gt; (S -&gt; S) -&gt; StateT S (TCMT IO) ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154549"><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154549"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154549"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map
   MetaId
   (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; Map
      MetaId
      (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId]))
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall (p :: * -&gt; * -&gt; *) a b c.
Bifunctor p =&gt;
(a -&gt; b) -&gt; p a c -&gt; p b c
</span><span class="hs-identifier hs-var">first</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
 -&gt; (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]),
     [MetaId]))
-&gt; MetaId
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
-&gt; Map
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall k a. Ord k =&gt; (a -&gt; a) -&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.adjust</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681154548"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154548"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154547"><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><a href="#local-6989586621681154547"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154546"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681154546"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154548"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O, [MExp O])
</span><a href="#local-6989586621681154547"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154552"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; [MetaId]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681154546"><span class="hs-identifier hs-var">deps</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154550"><span class="hs-identifier hs-var">curmeta</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">S
-&gt; MapS
     MetaId
     (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="annot"><span class="annottext">S
</span><a href="#local-6989586621681154549"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-410"></span><span>            </span><span id="local-6989586621681154545"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154545"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TOM (Metavar (Exp O) (RefInfo O))
</span><a href="Agda.Auto.Convert.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154552"><span class="hs-identifier hs-var">mid</span></a></span><span>
</span><span id="line-411"></span><span>            </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MExp O
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681154545"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-412"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154553"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-413"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">I.DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(MExp O -&gt; StateT S (TCMT IO) (MExp O))
-&gt; MExp O -&gt; StateT S (TCMT IO) (MExp O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MExp O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">Exp O
forall o. Exp o
</span><a href="Agda.Auto.Syntax.html#dontCare"><span class="hs-identifier hs-var">dontCare</span></a></span><span>
</span><span id="line-414"></span><span>
</span><span id="line-415"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681155862"><span id="local-6989586621681155863"><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155863"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155862"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155863"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681155862"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-416"></span><span>  </span><span id="local-6989586621681154536"><span class="annot"><span class="annottext">convert :: Arg a -&gt; TOM (Hiding, b)
</span><a href="#local-6989586621681154536"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681154535"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154535"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span id="local-6989586621681154534"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154534"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154535"><span class="hs-identifier hs-var">info</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(b -&gt; (Hiding, b)) -&gt; StateT S (TCMT IO) b -&gt; TOM (Hiding, b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; StateT S (TCMT IO) b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154534"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#TOM"><span class="hs-identifier hs-type">TOM</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">I.Args</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#ArgList"><span class="hs-identifier hs-type">ArgList</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>  </span><span id="local-6989586621681154526"><span class="annot"><span class="annottext">convert :: [Arg Term] -&gt; StateT S (TCMT IO) (MArgList O)
</span><a href="#local-6989586621681154526"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154525"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154525"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgList O -&gt; MArgList O)
-&gt; ([(Hiding, MExp O)] -&gt; ArgList O)
-&gt; [(Hiding, MExp O)]
-&gt; MArgList O
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Hiding, MExp O) -&gt; ArgList O -&gt; ArgList O)
-&gt; ArgList O -&gt; [(Hiding, MExp O)] -&gt; ArgList O
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154523"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154523"><span class="hs-identifier hs-var">hid</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681154522"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154522"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; MExp O -&gt; MArgList O -&gt; ArgList O
forall o. Hiding -&gt; MExp o -&gt; MArgList o -&gt; ArgList o
</span><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-var">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154523"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154522"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">(MArgList O -&gt; ArgList O)
-&gt; (ArgList O -&gt; MArgList O) -&gt; ArgList O -&gt; ArgList O
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ArgList O
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span>
</span><span id="line-420"></span><span>               </span><span class="annot"><span class="annottext">([(Hiding, MExp O)] -&gt; MArgList O)
-&gt; StateT S (TCMT IO) [(Hiding, MExp O)]
-&gt; StateT S (TCMT IO) (MArgList O)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; StateT S (TCMT IO) (Hiding, MExp O))
-&gt; [Arg Term] -&gt; StateT S (TCMT IO) [(Hiding, MExp O)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; StateT S (TCMT IO) (Hiding, MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154525"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-421"></span><span>
</span><span id="line-422"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-type">tomyIneq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Comparison"><span class="hs-identifier hs-type">MB.Comparison</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-423"></span><span id="tomyIneq"><span class="annot"><span class="annottext">tomyIneq :: Comparison -&gt; Bool
</span><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var hs-var">tomyIneq</span></a></span></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.html#CmpEq"><span class="hs-identifier hs-var">MB.CmpEq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-424"></span><span class="annot"><a href="Agda.Auto.Convert.html#tomyIneq"><span class="hs-identifier hs-var">tomyIneq</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="Agda.TypeChecking.Monad.Base.html#CmpLeq"><span class="hs-identifier hs-var">MB.CmpLeq</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-type">fmType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-429"></span><span id="fmType"><span class="annot"><span class="annottext">fmType :: MetaId -&gt; Type'' Term Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var hs-var">fmType</span></a></span></span><span> </span><span id="local-6989586621681154516"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154516"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154515"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154515"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154516"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154515"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-type">fmExp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-432"></span><span id="fmExp"><span class="annot"><span class="annottext">fmExp :: MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var hs-var">fmExp</span></a></span></span><span> </span><span id="local-6989586621681154514"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154514"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154513"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154513"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154514"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154513"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-433"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154510"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154510"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154509"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154509"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154510"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154509"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-434"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154508"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154508"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span class="annot"><span class="annottext">Literal
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-435"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154507"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154507"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">I.Level</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Max"><span class="hs-identifier hs-type">I.Max</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154505"><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621681154505"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PlusLevel' Term -&gt; Bool) -&gt; [PlusLevel' Term] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; PlusLevel' Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-var">fmLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154507"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[PlusLevel' Term]
</span><a href="#local-6989586621681154505"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-436"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154502"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154502"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154501"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154501"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154502"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154501"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154500"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154500"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154499"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681154499"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621681154498"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154498"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var">fmExps</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154500"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Term] -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; [Arg Term]
forall t. [Elim' t] -&gt; [Arg t]
</span><a href="Agda.Syntax.Internal.Elim.html#argsFromElims"><span class="hs-identifier hs-var">I.argsFromElims</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154498"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-438"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154497"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154497"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span id="local-6989586621681154496"><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154496"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681154495"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154495"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Type'' Term Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var">fmType</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154497"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom (Type'' Term Term) -&gt; Type'' Term Term
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">I.unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154496"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Type'' Term Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmType"><span class="hs-identifier hs-var">fmType</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154497"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Abs a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unAbs"><span class="hs-identifier hs-var">I.unAbs</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154495"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-439"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154494"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154494"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-440"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154493"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154493"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span> </span><span id="local-6989586621681154492"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154492"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154492"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154493"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-441"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span id="local-6989586621681154491"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154491"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#DontCare"><span class="hs-identifier hs-type">I.DontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-442"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Dummy"><span class="hs-identifier hs-type">I.Dummy</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-type">fmExps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Args"><span class="hs-identifier hs-type">I.Args</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-445"></span><span id="fmExps"><span class="annot"><span class="annottext">fmExps :: MetaId -&gt; [Arg Term] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExps"><span class="hs-identifier hs-var hs-var">fmExps</span></a></span></span><span> </span><span id="local-6989586621681154490"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154490"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681154489"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154489"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Bool) -&gt; [Arg Term] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154490"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Bool) -&gt; (Arg Term -&gt; Term) -&gt; Arg Term -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">Cm.unArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681154489"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="annot"><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-type">fmLevel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PlusLevel"><span class="hs-identifier hs-type">I.PlusLevel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-448"></span><span id="fmLevel"><span class="annot"><span class="annottext">fmLevel :: MetaId -&gt; PlusLevel' Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmLevel"><span class="hs-identifier hs-var hs-var">fmLevel</span></a></span></span><span> </span><span id="local-6989586621681154487"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154487"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Plus"><span class="hs-identifier hs-type">I.Plus</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154485"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154485"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Term -&gt; Bool
</span><a href="Agda.Auto.Convert.html#fmExp"><span class="hs-identifier hs-var">fmExp</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154487"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154485"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-451"></span><span>
</span><span id="line-452"></span><span class="annot"><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-type">icnvh</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ArgInfo"><span class="hs-identifier hs-type">Cm.ArgInfo</span></a></span><span>
</span><span id="line-453"></span><span id="icnvh"><span class="annot"><span class="annottext">icnvh :: Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var hs-var">icnvh</span></a></span></span><span> </span><span id="local-6989586621681154483"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154483"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo -&gt; ArgInfo
forall a. LensHiding a =&gt; Hiding -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setHiding"><span class="hs-identifier hs-var">Cm.setHiding</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154483"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo) -&gt; ArgInfo -&gt; ArgInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-454"></span><span>          </span><span class="annot"><span class="annottext">Origin -&gt; ArgInfo -&gt; ArgInfo
forall a. LensOrigin a =&gt; Origin -&gt; a -&gt; a
</span><a href="Agda.Syntax.Common.html#setOrigin"><span class="hs-identifier hs-var">Cm.setOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="#local-6989586621681154480"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; ArgInfo) -&gt; ArgInfo -&gt; ArgInfo
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-455"></span><span>          </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="Agda.Syntax.Common.html#defaultArgInfo"><span class="hs-identifier hs-var">Cm.defaultArgInfo</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>    </span><span class="hs-comment">-- Andreas, 2017-01-18, issue #819.</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-comment">-- Visible arguments are made UserWritten,</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-comment">-- otherwise they might not be printed in patterns.</span><span>
</span><span id="line-460"></span><span>    </span><span id="local-6989586621681154480"><span class="annot"><span class="annottext">o :: Origin
</span><a href="#local-6989586621681154480"><span class="hs-identifier hs-var hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154483"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-461"></span><span>          </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#UserWritten"><span class="hs-identifier hs-var">Cm.UserWritten</span></a></span><span>
</span><span id="line-462"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Common.html#Instance"><span class="hs-identifier hs-type">Instance</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Cm.Inserted</span></a></span><span>
</span><span id="line-463"></span><span>          </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Origin
</span><a href="Agda.Syntax.Common.html#Inserted"><span class="hs-identifier hs-var">Cm.Inserted</span></a></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span class="hs-comment">-- ---------------------------------------------</span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681156088"><span id="local-6989586621681156089"><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156089"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156088"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#MM"><span class="hs-identifier hs-type">MM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681156089"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#RefInfo"><span class="hs-identifier hs-type">RefInfo</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681156088"><span class="hs-identifier hs-type">b</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-468"></span><span>  </span><span id="local-6989586621681154464"><span class="annot"><span class="annottext">convert :: MM a (RefInfo O) -&gt; MOT b
</span><a href="#local-6989586621681154464"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154463"><span class="annot"><span class="annottext">MM a (RefInfo O)
</span><a href="#local-6989586621681154463"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MM a (RefInfo O)
</span><a href="#local-6989586621681154463"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-469"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621681154462"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154462"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; MOT b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154462"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-470"></span><span>    </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621681154461"><span class="annot"><span class="annottext">Metavar a (RefInfo O)
</span><a href="#local-6989586621681154461"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-471"></span><span>      </span><span id="local-6989586621681154460"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621681154460"><span class="hs-identifier hs-var">ma</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe a) -&gt; ExceptT String IO (Maybe a)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe a) -&gt; ExceptT String IO (Maybe a))
-&gt; IO (Maybe a) -&gt; ExceptT String IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe a) -&gt; IO (Maybe a)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (Maybe a) -&gt; IO (Maybe a))
-&gt; IORef (Maybe a) -&gt; IO (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar a (RefInfo O) -&gt; IORef (Maybe a)
forall a blk. Metavar a blk -&gt; IORef (Maybe a)
</span><a href="Agda.Auto.NarrowingSearch.html#mbind"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar a (RefInfo O)
</span><a href="#local-6989586621681154461"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-472"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621681154460"><span class="hs-identifier hs-var">ma</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-473"></span><span>        </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; MOT b
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-474"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154457"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154457"><span class="hs-identifier hs-var">a</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; MOT b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154457"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681155842"><span id="local-6989586621681155843"><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155843"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155842"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155843"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155842"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-477"></span><span>  </span><span id="local-6989586621681154450"><span class="annot"><span class="annottext">convert :: Abs a -&gt; MOT (Abs b)
</span><a href="#local-6989586621681154450"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621681154449"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154449"><span class="hs-identifier hs-var">mid</span></a></span></span><span> </span><span id="local-6989586621681154448"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154448"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; b -&gt; Abs b
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154447"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">(b -&gt; Abs b) -&gt; ExceptT String IO b -&gt; MOT (Abs b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; ExceptT String IO b
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154448"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-478"></span><span>    </span><span id="local-6989586621681154447"><span class="annot"><span class="annottext">id :: String
</span><a href="#local-6989586621681154447"><span class="hs-identifier hs-var hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154449"><span class="hs-identifier hs-var">mid</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-479"></span><span>           </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;x&quot;</span></span><span>
</span><span id="line-480"></span><span>           </span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621681154445"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154445"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154445"><span class="hs-identifier hs-var">id</span></a></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-483"></span><span>  </span><span id="local-6989586621681154441"><span class="annot"><span class="annottext">convert :: Exp O -&gt; MOT (Type'' Term Term)
</span><a href="#local-6989586621681154441"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span id="local-6989586621681154440"><span class="annot"><span class="annottext">Exp O
</span><a href="#local-6989586621681154440"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term -&gt; Type'' Term Term
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">I.El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type'' Term Term)
-&gt; ExceptT String IO Term -&gt; MOT (Type'' Term Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Exp O
</span><a href="#local-6989586621681154440"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-484"></span><span>              </span><span class="hs-comment">-- 0 is arbitrary, sort not read by Agda when reifying</span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Conversion"><span class="hs-identifier hs-type">Conversion</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Exp"><span class="hs-identifier hs-type">Exp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-487"></span><span>  </span><span id="local-6989586621681154419"><span class="annot"><span class="annottext">convert :: Exp O -&gt; ExceptT String IO Term
</span><a href="#local-6989586621681154419"><span class="hs-identifier hs-var hs-var hs-var hs-var">convert</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-488"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681154418"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154418"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154417"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154417"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154417"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154418"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo O)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-type">Const</span></a></span><span> </span><span id="local-6989586621681154415"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154415"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154414"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154414"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-490"></span><span>      </span><span id="local-6989586621681154413"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154413"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154415"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-491"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154412"><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621681154412"><span class="hs-identifier hs-var">iscon</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154411"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154411"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154413"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-492"></span><span class="hs-comment">{-
   case iscon of
      Just n -&gt; do
        v &lt;- getConTerm name -- We are not in TCM
        frommyExps n as v
-}</span><span>
</span><span id="line-498"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681154410"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154410"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154409"><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="#local-6989586621681154409"><span class="hs-identifier hs-var">h</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><a href="#local-6989586621681154412"><span class="hs-identifier hs-var">iscon</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-499"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154408"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154408"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681154407"><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681154407"><span class="hs-identifier hs-var">fs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154408"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154406"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154406"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">I.Con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; DataOrRecord -&gt; Induction -&gt; [Arg QName] -&gt; ConHead
</span><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-var">I.ConHead</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154406"><span class="hs-identifier hs-var">q</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">I.IsData</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Cm.Inductive</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681154407"><span class="hs-identifier hs-var">fs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="Agda.Syntax.Common.html#ConOSystem"><span class="hs-identifier hs-var">Cm.ConOSystem</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>                         </span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681154401"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154401"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681154400"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154400"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154401"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154400"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-501"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154410"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154414"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="#local-6989586621681154409"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154411"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span id="local-6989586621681154399"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154399"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621681154398"><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621681154398"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">I.Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154399"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term)
-&gt; ExceptT String IO (Abs Term) -&gt; ExceptT String IO Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O) -&gt; ExceptT String IO (Abs Term)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621681154398"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-503"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154397"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154397"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154396"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154396"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681154395"><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621681154395"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-504"></span><span>      </span><span id="local-6989586621681154394"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154394"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; MOT (Type'' Term Term)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154396"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-505"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154393"><span class="annot"><span class="annottext">dom :: Dom (Type'' Term Term)
</span><a href="#local-6989586621681154393"><span class="hs-identifier hs-var hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type'' Term Term -&gt; Dom (Type'' Term Term)
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">I.defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154394"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154397"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-506"></span><span>      </span><span class="annot"><span class="annottext">Dom (Type'' Term Term) -&gt; Abs (Type'' Term Term) -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-var">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><a href="#local-6989586621681154393"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="annot"><span class="annottext">(Abs (Type'' Term Term) -&gt; Term)
-&gt; ExceptT String IO (Abs (Type'' Term Term))
-&gt; ExceptT String IO Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O) -&gt; ExceptT String IO (Abs (Type'' Term Term))
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (MExp O)
</span><a href="#local-6989586621681154395"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-507"></span><span>   </span><span class="hs-comment">-- maybe have case for Pi where possdep is False which produces Fun (and has to unweaken y), return $ I.Fun (Cm.Arg (icnvh hid) x') y'</span><span>
</span><span id="line-508"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span id="local-6989586621681154391"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154391"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT String IO Term) -&gt; Term -&gt; ExceptT String IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-var">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154391"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-509"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#Type"><span class="hs-identifier hs-var">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-510"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Auto.Syntax.html#UnknownSort"><span class="hs-identifier hs-var">UnknownSort</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT String IO Term) -&gt; Term -&gt; ExceptT String IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort' Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-var">I.Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort' Term
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">I.mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- hoping it's thrown away</span><span>
</span><span id="line-511"></span><span>
</span><span id="line-512"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span> </span><span id="local-6989586621681154388"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154388"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; ExceptT String IO Term) -&gt; Term -&gt; ExceptT String IO Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Abs Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-var">I.Lam</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154388"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-513"></span><span>                               </span><span class="annot"><span class="annottext">(Abs Term -&gt; Term) -&gt; Abs Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Term -&gt; Abs Term
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var">abslamvarname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>
</span><span id="line-515"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-type">frommyExps</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MArgList"><span class="hs-identifier hs-type">MArgList</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span>
</span><span id="line-516"></span><span id="frommyExps"><span class="annot"><span class="annottext">frommyExps :: Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var hs-var">frommyExps</span></a></span></span><span> </span><span id="local-6989586621681154385"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154385"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span> </span><span id="local-6989586621681154384"><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O)
</span><a href="#local-6989586621681154384"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154383"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154383"><span class="hs-identifier hs-var">trm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-517"></span><span> </span><span id="local-6989586621681154382"><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><a href="#local-6989586621681154382"><span class="hs-identifier hs-var">bind</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe (ArgList O)) -&gt; ExceptT String IO (Maybe (ArgList O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe (ArgList O)) -&gt; ExceptT String IO (Maybe (ArgList O)))
-&gt; IO (Maybe (ArgList O)) -&gt; ExceptT String IO (Maybe (ArgList O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O))
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O)))
-&gt; IORef (Maybe (ArgList O)) -&gt; IO (Maybe (ArgList O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O) -&gt; IORef (Maybe (ArgList O))
forall a blk. Metavar a blk -&gt; IORef (Maybe a)
</span><a href="Agda.Auto.NarrowingSearch.html#mbind"><span class="hs-identifier hs-var">mbind</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (ArgList O) (RefInfo O)
</span><a href="#local-6989586621681154384"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-518"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><a href="#local-6989586621681154382"><span class="hs-identifier hs-var">bind</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-519"></span><span>  </span><span class="annot"><span class="annottext">Maybe (ArgList O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ExceptT String IO Term
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-520"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154381"><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621681154381"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154385"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621681154381"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154383"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-521"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span id="local-6989586621681154380"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621681154379"><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621681154379"><span class="hs-keyword hs-var">as</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154378"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-522"></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ArgList O
</span><a href="#local-6989586621681154379"><span class="hs-keyword hs-var">as</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-523"></span><span>  </span><span class="annot"><span class="annottext">ArgList O
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-524"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154377"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154377"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154377"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span id="local-6989586621681154375"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154375"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621681154374"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154374"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681154373"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154373"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-526"></span><span>   </span><span id="local-6989586621681154372"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154372"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154374"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-527"></span><span>   </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154373"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681154371"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154375"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154372"><span class="hs-identifier hs-var">x'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-comment">-- Andreas, 2013-10-19 TODO: restore postfix projections</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span> </span><span id="local-6989586621681154369"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154369"><span class="hs-identifier hs-var">eas</span></a></span></span><span> </span><span id="local-6989586621681154368"><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621681154368"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span id="local-6989586621681154367"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154367"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621681154366"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154366"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-531"></span><span>   </span><span id="local-6989586621681154365"><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621681154365"><span class="hs-identifier hs-var">idx</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MM (ConstRef O) (RefInfo O))
-&gt; ExceptT String IO (MM (ConstRef O) (RefInfo O))
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (MM (ConstRef O) (RefInfo O))
 -&gt; ExceptT String IO (MM (ConstRef O) (RefInfo O)))
-&gt; IO (MM (ConstRef O) (RefInfo O))
-&gt; ExceptT String IO (MM (ConstRef O) (RefInfo O))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O) -&gt; IO (MM (ConstRef O) (RefInfo O))
forall a blk. MM a blk -&gt; MetaEnv (MM a blk)
</span><a href="Agda.Auto.NarrowingSearch.html#expandbind"><span class="hs-identifier hs-var">expandbind</span></a></span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621681154368"><span class="hs-identifier hs-var">idx</span></a></span><span>
</span><span id="line-532"></span><span>   </span><span id="local-6989586621681154363"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154363"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MM (ConstRef O) (RefInfo O)
</span><a href="#local-6989586621681154365"><span class="hs-identifier hs-var">idx</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-533"></span><span>            </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621681154362"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154362"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; ExceptT String IO (ConstRef O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154362"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-534"></span><span>            </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; ExceptT String IO (ConstRef O)
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;meta not bound&quot;</span></span><span>
</span><span id="line-535"></span><span>   </span><span id="local-6989586621681154361"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154361"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154363"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-536"></span><span>   </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154360"><span class="annot"><span class="annottext">name :: QName
</span><a href="#local-6989586621681154360"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; QName
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; QName) -&gt; O -&gt; QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154361"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-537"></span><span>   </span><span id="local-6989586621681154359"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154359"><span class="hs-identifier hs-var">trm2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154369"><span class="hs-identifier hs-var">eas</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154360"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>   </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154366"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681154371"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154367"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154359"><span class="hs-identifier hs-var">trm2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621681154358"><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154358"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList O -&gt; Term -&gt; ExceptT String IO Term
</span><a href="Agda.Auto.Convert.html#frommyExps"><span class="hs-identifier hs-var">frommyExps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154380"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><a href="#local-6989586621681154358"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154378"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-541"></span><span>  </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-542"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-543"></span><span>  </span><span id="local-6989586621681154371"><span class="annot"><span class="annottext">addend :: Arg Term -&gt; Term -&gt; Term
</span><a href="#local-6989586621681154371"><span class="hs-identifier hs-var hs-var">addend</span></a></span></span><span> </span><span id="local-6989586621681154355"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154355"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154354"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154354"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681154353"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154353"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">I.Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154354"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154353"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154355"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>  </span><span class="annot"><a href="#local-6989586621681154371"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span id="local-6989586621681154352"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154352"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621681154351"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154351"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681154350"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681154350"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621681154349"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154349"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">I.Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154351"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681154350"><span class="hs-identifier hs-var">ci</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154349"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154352"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>  </span><span class="annot"><a href="#local-6989586621681154371"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span id="local-6989586621681154348"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154348"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621681154347"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154347"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681154346"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154346"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">I.Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154347"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154346"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Elims -&gt; Elims
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">I.Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681154348"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>  </span><span class="annot"><a href="#local-6989586621681154371"><span class="hs-identifier hs-var">addend</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-547"></span><span>
</span><span id="line-548"></span><span class="hs-comment">-- --------------------------------</span><span>
</span><span id="line-549"></span><span>
</span><span id="line-550"></span><span class="annot"><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-type">abslamvarname</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-551"></span><span id="abslamvarname"><span class="annot"><span class="annottext">abslamvarname :: String
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var hs-var">abslamvarname</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\0absurdlambda&quot;</span></span><span>
</span><span id="line-552"></span><span>
</span><span id="line-553"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-type">modifyAbstractExpr</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span>
</span><span id="line-554"></span><span id="modifyAbstractExpr"><span class="annot"><span class="annottext">modifyAbstractExpr :: Expr -&gt; Expr
</span><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-var hs-var">modifyAbstractExpr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-555"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-556"></span><span>  </span><span id="local-6989586621681154344"><span class="annot"><span class="annottext">f :: Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-type">A.App</span></a></span><span> </span><span id="local-6989586621681154334"><span class="annot"><span class="annottext">AppInfo
</span><a href="#local-6989586621681154334"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154333"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154333"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681154332"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154332"><span class="hs-identifier hs-var">info</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-type">Cm.Named</span></a></span><span> </span><span id="local-6989586621681154330"><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621681154330"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154329"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154329"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-557"></span><span>        </span><span class="annot"><span class="annottext">AppInfo -&gt; Expr -&gt; Arg (Named_ Expr) -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#App"><span class="hs-identifier hs-var">A.App</span></a></span><span> </span><span class="annot"><span class="annottext">AppInfo
</span><a href="#local-6989586621681154334"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154333"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgInfo -&gt; Named_ Expr -&gt; Arg (Named_ Expr)
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154332"><span class="hs-identifier hs-var">info</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe NamedName -&gt; Expr -&gt; Named_ Expr
forall name a. Maybe name -&gt; a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#Named"><span class="hs-identifier hs-var">Cm.Named</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe NamedName
</span><a href="#local-6989586621681154330"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154329"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-type">A.Lam</span></a></span><span> </span><span id="local-6989586621681154327"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154327"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#DomainFree"><span class="hs-identifier hs-type">A.DomainFree</span></a></span><span> </span><span class="annot"><span class="annottext">TacticAttr
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154325"><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621681154325"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Expr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Binder"><span class="hs-identifier hs-type">A.Binder</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Pattern
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#BindName"><span class="hs-identifier hs-type">A.BindName</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">unBind :: BindName -&gt; Name
</span><a href="Agda.Syntax.Abstract.html#unBind"><span class="hs-identifier hs-var">unBind</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154321"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681154321"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NamedArg Binder -&gt; Binder
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">Cm.namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621681154325"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-560"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
forall a. Pretty a =&gt; a -&gt; String
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name
</span><a href="Agda.Syntax.Abstract.Name.html#nameConcrete"><span class="hs-identifier hs-var">A.nameConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681154321"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Agda.Auto.Convert.html#abslamvarname"><span class="hs-identifier hs-var">abslamvarname</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-561"></span><span>        </span><span class="annot"><span class="annottext">ExprInfo -&gt; Hiding -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#AbsurdLam"><span class="hs-identifier hs-var">A.AbsurdLam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154327"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Hiding -&gt; Expr) -&gt; Hiding -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">Cm.getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg Binder
</span><a href="#local-6989586621681154325"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-type">A.Lam</span></a></span><span> </span><span id="local-6989586621681154317"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154317"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154316"><span class="annot"><span class="annottext">LamBinding
</span><a href="#local-6989586621681154316"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681154315"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154315"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; LamBinding -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Lam"><span class="hs-identifier hs-var">A.Lam</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154317"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">LamBinding
</span><a href="#local-6989586621681154316"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154315"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-563"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Rec"><span class="hs-identifier hs-type">A.Rec</span></a></span><span> </span><span id="local-6989586621681154313"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154313"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154312"><span class="annot"><span class="annottext">RecordAssigns
</span><a href="#local-6989586621681154312"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; RecordAssigns -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#Rec"><span class="hs-identifier hs-var">A.Rec</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154313"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either Assign ModuleName -&gt; Either Assign ModuleName)
-&gt; RecordAssigns -&gt; RecordAssigns
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Assign -&gt; Assign)
-&gt; Either Assign ModuleName -&gt; Either Assign ModuleName
forall a c b. (a -&gt; c) -&gt; Either a b -&gt; Either c b
</span><a href="Agda.Utils.Either.html#mapLeft"><span class="hs-identifier hs-var">mapLeft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Expr Assign -&gt; LensMap Expr Assign
forall i o. Lens' i o -&gt; LensMap i o
</span><a href="Agda.Utils.Lens.html#over"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Lens' a (FieldAssignment' a)
Lens' Expr Assign
</span><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier hs-var">exprFieldA</span></a></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RecordAssigns
</span><a href="#local-6989586621681154312"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#RecUpdate"><span class="hs-identifier hs-type">A.RecUpdate</span></a></span><span> </span><span id="local-6989586621681154306"><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154306"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154305"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154305"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681154304"><span class="annot"><span class="annottext">Assigns
</span><a href="#local-6989586621681154304"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExprInfo -&gt; Expr -&gt; Assigns -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#RecUpdate"><span class="hs-identifier hs-var">A.RecUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">ExprInfo
</span><a href="#local-6989586621681154306"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154305"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Assign -&gt; Assign) -&gt; Assigns -&gt; Assigns
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' Expr Assign -&gt; LensMap Expr Assign
forall i o. Lens' i o -&gt; LensMap i o
</span><a href="Agda.Utils.Lens.html#over"><span class="hs-identifier hs-var">over</span></a></span><span> </span><span class="annot"><span class="annottext">forall a. Lens' a (FieldAssignment' a)
Lens' Expr Assign
</span><a href="Agda.Syntax.Concrete.html#exprFieldA"><span class="hs-identifier hs-var">exprFieldA</span></a></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Assigns
</span><a href="#local-6989586621681154304"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-565"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#ScopedExpr"><span class="hs-identifier hs-type">A.ScopedExpr</span></a></span><span> </span><span id="local-6989586621681154300"><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681154300"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681154299"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154299"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; Expr -&gt; Expr
</span><a href="Agda.Syntax.Abstract.html#ScopedExpr"><span class="hs-identifier hs-var">A.ScopedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681154300"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154299"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><a href="#local-6989586621681154344"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span id="local-6989586621681154298"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154298"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154298"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-567"></span><span>
</span><span id="line-568"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-type">modifyAbstractClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span>
</span><span id="line-569"></span><span id="modifyAbstractClause"><span class="annot"><span class="annottext">modifyAbstractClause :: Clause -&gt; Clause
</span><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-var hs-var">modifyAbstractClause</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-type">A.Clause</span></a></span><span> </span><span id="local-6989586621681154295"><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621681154295"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681154294"><span class="annot"><span class="annottext">[ProblemEq]
</span><a href="#local-6989586621681154294"><span class="hs-identifier hs-var">spats</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#RHS"><span class="hs-identifier hs-type">A.RHS</span></a></span><span> </span><span id="local-6989586621681154292"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154292"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681154291"><span class="annot"><span class="annottext">Maybe Expr
</span><a href="#local-6989586621681154291"><span class="hs-identifier hs-var">mc</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154290"><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="#local-6989586621681154290"><span class="hs-identifier hs-var">decls</span></a></span></span><span> </span><span id="local-6989586621681154289"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154289"><span class="hs-identifier hs-var">catchall</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-570"></span><span>  </span><span class="annot"><span class="annottext">LHS -&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause
forall lhs.
lhs
-&gt; [ProblemEq] -&gt; RHS -&gt; WhereDeclarations -&gt; Bool -&gt; Clause' lhs
</span><a href="Agda.Syntax.Abstract.html#Clause"><span class="hs-identifier hs-var">A.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">LHS
</span><a href="#local-6989586621681154295"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">[ProblemEq]
</span><a href="#local-6989586621681154294"><span class="hs-identifier hs-var">spats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Maybe Expr -&gt; RHS
</span><a href="Agda.Syntax.Abstract.html#RHS"><span class="hs-identifier hs-var">A.RHS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-var">modifyAbstractExpr</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681154292"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Expr
</span><a href="#local-6989586621681154291"><span class="hs-identifier hs-var">mc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WhereDeclarations
</span><a href="#local-6989586621681154290"><span class="hs-identifier hs-var">decls</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154289"><span class="hs-identifier hs-var">catchall</span></a></span><span>
</span><span id="line-571"></span><span class="annot"><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-var">modifyAbstractClause</span></a></span><span> </span><span id="local-6989586621681154288"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154288"><span class="hs-identifier hs-var">cl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154288"><span class="hs-identifier hs-var">cl</span></a></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span>
</span><span id="line-576"></span><span class="annot"><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-type">constructPats</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#TMode"><span class="hs-identifier hs-type">TMode</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Hiding"><span class="hs-identifier hs-type">Hiding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MId"><span class="hs-identifier hs-type">MId</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span id="constructPats"><span class="annot"><span class="annottext">constructPats :: Map QName (TMode, ConstRef O)
-&gt; MetaId -&gt; Clause -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-var hs-var">constructPats</span></a></span></span><span> </span><span id="local-6989586621681154286"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154286"><span class="hs-identifier hs-var">cmap</span></a></span></span><span> </span><span id="local-6989586621681154285"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154285"><span class="hs-identifier hs-var">mainm</span></a></span></span><span> </span><span id="local-6989586621681154284"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154284"><span class="hs-identifier hs-var">clause</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-578"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154283"><span class="annot"><span class="annottext">cnvps :: [(Hiding, MId)]
-&gt; [NamedArg (Pattern' String)] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621681154283"><span class="hs-identifier hs-var hs-var">cnvps</span></a></span></span><span> </span><span id="local-6989586621681154282"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154282"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154282"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>     </span><span class="annot"><a href="#local-6989586621681154283"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621681154281"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154281"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154280"><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154280"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154279"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154279"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-580"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681154278"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154278"><span class="hs-identifier hs-var">ns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154277"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154277"><span class="hs-identifier hs-var">ps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg (Pattern' String)] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621681154283"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154281"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154279"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681154276"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154276"><span class="hs-identifier hs-var">ns''</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154275"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154275"><span class="hs-identifier hs-var">p'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; NamedArg (Pattern' String) -&gt; TCM ([(Hiding, MId)], CSPat O)
</span><a href="#local-6989586621681154274"><span class="hs-identifier hs-var">cnvp</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154278"><span class="hs-identifier hs-var">ns'</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154280"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-582"></span><span>      </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154276"><span class="hs-identifier hs-var">ns''</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154275"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; [CSPat O] -&gt; [CSPat O]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154277"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-583"></span><span>     </span><span id="local-6989586621681154274"><span class="annot"><span class="annottext">cnvp :: [(Hiding, MId)]
-&gt; NamedArg (Pattern' String) -&gt; TCM ([(Hiding, MId)], CSPat O)
</span><a href="#local-6989586621681154274"><span class="hs-identifier hs-var hs-var">cnvp</span></a></span></span><span> </span><span id="local-6989586621681154273"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span></span><span> </span><span id="local-6989586621681154272"><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154272"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-584"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154271"><span class="annot"><span class="annottext">hid :: Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var hs-var">hid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
forall a. LensHiding a =&gt; a -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#getHiding"><span class="hs-identifier hs-var">getHiding</span></a></span><span> </span><span class="annot"><span class="annottext">(ArgInfo -&gt; Hiding) -&gt; ArgInfo -&gt; Hiding
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String) -&gt; ArgInfo
forall e. Arg e -&gt; ArgInfo
</span><a href="Agda.Syntax.Common.html#argInfo"><span class="hs-identifier hs-var">Cm.argInfo</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154272"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-585"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String) -&gt; Pattern' String
forall a. NamedArg a -&gt; a
</span><a href="Agda.Syntax.Common.html#namedArg"><span class="hs-identifier hs-var">Cm.namedArg</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154272"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-586"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#VarP"><span class="hs-identifier hs-type">I.VarP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154269"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154269"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154269"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Hiding, MId) -&gt; [(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPatI O
forall o. Int -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-var">CSPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; CSPatI O) -&gt; Int -&gt; CSPatI O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#IApplyP"><span class="hs-identifier hs-type">I.IApplyP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154266"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154266"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154266"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Hiding, MId) -&gt; [(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPatI O
forall o. Int -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-var">CSPatVar</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; CSPatI O) -&gt; Int -&gt; CSPatI O
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-type">I.ConP</span></a></span><span> </span><span id="local-6989586621681154265"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154265"><span class="hs-identifier hs-var">con</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154264"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154264"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-589"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154263"><span class="annot"><span class="annottext">c :: QName
</span><a href="#local-6989586621681154263"><span class="hs-identifier hs-var hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">I.conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154265"><span class="hs-identifier hs-var">con</span></a></span><span>
</span><span id="line-590"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681154262"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154262"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">S
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) (ConstRef O) -&gt; S -&gt; TCM (ConstRef O, S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154263"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154286"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154285"><span class="hs-identifier hs-var">mainm</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-591"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681154261"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154261"><span class="hs-identifier hs-var">ns'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154260"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154260"><span class="hs-identifier hs-var">ps'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg (Pattern' String)] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621681154283"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154264"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-592"></span><span>        </span><span id="local-6989586621681154259"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154259"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154262"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-593"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154258"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154258"><span class="hs-identifier hs-var">npar</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O -&gt; Maybe (Int, [Arg QName])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(O -&gt; Maybe (Int, [Arg QName])) -&gt; O -&gt; Maybe (Int, [Arg QName])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154259"><span class="hs-identifier hs-var">cc</span></a></span><span>
</span><span id="line-594"></span><span>        </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154261"><span class="hs-identifier hs-var">ns'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; [CSPat O] -&gt; CSPatI O
forall o. ConstRef o -&gt; [CSPat o] -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-var">CSPatConApp</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154262"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; CSPat O -&gt; [CSPat O]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154258"><span class="hs-identifier hs-var">npar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#Hidden"><span class="hs-identifier hs-var">Hidden</span></a></span><span> </span><span class="annot"><span class="annottext">CSPatI O
forall o. CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-var">CSOmittedArg</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O] -&gt; [CSPat O] -&gt; [CSPat O]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154260"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#DotP"><span class="hs-identifier hs-type">I.DotP</span></a></span><span> </span><span class="annot"><span class="annottext">PatternInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154255"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154255"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-596"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681154254"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154254"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">S
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) (MExp O) -&gt; S -&gt; TCM (MExp O, S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; StateT S (TCMT IO) (MExp O)
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154255"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154286"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154285"><span class="hs-identifier hs-var">mainm</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>        </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MExp O -&gt; CSPatI O
forall o. MExp o -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-var">CSPatExp</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154254"><span class="hs-identifier hs-var">t2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#ProjP"><span class="hs-identifier hs-type">I.ProjP</span></a></span><span> </span><span id="local-6989586621681154252"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681154252"><span class="hs-identifier hs-var">po</span></a></span></span><span> </span><span id="local-6989586621681154251"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154251"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-599"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681154250"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154250"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">S
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT S (TCMT IO) (ConstRef O) -&gt; S -&gt; TCM (ConstRef O, S)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; TMode -&gt; StateT S (TCMT IO) (ConstRef O)
</span><a href="Agda.Auto.Convert.html#getConst"><span class="hs-identifier hs-var">getConst</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154251"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">TMode
</span><a href="Agda.Auto.Convert.html#TMAll"><span class="hs-identifier hs-var">TMAll</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Convert.html#S"><span class="hs-identifier hs-type">S</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">sConsts :: MapS QName (TMode, ConstRef O)
</span><a href="Agda.Auto.Convert.html#sConsts"><span class="hs-identifier hs-var">sConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681154286"><span class="hs-identifier hs-var">cmap</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMetas :: MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
</span><a href="Agda.Auto.Convert.html#sMetas"><span class="hs-identifier hs-var">sMetas</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS
  MetaId
  (Metavar (Exp O) (RefInfo O), Maybe (MExp O, [MExp O]), [MetaId])
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sEqs :: MapS Int (Maybe (Bool, MExp O, MExp O))
</span><a href="Agda.Auto.Convert.html#sEqs"><span class="hs-identifier hs-var">sEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MapS Int (Maybe (Bool, MExp O, MExp O))
forall a b. MapS a b
</span><a href="Agda.Auto.Convert.html#initMapS"><span class="hs-identifier hs-var">initMapS</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sCurMeta :: Maybe MetaId
</span><a href="Agda.Auto.Convert.html#sCurMeta"><span class="hs-identifier hs-var">sCurMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetaId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">sMainMeta :: MetaId
</span><a href="Agda.Auto.Convert.html#sMainMeta"><span class="hs-identifier hs-var">sMainMeta</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681154285"><span class="hs-identifier hs-var">mainm</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>        </span><span id="local-6989586621681154249"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154249"><span class="hs-identifier hs-var">cc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; TCM (ConstDef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; TCM (ConstDef O))
-&gt; IO (ConstDef O) -&gt; TCM (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154250"><span class="hs-identifier hs-var">c2</span></a></span><span>
</span><span id="line-601"></span><span>        </span><span class="annot"><span class="annottext">([(Hiding, MId)], CSPat O) -&gt; TCM ([(Hiding, MId)], CSPat O)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154273"><span class="hs-identifier hs-var">ns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; CSPatI O -&gt; CSPat O
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154271"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; CSPatI O
forall o. ConstRef o -&gt; CSPatI o
</span><a href="Agda.Auto.CaseSplit.html#CSPatProj"><span class="hs-identifier hs-var">CSPatProj</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154250"><span class="hs-identifier hs-var">c2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-602"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#LitP"><span class="hs-identifier hs-type">I.LitP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM ([(Hiding, MId)], CSPat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#literalsNotImplemented"><span class="hs-identifier hs-var">literalsNotImplemented</span></a></span><span>
</span><span id="line-603"></span><span>       </span><span class="annot"><a href="Agda.Syntax.Internal.html#DefP"><span class="hs-identifier hs-type">I.DefP</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCM ([(Hiding, MId)], CSPat O)
forall a. TCM a
</span><a href="Agda.Auto.Convert.html#hitsNotImplemented"><span class="hs-identifier hs-var">hitsNotImplemented</span></a></span><span>
</span><span id="line-604"></span><span>
</span><span id="line-605"></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154247"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154247"><span class="hs-identifier hs-var">names</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154246"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154246"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
-&gt; [NamedArg (Pattern' String)] -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="#local-6989586621681154283"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NAPs -&gt; [NamedArg (Pattern' String)]
forall a b. LabelPatVars a b =&gt; b -&gt; a
</span><a href="Agda.Syntax.Internal.Pattern.html#unnumberPatVars"><span class="hs-identifier hs-var">IP.unnumberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">(NAPs -&gt; [NamedArg (Pattern' String)])
-&gt; NAPs -&gt; [NamedArg (Pattern' String)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">I.namedClausePats</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154284"><span class="hs-identifier hs-var">clause</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-606"></span><span> </span><span class="annot"><span class="annottext">([(Hiding, MId)], [CSPat O]) -&gt; TCM ([(Hiding, MId)], [CSPat O])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)] -&gt; [(Hiding, MId)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681154247"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154246"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span>
</span><span id="line-609"></span><span class="annot"><a href="Agda.Auto.Convert.html#frommyClause"><span class="hs-identifier hs-type">frommyClause</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSCtx"><span class="hs-identifier hs-type">CSCtx</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span>
</span><span id="line-610"></span><span id="frommyClause"><span class="annot"><span class="annottext">frommyClause :: (CSCtx O, [CSPat O], Maybe (MExp O)) -&gt; ExceptT String IO Clause
</span><a href="Agda.Auto.Convert.html#frommyClause"><span class="hs-identifier hs-var hs-var">frommyClause</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154243"><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621681154243"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154242"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154242"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154241"><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621681154241"><span class="hs-identifier hs-var">mrhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-611"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154233"><span class="annot"><span class="annottext">ctel :: [HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621681154233"><span class="hs-identifier hs-var hs-var">ctel</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e)
forall a. Tele a
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">I.EmptyTel</span></a></span><span>
</span><span id="line-612"></span><span>     </span><span class="annot"><a href="#local-6989586621681154233"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span id="local-6989586621681154232"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154232"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154231"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154231"><span class="hs-identifier hs-var">mid</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154230"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154230"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154229"><span class="annot"><span class="annottext">[HI (MId, a)]
</span><a href="#local-6989586621681154229"><span class="hs-identifier hs-var">ctx</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-613"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621681154228"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154228"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154231"><span class="hs-identifier hs-var">mid</span></a></span><span>
</span><span id="line-614"></span><span>      </span><span id="local-6989586621681154227"><span class="annot"><span class="annottext">Tele (Dom' Term e)
</span><a href="#local-6989586621681154227"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621681154233"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="annot"><span class="annottext">[HI (MId, a)]
</span><a href="#local-6989586621681154229"><span class="hs-identifier hs-var">ctx</span></a></span><span>
</span><span id="line-615"></span><span>      </span><span id="local-6989586621681154226"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681154226"><span class="hs-identifier hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">a -&gt; m e
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154230"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-616"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154225"><span class="annot"><span class="annottext">dom :: Dom' Term e
</span><a href="#local-6989586621681154225"><span class="hs-identifier hs-var hs-var">dom</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Dom' Term e
forall a. a -&gt; Dom a
</span><a href="Agda.Syntax.Internal.html#defaultDom"><span class="hs-identifier hs-var">I.defaultDom</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621681154226"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154232"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-617"></span><span>      </span><span class="annot"><span class="annottext">Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e)))
-&gt; Tele (Dom' Term e) -&gt; m (Tele (Dom' Term e))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom' Term e -&gt; Abs (Tele (Dom' Term e)) -&gt; Tele (Dom' Term e)
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">I.ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom' Term e
</span><a href="#local-6989586621681154225"><span class="hs-identifier hs-var">dom</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Tele (Dom' Term e) -&gt; Abs (Tele (Dom' Term e))
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154228"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="annot"><span class="annottext">Tele (Dom' Term e)
</span><a href="#local-6989586621681154227"><span class="hs-identifier hs-var">tel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span> </span><span id="local-6989586621681154224"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681154224"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; ExceptT String IO Telescope
forall {m :: * -&gt; *} {a} {e}.
(Monad m, Conversion m a e) =&gt;
[HI (MId, a)] -&gt; m (Tele (Dom' Term e))
</span><a href="#local-6989586621681154233"><span class="hs-identifier hs-var">ctel</span></a></span><span> </span><span class="annot"><span class="annottext">(CSCtx O -&gt; ExceptT String IO Telescope)
-&gt; CSCtx O -&gt; ExceptT String IO Telescope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; CSCtx O
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621681154243"><span class="hs-identifier hs-var">ids</span></a></span><span>
</span><span id="line-619"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154223"><span class="annot"><span class="annottext">getperms :: Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var hs-var">getperms</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681154222"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154222"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621681154221"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154221"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT String IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154222"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154221"><span class="hs-identifier hs-var">nv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>     </span><span class="annot"><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621681154220"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154220"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-621"></span><span>     </span><span class="annot"><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154219"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154219"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154218"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154218"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154217"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154217"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621681154216"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154216"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-622"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621681154215"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154215"><span class="hs-identifier hs-var">perm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154214"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154214"><span class="hs-identifier hs-var">nv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSPat O
-&gt; [(Int, Int)] -&gt; Int -&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154213"><span class="hs-identifier hs-var">getperm</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154219"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154217"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154216"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-623"></span><span>      </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154218"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154215"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154214"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-624"></span><span>     </span><span class="annot"><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621681154212"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154212"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154211"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154211"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154210"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154210"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621681154209"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154209"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154212"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154211"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154210"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154209"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-625"></span><span>     </span><span class="annot"><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621681154208"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154208"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-type">CSOmittedArg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154207"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154207"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154206"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154206"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621681154205"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154205"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154208"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154207"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154206"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154205"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-626"></span><span>     </span><span class="annot"><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span id="local-6989586621681154204"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154204"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSPat O
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-627"></span><span>     </span><span id="local-6989586621681154213"><span class="annot"><span class="annottext">getperm :: CSPat O
-&gt; [(Int, Int)] -&gt; Int -&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154213"><span class="hs-identifier hs-var hs-var">getperm</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154203"><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621681154203"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681154202"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154202"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span id="local-6989586621681154201"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154201"><span class="hs-identifier hs-var">nv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-628"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621681154203"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-629"></span><span>       </span><span class="hs-comment">--CSPatVar v -&gt; return (length ids + nv - 1 - v : perm, nv)</span><span>
</span><span id="line-630"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-type">CSPatVar</span></a></span><span> </span><span id="local-6989586621681154200"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154200"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT String IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSCtx O -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621681154243"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154200"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154201"><span class="hs-identifier hs-var">nv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; [(Int, Int)] -&gt; [(Int, Int)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154202"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154201"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span> </span><span id="local-6989586621681154199"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154199"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681154198"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154198"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-632"></span><span>        </span><span id="local-6989586621681154197"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154197"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154199"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-633"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154196"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154196"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154197"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-634"></span><span>        </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154196"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154198"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154202"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154201"><span class="hs-identifier hs-var">nv</span></a></span><span>
</span><span id="line-635"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span> </span><span id="local-6989586621681154195"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154195"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(Int, Int)], Int) -&gt; ExceptT String IO ([(Int, Int)], Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154202"><span class="hs-identifier hs-var">perm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154201"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO ([(Int, Int)], Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-637"></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154194"><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154194"><span class="hs-identifier hs-var">rperm</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154193"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154193"><span class="hs-identifier hs-var">nv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [CSPat O]
-&gt; [(Int, Int)]
-&gt; Int
-&gt; ExceptT String IO ([(Int, Int)], Int)
</span><a href="#local-6989586621681154223"><span class="hs-identifier hs-var">getperms</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154242"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-638"></span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">--perm = reverse rperm</span><span>
</span><span id="line-639"></span><span>     </span><span id="local-6989586621681154192"><span class="annot"><span class="annottext">perm :: [Int]
</span><a href="#local-6989586621681154192"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Int) -&gt; [Int] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154191"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154191"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154190"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154190"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [(Int, Int)] -&gt; Maybe Int
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154191"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[(Int, Int)]
</span><a href="#local-6989586621681154194"><span class="hs-identifier hs-var">rperm</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154190"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">CSCtx O -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621681154243"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-640"></span><span>     </span><span class="hs-comment">--renperm = map (\i -&gt; length ids + nv - 1 - i) rperm</span><span>
</span><span id="line-641"></span><span>     </span><span class="hs-comment">--renm = rename (\i -&gt; renperm !! i)</span><span>
</span><span id="line-642"></span><span>     </span><span id="local-6989586621681154188"><span class="annot"><span class="annottext">cnvps :: Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var hs-var">cnvps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
-&gt; ExceptT String IO [NamedArg (Pattern' String)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-643"></span><span>     </span><span class="annot"><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621681154187"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154187"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO [NamedArg (Pattern' String)]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-644"></span><span>     </span><span class="annot"><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154186"><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154186"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154185"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154185"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-645"></span><span>      </span><span id="local-6989586621681154184"><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154184"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; ExceptT String IO (NamedArg (Pattern' String))
</span><a href="#local-6989586621681154183"><span class="hs-identifier hs-var">cnvp</span></a></span><span> </span><span class="annot"><span class="annottext">CSPat O
</span><a href="#local-6989586621681154186"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-646"></span><span>      </span><span id="local-6989586621681154182"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154182"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154185"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-647"></span><span>      </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
-&gt; ExceptT String IO [NamedArg (Pattern' String)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
</span><a href="#local-6989586621681154184"><span class="hs-identifier hs-var">p'</span></a></span><span> </span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
-&gt; [NamedArg (Pattern' String)] -&gt; [NamedArg (Pattern' String)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154182"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-648"></span><span>     </span><span class="annot"><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621681154181"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154181"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154180"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154180"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154181"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154180"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-649"></span><span>     </span><span class="annot"><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621681154179"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154179"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSOmittedArg"><span class="hs-identifier hs-type">CSOmittedArg</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154178"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154178"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154179"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154178"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-650"></span><span>     </span><span class="annot"><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span id="local-6989586621681154177"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154177"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CSPat O
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO [NamedArg (Pattern' String)]
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-651"></span><span>     </span><span id="local-6989586621681154183"><span class="annot"><span class="annottext">cnvp :: CSPat O -&gt; ExceptT String IO (NamedArg (Pattern' String))
</span><a href="#local-6989586621681154183"><span class="hs-identifier hs-var hs-var">cnvp</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span id="local-6989586621681154176"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154176"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621681154175"><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621681154175"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-652"></span><span>      </span><span id="local-6989586621681154174"><span class="annot"><span class="annottext">Pattern' String
</span><a href="#local-6989586621681154174"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="#local-6989586621681154175"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-653"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatVar"><span class="hs-identifier hs-type">CSPatVar</span></a></span><span> </span><span id="local-6989586621681154173"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154173"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pattern' String -&gt; ExceptT String IO (Pattern' String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pattern' String
forall a. a -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#varP"><span class="hs-identifier hs-var">I.varP</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pattern' String) -&gt; String -&gt; Pattern' String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-type">Id</span></a></span><span> </span><span id="local-6989586621681154171"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154171"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MExp O
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CSCtx O
</span><a href="#local-6989586621681154243"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">CSCtx O -&gt; Int -&gt; HI (MId, MExp O)
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154173"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681154171"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span> </span><span id="local-6989586621681154170"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154170"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681154169"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154169"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-655"></span><span>        </span><span id="local-6989586621681154168"><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154168"><span class="hs-identifier hs-var">cdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O))
-&gt; IO (ConstDef O) -&gt; ExceptT String IO (ConstDef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; IO (ConstDef O)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681154170"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-656"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681154167"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154167"><span class="hs-identifier hs-var">ndrop</span></a></span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[Arg QName]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154166"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154166"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; O
forall o. ConstDef o -&gt; o
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="annot"><span class="annottext">ConstDef O
</span><a href="#local-6989586621681154168"><span class="hs-identifier hs-var">cdef</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span id="local-6989586621681154165"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154165"><span class="hs-identifier hs-var">ps'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154167"><span class="hs-identifier hs-var">ndrop</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154169"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-658"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154164"><span class="annot"><span class="annottext">con :: ConHead
</span><a href="#local-6989586621681154164"><span class="hs-identifier hs-var hs-var">con</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; DataOrRecord -&gt; Induction -&gt; [Arg QName] -&gt; ConHead
</span><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-var">I.ConHead</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154166"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">DataOrRecord
</span><a href="Agda.Syntax.Internal.html#IsData"><span class="hs-identifier hs-var">I.IsData</span></a></span><span> </span><span class="annot"><span class="annottext">Induction
</span><a href="Agda.Syntax.Common.html#Inductive"><span class="hs-identifier hs-var">Cm.Inductive</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- TODO: restore DataOrRecord and record fields!</span><span>
</span><span id="line-659"></span><span>        </span><span class="annot"><span class="annottext">Pattern' String -&gt; ExceptT String IO (Pattern' String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConHead
-&gt; ConPatternInfo
-&gt; [NamedArg (Pattern' String)]
-&gt; Pattern' String
forall x.
ConHead -&gt; ConPatternInfo -&gt; [NamedArg (Pattern' x)] -&gt; Pattern' x
</span><a href="Agda.Syntax.Internal.html#ConP"><span class="hs-identifier hs-var">I.ConP</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154164"><span class="hs-identifier hs-var">con</span></a></span><span> </span><span class="annot"><span class="annottext">ConPatternInfo
</span><a href="Agda.Syntax.Internal.html#noConPatternInfo"><span class="hs-identifier hs-var">I.noConPatternInfo</span></a></span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154165"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span>       </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatExp"><span class="hs-identifier hs-type">CSPatExp</span></a></span><span> </span><span id="local-6989586621681154162"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154162"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-661"></span><span>        </span><span id="local-6989586621681154161"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154161"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154162"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-comment">{- renm e -}</span><span> </span><span class="hs-comment">-- renaming before adding to clause below</span><span>
</span><span id="line-662"></span><span>        </span><span class="annot"><span class="annottext">Pattern' String -&gt; ExceptT String IO (Pattern' String)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Pattern' String
forall a. Term -&gt; Pattern' a
</span><a href="Agda.Syntax.Internal.html#dotP"><span class="hs-identifier hs-var">I.dotP</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154161"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-663"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><a href="Agda.Auto.CaseSplit.html#CSAbsurd"><span class="hs-identifier hs-var">CSAbsurd</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO (Pattern' String)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- CSAbsurd not used</span><span>
</span><span id="line-664"></span><span>       </span><span class="annot"><span class="annottext">CSPatI O
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ExceptT String IO (Pattern' String)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><span class="annottext">NamedArg (Pattern' String)
-&gt; ExceptT String IO (NamedArg (Pattern' String))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(NamedArg (Pattern' String)
 -&gt; ExceptT String IO (NamedArg (Pattern' String)))
-&gt; NamedArg (Pattern' String)
-&gt; ExceptT String IO (NamedArg (Pattern' String))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo
-&gt; Named NamedName (Pattern' String) -&gt; NamedArg (Pattern' String)
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Cm.Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Hiding -&gt; ArgInfo
</span><a href="Agda.Auto.Convert.html#icnvh"><span class="hs-identifier hs-var">icnvh</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154176"><span class="hs-identifier hs-var">hid</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Named NamedName (Pattern' String) -&gt; NamedArg (Pattern' String))
-&gt; Named NamedName (Pattern' String) -&gt; NamedArg (Pattern' String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pattern' String -&gt; Named NamedName (Pattern' String)
forall a name. a -&gt; Named name a
</span><a href="Agda.Syntax.Common.html#unnamed"><span class="hs-identifier hs-var">Cm.unnamed</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern' String
</span><a href="#local-6989586621681154174"><span class="hs-identifier hs-var">p'</span></a></span><span>   </span><span class="hs-comment">-- TODO: recover names</span><span>
</span><span id="line-666"></span><span> </span><span id="local-6989586621681154157"><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154157"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [CSPat O] -&gt; ExceptT String IO [NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154188"><span class="hs-identifier hs-var">cnvps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681154242"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-667"></span><span> </span><span id="local-6989586621681154156"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681154156"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><a href="#local-6989586621681154241"><span class="hs-identifier hs-var">mrhs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-668"></span><span>          </span><span class="annot"><span class="annottext">Maybe (MExp O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; ExceptT String IO (Maybe Term)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; ExceptT String IO (Maybe Term))
-&gt; Maybe Term -&gt; ExceptT String IO (Maybe Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-669"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154155"><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154155"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Maybe Term)
-&gt; ExceptT String IO Term -&gt; ExceptT String IO (Maybe Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MExp O -&gt; ExceptT String IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">MExp O
</span><a href="#local-6989586621681154155"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-670"></span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681154154"><span class="annot"><span class="annottext">cperm :: Permutation
</span><a href="#local-6989586621681154154"><span class="hs-identifier hs-var hs-var">cperm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">Int -&gt; [Int] -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier hs-var">Perm</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154193"><span class="hs-identifier hs-var">nv</span></a></span><span> </span><span class="annot"><span class="annottext">[Int]
</span><a href="#local-6989586621681154192"><span class="hs-identifier hs-var">perm</span></a></span><span>
</span><span id="line-671"></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; ExceptT String IO Clause
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span>
</span><span id="line-672"></span><span>   </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">clauseLHSRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseLHSRange"><span class="hs-identifier hs-var">I.clauseLHSRange</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">SP.noRange</span></a></span><span>
</span><span id="line-673"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseFullRange :: Range
</span><a href="Agda.Syntax.Internal.html#clauseFullRange"><span class="hs-identifier hs-var">I.clauseFullRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">SP.noRange</span></a></span><span>
</span><span id="line-674"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseTel :: Telescope
</span><a href="Agda.Syntax.Internal.html#clauseTel"><span class="hs-identifier hs-var">I.clauseTel</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681154224"><span class="hs-identifier hs-var">tel</span></a></span><span>
</span><span id="line-675"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">namedClausePats :: NAPs
</span><a href="Agda.Syntax.Internal.html#namedClausePats"><span class="hs-identifier hs-var">I.namedClausePats</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; [NamedArg (Pattern' String)] -&gt; NAPs
forall a b.
(LabelPatVars a b, PatVarLabel b ~ Int) =&gt;
Int -&gt; Permutation -&gt; a -&gt; b
</span><a href="Agda.Syntax.Internal.Pattern.html#numberPatVars"><span class="hs-identifier hs-var">IP.numberPatVars</span></a></span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681154154"><span class="hs-identifier hs-var">cperm</span></a></span><span> </span><span class="annot"><span class="annottext">([NamedArg (Pattern' String)] -&gt; NAPs)
-&gt; [NamedArg (Pattern' String)] -&gt; NAPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg [NamedArg (Pattern' String)])
-&gt; [NamedArg (Pattern' String)] -&gt; [NamedArg (Pattern' String)]
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Permutation
-&gt; Substitution' (SubstArg [NamedArg (Pattern' String)])
forall a. DeBruijn a =&gt; Permutation -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.html#renamingR"><span class="hs-identifier hs-var">renamingR</span></a></span><span> </span><span class="annot"><span class="annottext">(Permutation
 -&gt; Substitution' (SubstArg [NamedArg (Pattern' String)]))
-&gt; Permutation
-&gt; Substitution' (SubstArg [NamedArg (Pattern' String)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#compactP"><span class="hs-identifier hs-var">compactP</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681154154"><span class="hs-identifier hs-var">cperm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[NamedArg (Pattern' String)]
</span><a href="#local-6989586621681154157"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-676"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseBody :: Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">I.clauseBody</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681154156"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-677"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseType :: Maybe (Arg (Type'' Term Term))
</span><a href="Agda.Syntax.Internal.html#clauseType"><span class="hs-identifier hs-var">I.clauseType</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Arg (Type'' Term Term))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: compute clause type</span><span>
</span><span id="line-678"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseCatchall :: Bool
</span><a href="Agda.Syntax.Internal.html#clauseCatchall"><span class="hs-identifier hs-var">I.clauseCatchall</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-679"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseExact :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseExact"><span class="hs-identifier hs-var">I.clauseExact</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-680"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseRecursive :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseRecursive"><span class="hs-identifier hs-var">I.clauseRecursive</span></a></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: Don't know here whether recursive or not !?</span><span>
</span><span id="line-681"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseUnreachable :: Maybe Bool
</span><a href="Agda.Syntax.Internal.html#clauseUnreachable"><span class="hs-identifier hs-var">I.clauseUnreachable</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- TODO: Don't know here whether reachable or not !?</span><span>
</span><span id="line-682"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseEllipsis :: ExpandedEllipsis
</span><a href="Agda.Syntax.Internal.html#clauseEllipsis"><span class="hs-identifier hs-var">I.clauseEllipsis</span></a></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="Agda.Syntax.Common.html#NoEllipsis"><span class="hs-identifier hs-var">Cm.NoEllipsis</span></a></span><span>
</span><span id="line-683"></span><span>   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">clauseWhereModule :: Maybe ModuleName
</span><a href="Agda.Syntax.Internal.html#clauseWhereModule"><span class="hs-identifier hs-var">I.clauseWhereModule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-684"></span><span>   </span><span class="hs-special">}</span><span>
</span><span id="line-685"></span><span>
</span><span id="line-686"></span><span class="annot"><a href="Agda.Auto.Convert.html#contains_constructor"><span class="hs-identifier hs-type">contains_constructor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPat"><span class="hs-identifier hs-type">CSPat</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#O"><span class="hs-identifier hs-type">O</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-687"></span><span id="contains_constructor"><span class="annot"><span class="annottext">contains_constructor :: [CSPat O] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#contains_constructor"><span class="hs-identifier hs-var hs-var">contains_constructor</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(CSPat O -&gt; Bool) -&gt; [CSPat O] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">CSPat O -&gt; Bool
forall {o}. HI (CSPatI o) -&gt; Bool
</span><a href="#local-6989586621681154139"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-688"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-689"></span><span>  </span><span id="local-6989586621681154139"><span class="annot"><span class="annottext">f :: HI (CSPatI o) -&gt; Bool
</span><a href="#local-6989586621681154139"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-type">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154138"><span class="annot"><span class="annottext">CSPatI o
</span><a href="#local-6989586621681154138"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CSPatI o
</span><a href="#local-6989586621681154138"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-690"></span><span>         </span><span class="annot"><a href="Agda.Auto.CaseSplit.html#CSPatConApp"><span class="hs-identifier hs-type">CSPatConApp</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-691"></span><span>         </span><span class="annot"><span class="annottext">CSPatI o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-692"></span><span>
</span><span id="line-693"></span><span class="hs-comment">-- ---------------------------------</span><span>
</span><span id="line-694"></span><span>
</span><span id="line-695"></span><span id="local-6989586621681155770"><span class="annot"><a href="Agda.Auto.Convert.html#freeIn"><span class="hs-identifier hs-type">freeIn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155770"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-696"></span><span id="freeIn"><span class="annot"><span class="annottext">freeIn :: forall o. Int -&gt; MExp o -&gt; Bool
</span><a href="Agda.Auto.Convert.html#freeIn"><span class="hs-identifier hs-var hs-var">freeIn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
forall o. Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-697"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-698"></span><span>  </span><span id="local-6989586621681154135"><span class="annot"><span class="annottext">mr :: MM a blk -&gt; a
</span><a href="#local-6989586621681154135"><span class="hs-identifier hs-var hs-var">mr</span></a></span></span><span> </span><span id="local-6989586621681154134"><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621681154134"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621681154133"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154133"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621681154134"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154133"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-699"></span><span>  </span><span id="local-6989586621681154136"><span class="annot"><span class="annottext">f :: Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681154125"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681154124"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154124"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; Exp o
forall {a} {blk}. MM a blk -&gt; a
</span><a href="#local-6989586621681154135"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154124"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-700"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-type">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">OKHandle (RefInfo o)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154123"><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621681154123"><span class="hs-identifier hs-var">elr</span></a></span></span><span> </span><span id="local-6989586621681154122"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154122"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Elr o
</span><a href="#local-6989586621681154123"><span class="hs-identifier hs-var">elr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-701"></span><span>    </span><span class="annot"><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681154121"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154121"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154121"><span class="hs-identifier hs-var">v'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-702"></span><span>    </span><span class="annot"><span class="annottext">Elr o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621681154120"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154122"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-703"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Lam"><span class="hs-identifier hs-type">Lam</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154119"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154119"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154119"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-704"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154118"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154118"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154117"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154117"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154118"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154125"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154117"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-705"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-706"></span><span>
</span><span id="line-707"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#AbsurdLambda"><span class="hs-identifier hs-type">AbsurdLambda</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-708"></span><span>
</span><span id="line-709"></span><span>
</span><span id="line-710"></span><span>  </span><span id="local-6989586621681154120"><span class="annot"><span class="annottext">fs :: Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621681154120"><span class="hs-identifier hs-var hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681154115"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154115"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681154114"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154114"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MArgList o -&gt; ArgList o
forall {a} {blk}. MM a blk -&gt; a
</span><a href="#local-6989586621681154135"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154114"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-711"></span><span>   </span><span class="annot"><span class="annottext">ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-712"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALCons"><span class="hs-identifier hs-type">ALCons</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154113"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154113"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681154112"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154112"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; Bool
</span><a href="#local-6989586621681154136"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154115"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154113"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621681154120"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154115"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154112"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-713"></span><span>
</span><span id="line-714"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALProj"><span class="hs-identifier hs-type">ALProj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#ALConPar"><span class="hs-identifier hs-type">ALConPar</span></a></span><span> </span><span id="local-6989586621681154111"><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154111"><span class="hs-keyword hs-var">as</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MArgList o -&gt; Bool
</span><a href="#local-6989586621681154120"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154115"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">MArgList o
</span><a href="#local-6989586621681154111"><span class="hs-keyword hs-var">as</span></a></span><span>
</span><span id="line-718"></span><span>
</span><span id="line-719"></span><span>
</span><span id="line-720"></span><span id="local-6989586621681155765"><span class="annot"><a href="Agda.Auto.Convert.html#negtype"><span class="hs-identifier hs-type">negtype</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstRef"><span class="hs-identifier hs-type">ConstRef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155765"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155765"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#MExp"><span class="hs-identifier hs-type">MExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681155765"><span class="hs-identifier hs-type">o</span></a></span></span><span>
</span><span id="line-721"></span><span id="negtype"><span class="annot"><span class="annottext">negtype :: forall o. ConstRef o -&gt; MExp o -&gt; MExp o
</span><a href="Agda.Auto.Convert.html#negtype"><span class="hs-identifier hs-var hs-var">negtype</span></a></span></span><span> </span><span id="local-6989586621681154107"><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621681154107"><span class="hs-identifier hs-var">ee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621681154106"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-723"></span><span>  </span><span id="local-6989586621681154105"><span class="annot"><span class="annottext">mr :: MM a blk -&gt; a
</span><a href="#local-6989586621681154105"><span class="hs-identifier hs-var hs-var">mr</span></a></span></span><span> </span><span id="local-6989586621681154104"><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621681154104"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-type">NotM</span></a></span><span> </span><span id="local-6989586621681154103"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154103"><span class="hs-identifier hs-var">x'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM a blk
</span><a href="#local-6989586621681154104"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681154103"><span class="hs-identifier hs-var">x'</span></a></span><span>
</span><span id="line-724"></span><span>  </span><span id="local-6989586621681154106"><span class="annot"><span class="annottext">f :: Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621681154106"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681154102"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154102"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154101"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154101"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MExp o -&gt; Exp o
forall {a} {blk}. MM a blk -&gt; a
</span><a href="#local-6989586621681154105"><span class="hs-identifier hs-var">mr</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154101"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-725"></span><span>   </span><span class="annot"><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681154100"><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621681154100"><span class="hs-identifier hs-var">uid</span></a></span></span><span> </span><span id="local-6989586621681154099"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154099"><span class="hs-identifier hs-var">hid</span></a></span></span><span> </span><span id="local-6989586621681154098"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154098"><span class="hs-identifier hs-var">possdep</span></a></span></span><span> </span><span id="local-6989586621681154097"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154097"><span class="hs-identifier hs-var">it</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-type">Abs</span></a></span><span> </span><span id="local-6989586621681154096"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154096"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span id="local-6989586621681154095"><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154095"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
</span><a href="#local-6989586621681154100"><span class="hs-identifier hs-var">uid</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681154099"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681154098"><span class="hs-identifier hs-var">possdep</span></a></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154097"><span class="hs-identifier hs-var">it</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681154096"><span class="hs-identifier hs-var">id</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; MExp o -&gt; MExp o
</span><a href="#local-6989586621681154106"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154102"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154095"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>   </span><span class="annot"><span class="annottext">Exp o
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">MExp o
</span><a href="#local-6989586621681154101"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp o
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Sort
</span><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo o)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Elr o
forall o. Int -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList o -&gt; MArgList o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MExp o -&gt; Abs (MExp o)
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp o -&gt; MExp o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp o -&gt; MExp o) -&gt; Exp o -&gt; MExp o
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (UId o)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo o)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef o -&gt; Elr o
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef o
</span><a href="#local-6989586621681154107"><span class="hs-identifier hs-var">ee</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList o -&gt; MArgList o
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList o
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span class="hs-comment">-- ---------------------------------------</span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span class="annot"><a href="Agda.Auto.Convert.html#findClauseDeep"><span class="hs-identifier hs-type">findClauseDeep</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">Cm.InteractionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">MB.TCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-731"></span><span id="findClauseDeep"><span class="annot"><span class="annottext">findClauseDeep :: InteractionId -&gt; TCM (Maybe (QName, Clause, Bool))
</span><a href="Agda.Auto.Convert.html#findClauseDeep"><span class="hs-identifier hs-var hs-var">findClauseDeep</span></a></span></span><span> </span><span id="local-6989586621681154093"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681154093"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM (Maybe (QName, Clause, Bool))
-&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. MonadTCEnv m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Signature.html#ignoreAbstractMode"><span class="hs-identifier hs-var">ignoreAbstractMode</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM (Maybe (QName, Clause, Bool))
 -&gt; TCM (Maybe (QName, Clause, Bool)))
-&gt; TCM (Maybe (QName, Clause, Bool))
-&gt; TCM (Maybe (QName, Clause, Bool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-comment">-- Andreas, 2016-09-04, issue #2162</span><span>
</span><span id="line-732"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#InteractionPoint"><span class="hs-identifier hs-type">MB.InteractionPoint</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ipClause :: InteractionPoint -&gt; IPClause
</span><a href="Agda.TypeChecking.Monad.Base.html#ipClause"><span class="hs-identifier hs-var">MB.ipClause</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154090"><span class="annot"><span class="annottext">IPClause
</span><a href="#local-6989586621681154090"><span class="hs-identifier hs-var">ipCl</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCMT IO InteractionPoint
forall (m :: * -&gt; *).
(MonadFail m, ReadTCState m, MonadError TCErr m) =&gt;
InteractionId -&gt; m InteractionPoint
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionPoint"><span class="hs-identifier hs-var">lookupInteractionPoint</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681154093"><span class="hs-identifier hs-var">ii</span></a></span><span>
</span><span id="line-733"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">IPClause
</span><a href="#local-6989586621681154090"><span class="hs-identifier hs-var">ipCl</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-734"></span><span>    </span><span class="annot"><span class="annottext">IPClause
</span><a href="Agda.TypeChecking.Monad.Base.html#IPNoClause"><span class="hs-identifier hs-var">MB.IPNoClause</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-735"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#IPClause"><span class="hs-identifier hs-type">MB.IPClause</span></a></span><span> </span><span id="local-6989586621681154087"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154087"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681154086"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154086"><span class="hs-identifier hs-var">clauseNo</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Substitution
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SpineClause
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Closure ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Closure IPBoundary]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-736"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CaseContext
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681154085"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154085"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Int -&gt; TCM (CaseContext, ClauseZipper)
</span><a href="Agda.Interaction.MakeCase.html#getClauseZipperForIP"><span class="hs-identifier hs-var">getClauseZipperForIP</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154087"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154086"><span class="hs-identifier hs-var">clauseNo</span></a></span><span>
</span><span id="line-737"></span><span>      </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool)))
-&gt; Maybe (QName, Clause, Bool) -&gt; TCM (Maybe (QName, Clause, Bool))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(QName, Clause, Bool) -&gt; Maybe (QName, Clause, Bool)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154087"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154085"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; (Term -&gt; Bool) -&gt; Maybe Term -&gt; Bool
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Bool
</span><a href="#local-6989586621681154083"><span class="hs-identifier hs-var">toplevel</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Bool) -&gt; Maybe Term -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Maybe Term
</span><a href="Agda.Syntax.Internal.html#clauseBody"><span class="hs-identifier hs-var">I.clauseBody</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681154085"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-739"></span><span>    </span><span id="local-6989586621681154083"><span class="annot"><span class="annottext">toplevel :: Term -&gt; Bool
</span><a href="#local-6989586621681154083"><span class="hs-identifier hs-var hs-var">toplevel</span></a></span></span><span> </span><span id="local-6989586621681154082"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154082"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-740"></span><span>     </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154082"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-741"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-742"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-743"></span><span>
</span><span id="line-744"></span><span class="hs-comment">-- ---------------------------------------</span><span>
</span><span id="line-745"></span><span>
</span><span id="line-746"></span><span class="annot"><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-type">matchType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">I.Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#Nat"><span class="hs-identifier hs-type">Nat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- Nat is deffreevars of const, Nat is ctx length of target type, left arg is const type, right is target type</span><span>
</span><span id="line-747"></span><span id="matchType"><span class="annot"><span class="annottext">matchType :: Int
-&gt; Int -&gt; Type'' Term Term -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-var hs-var">matchType</span></a></span></span><span> </span><span id="local-6989586621681154080"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154080"><span class="hs-identifier hs-var">cdfv</span></a></span></span><span> </span><span id="local-6989586621681154079"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154079"><span class="hs-identifier hs-var">tctx</span></a></span></span><span> </span><span id="local-6989586621681154078"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154078"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span id="local-6989586621681154077"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154077"><span class="hs-identifier hs-var">ttyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154076"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154080"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154078"><span class="hs-identifier hs-var">ctyp</span></a></span><span>
</span><span id="line-748"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-749"></span><span>  </span><span id="local-6989586621681154076"><span class="annot"><span class="annottext">trmodps :: Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154076"><span class="hs-identifier hs-var hs-var">trmodps</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span id="local-6989586621681154075"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154075"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154074"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154075"><span class="hs-identifier hs-var">ctyp</span></a></span><span>
</span><span id="line-750"></span><span>  </span><span class="annot"><a href="#local-6989586621681154076"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span id="local-6989586621681154073"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154073"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154072"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154072"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">I.unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154072"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-751"></span><span>   </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154070"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154070"><span class="hs-identifier hs-var">ot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154076"><span class="hs-identifier hs-var">trmodps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154073"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154070"><span class="hs-identifier hs-var">ot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-752"></span><span>   </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Int)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-753"></span><span>  </span><span id="local-6989586621681154074"><span class="annot"><span class="annottext">tr :: Int -&gt; Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154074"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621681154069"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154069"><span class="hs-identifier hs-var">narg</span></a></span></span><span> </span><span id="local-6989586621681154068"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154068"><span class="hs-identifier hs-var">na</span></a></span></span><span> </span><span id="local-6989586621681154067"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154067"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-754"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Int
-&gt; (Int -&gt; Maybe Int)
-&gt; Type'' Term Term
-&gt; Type'' Term Term
-&gt; Maybe Int
</span><a href="#local-6989586621681154066"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154067"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154077"><span class="hs-identifier hs-var">ttyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-755"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681154065"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154065"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Int, Int) -&gt; Maybe (Int, Int)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154065"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154069"><span class="hs-identifier hs-var">narg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>    </span><span class="annot"><span class="annottext">Maybe Int
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">I.unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154067"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-757"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-type">I.Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154064"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154064"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154074"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154069"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154068"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154064"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-758"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Dom (Type'' Term Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#NoAbs"><span class="hs-identifier hs-type">I.NoAbs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154063"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154063"><span class="hs-identifier hs-var">ot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type'' Term Term -&gt; Maybe (Int, Int)
</span><a href="#local-6989586621681154074"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154069"><span class="hs-identifier hs-var">narg</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154068"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154063"><span class="hs-identifier hs-var">ot</span></a></span><span>
</span><span id="line-759"></span><span>     </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Int, Int)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-760"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-761"></span><span>    </span><span id="local-6989586621681154066"><span class="annot"><span class="annottext">ft :: Int
-&gt; Int
-&gt; (Int -&gt; Maybe Int)
-&gt; Type'' Term Term
-&gt; Type'' Term Term
-&gt; Maybe Int
</span><a href="#local-6989586621681154066"><span class="hs-identifier hs-var hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621681154062"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154062"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621681154061"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154060"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154060"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154059"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154059"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">I.El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort' Term
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154058"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154058"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154062"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154061"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154060"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154059"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154058"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-762"></span><span>    </span><span id="local-6989586621681154057"><span class="annot"><span class="annottext">f :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681154056"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621681154055"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154054"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681154053"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154053"><span class="hs-identifier hs-var">e1</span></a></span></span><span> </span><span id="local-6989586621681154052"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154052"><span class="hs-identifier hs-var">e2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154053"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-763"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154051"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154051"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span id="local-6989586621681154050"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154050"><span class="hs-identifier hs-var">as1</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154051"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154052"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-764"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154048"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154048"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621681154047"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154047"><span class="hs-identifier hs-var">as2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154051"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154048"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154050"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154047"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-765"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-766"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154045"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154045"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154045"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154068"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- unify vars with no args?</span><span>
</span><span id="line-767"></span><span>     </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154044"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154044"><span class="hs-identifier hs-var">v1</span></a></span></span><span> </span><span id="local-6989586621681154043"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154043"><span class="hs-identifier hs-var">as1</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154052"><span class="hs-identifier hs-var">e2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-768"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">I.Var</span></a></span><span> </span><span id="local-6989586621681154042"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154042"><span class="hs-identifier hs-var">v2</span></a></span></span><span> </span><span id="local-6989586621681154041"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154041"><span class="hs-identifier hs-var">as2</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154080"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154068"><span class="hs-identifier hs-var">na</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154044"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154079"><span class="hs-identifier hs-var">tctx</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154042"><span class="hs-identifier hs-var">v2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154043"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154041"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-769"></span><span>      </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-770"></span><span>     </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154053"><span class="hs-identifier hs-var">e1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154052"><span class="hs-identifier hs-var">e2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-771"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-772"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">I.MetaV</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-773"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621681154040"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154040"><span class="hs-identifier hs-var">hid1</span></a></span></span><span> </span><span id="local-6989586621681154039"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154039"><span class="hs-identifier hs-var">b1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lam"><span class="hs-identifier hs-type">I.Lam</span></a></span><span> </span><span id="local-6989586621681154038"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154038"><span class="hs-identifier hs-var">hid2</span></a></span></span><span> </span><span id="local-6989586621681154037"><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154037"><span class="hs-identifier hs-var">b2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154040"><span class="hs-identifier hs-var">hid1</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; ArgInfo -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154038"><span class="hs-identifier hs-var">hid2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154039"><span class="hs-identifier hs-var">b1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Term -&gt; Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Term
</span><a href="#local-6989586621681154037"><span class="hs-identifier hs-var">b2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-774"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span id="local-6989586621681154036"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681154036"><span class="hs-identifier hs-var">lit1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Lit"><span class="hs-identifier hs-type">I.Lit</span></a></span><span> </span><span id="local-6989586621681154035"><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681154035"><span class="hs-identifier hs-var">lit2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681154036"><span class="hs-identifier hs-var">lit1</span></a></span><span> </span><span class="annot"><span class="annottext">Literal -&gt; Literal -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Literal
</span><a href="#local-6989586621681154035"><span class="hs-identifier hs-var">lit2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621681154034"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154034"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span id="local-6989586621681154033"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154033"><span class="hs-identifier hs-var">as1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">I.Def</span></a></span><span> </span><span id="local-6989586621681154032"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154032"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span id="local-6989586621681154031"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154031"><span class="hs-identifier hs-var">as2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154034"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681154032"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154033"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154031"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-776"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621681154030"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154030"><span class="hs-identifier hs-var">n1</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154029"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154029"><span class="hs-identifier hs-var">as1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">I.Con</span></a></span><span> </span><span id="local-6989586621681154028"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154028"><span class="hs-identifier hs-var">n2</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681154027"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154027"><span class="hs-identifier hs-var">as2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154030"><span class="hs-identifier hs-var">n1</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConHead -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681154028"><span class="hs-identifier hs-var">n2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154026"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154029"><span class="hs-identifier hs-var">as1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154027"><span class="hs-identifier hs-var">as2</span></a></span><span>
</span><span id="line-777"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154025"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154025"><span class="hs-identifier hs-var">info1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154024"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154024"><span class="hs-identifier hs-var">it1</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681154023"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154023"><span class="hs-identifier hs-var">ot1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">I.Pi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">I.Dom</span></a></span><span class="hs-special">{</span><span class="annot"><span class="annottext">domInfo :: forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154022"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154022"><span class="hs-identifier hs-var">info2</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">unDom :: forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681154021"><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154021"><span class="hs-identifier hs-var">it2</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span>  </span><span id="local-6989586621681154020"><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154020"><span class="hs-identifier hs-var">ot2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154025"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154022"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Int
-&gt; (Int -&gt; Maybe Int)
-&gt; Type'' Term Term
-&gt; Type'' Term Term
-&gt; Maybe Int
</span><a href="#local-6989586621681154066"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154018"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154018"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Int
-&gt; (Int -&gt; Maybe Int)
-&gt; Type'' Term Term
-&gt; Type'' Term Term
-&gt; Maybe Int
</span><a href="#local-6989586621681154066"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154056"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154018"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154023"><span class="hs-identifier hs-var">ot1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs (Type'' Term Term) -&gt; Type'' Term Term
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">I.absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs (Type'' Term Term)
</span><a href="#local-6989586621681154020"><span class="hs-identifier hs-var">ot2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154024"><span class="hs-identifier hs-var">it1</span></a></span><span> </span><span class="annot"><span class="annottext">Type'' Term Term
</span><a href="#local-6989586621681154021"><span class="hs-identifier hs-var">it2</span></a></span><span>
</span><span id="line-778"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">I.Sort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154054"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154055"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-comment">-- sloppy</span><span>
</span><span id="line-779"></span><span>      </span><span class="annot"><span class="annottext">(Term, Term)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-780"></span><span>    </span><span id="local-6989586621681154026"><span class="annot"><span class="annottext">fs :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154026"><span class="hs-identifier hs-var hs-var">fs</span></a></span></span><span> </span><span id="local-6989586621681154017"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154017"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621681154016"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154015"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154015"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681154014"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154014"><span class="hs-identifier hs-var">es1</span></a></span></span><span> </span><span id="local-6989586621681154013"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154013"><span class="hs-identifier hs-var">es2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154014"><span class="hs-identifier hs-var">es1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154013"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-781"></span><span>     </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154015"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-782"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681154012"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154012"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span id="local-6989586621681154011"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154011"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154010"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681154009"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154009"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span id="local-6989586621681154008"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154008"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681154007"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154007"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154012"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681154009"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154017"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154016"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681154006"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154006"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154026"><span class="hs-identifier hs-var">fs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154017"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154006"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154015"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154010"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154007"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154011"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681154008"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-783"></span><span>     </span><span class="annot"><span class="annottext">(Elims, Elims)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-784"></span><span>    </span><span id="local-6989586621681154046"><span class="annot"><span class="annottext">fes :: Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var hs-var">fes</span></a></span></span><span> </span><span id="local-6989586621681154005"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154005"><span class="hs-identifier hs-var">nl</span></a></span></span><span> </span><span id="local-6989586621681154004"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681154003"><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681154002"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154002"><span class="hs-identifier hs-var">es1</span></a></span></span><span> </span><span id="local-6989586621681154001"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154001"><span class="hs-identifier hs-var">es2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154002"><span class="hs-identifier hs-var">es1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681154001"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-785"></span><span>     </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-786"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">I.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681153999"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681153999"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681153998"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">I.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681153997"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681153997"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681153996"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153996"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681153999"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681153997"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154005"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153998"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153996"><span class="hs-identifier hs-var">es2</span></a></span><span>
</span><span id="line-787"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681153995"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681153995"><span class="hs-identifier hs-var">info1</span></a></span></span><span> </span><span id="local-6989586621681153994"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681153994"><span class="hs-identifier hs-var">e1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681153993"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153993"><span class="hs-identifier hs-var">es1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">I.Apply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Cm.Arg</span></a></span><span> </span><span id="local-6989586621681153992"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681153992"><span class="hs-identifier hs-var">info2</span></a></span></span><span> </span><span id="local-6989586621681153991"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681153991"><span class="hs-identifier hs-var">e2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681153990"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153990"><span class="hs-identifier hs-var">es2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681153995"><span class="hs-identifier hs-var">info1</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding -&gt; Hiding -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Hiding
</span><a href="Agda.Syntax.Common.html#argInfoHiding"><span class="hs-identifier hs-var">Cm.argInfoHiding</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681153992"><span class="hs-identifier hs-var">info2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Term -&gt; Term -&gt; Maybe Int
</span><a href="#local-6989586621681154057"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154005"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154004"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681153989"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; (Int -&gt; Maybe Int) -&gt; Elims -&gt; Elims -&gt; Maybe Int
</span><a href="#local-6989586621681154046"><span class="hs-identifier hs-var">fes</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681154005"><span class="hs-identifier hs-var">nl</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681153989"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int
</span><a href="#local-6989586621681154003"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153993"><span class="hs-identifier hs-var">es1</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681153990"><span class="hs-identifier hs-var">es2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681153994"><span class="hs-identifier hs-var">e1</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681153991"><span class="hs-identifier hs-var">e2</span></a></span><span>
</span><span id="line-788"></span><span>     </span><span class="annot"><span class="annottext">(Elims, Elims)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Int
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-789"></span></pre></body></html>