<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621680745072"><span id="local-6989586621680745073"></span></span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Utils.ProfileOptions</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier">ProfileOption</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier">ProfileOptions</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#noProfileOptions"><span class="hs-identifier">noProfileOptions</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#addProfileOption"><span class="hs-identifier">addProfileOption</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#containsProfileOption"><span class="hs-identifier">containsProfileOption</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#profileOptionsToList"><span class="hs-identifier">profileOptionsToList</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#profileOptionsFromList"><span class="hs-identifier">profileOptionsFromList</span></a></span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#validProfileOptionStrings"><span class="hs-identifier">validProfileOptionStrings</span></a></span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.DeepSeq</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">intercalate</span></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Char</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">toLower</span></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.EditDistance</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">restrictedDamerauLevenshteinDistance</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">defaultEditCosts</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span>
</span><span id="line-24"></span><span class="hs-comment">-- | Various things that can be measured when checking an Agda development. Turned on with</span><span>
</span><span id="line-25"></span><span class="hs-comment">--   the `--profile` flag, for instance `--profile=sharing` to turn on the 'Sharing' option.</span><span>
</span><span id="line-26"></span><span class="hs-comment">--   'Internal', 'Modules', and 'Definitions' are mutually exclusive.</span><span>
</span><span id="line-27"></span><span class="hs-comment">--</span><span>
</span><span id="line-28"></span><span class="hs-comment">--   NOTE: Changing this data type requires bumping the interface version number in</span><span>
</span><span id="line-29"></span><span class="hs-comment">--   'Agda.TypeChecking.Serialise.currentInterfaceVersion'.</span><span>
</span><span id="line-30"></span><span id="local-6989586621680745017"><span id="local-6989586621680745018"></span></span><span class="hs-keyword">data</span><span> </span><span id="ProfileOption"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-var">ProfileOption</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Internal"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Internal"><span class="hs-identifier hs-var">Internal</span></a></span></span><span>     </span><span class="hs-comment">-- ^ Measure time taken by various parts of the system (type checking, serialization, etc)</span><span>
</span><span id="line-31"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Modules"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Modules"><span class="hs-identifier hs-var">Modules</span></a></span></span><span>      </span><span class="hs-comment">-- ^ Measure time spent on individual (Agda) modules</span><span>
</span><span id="line-32"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Definitions"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Definitions"><span class="hs-identifier hs-var">Definitions</span></a></span></span><span>  </span><span class="hs-comment">-- ^ Measure time spent on individual (Agda) definitions</span><span>
</span><span id="line-33"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Sharing"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Sharing"><span class="hs-identifier hs-var">Sharing</span></a></span></span><span>      </span><span class="hs-comment">-- ^ Measure things related to sharing</span><span>
</span><span id="line-34"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Serialize"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Serialize"><span class="hs-identifier hs-var">Serialize</span></a></span></span><span>    </span><span class="hs-comment">-- ^ Collect detailed statistics about serialization</span><span>
</span><span id="line-35"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Constraints"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Constraints"><span class="hs-identifier hs-var">Constraints</span></a></span></span><span>  </span><span class="hs-comment">-- ^ Collect statistics about constraint solving</span><span>
</span><span id="line-36"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Metas"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Metas"><span class="hs-identifier hs-var">Metas</span></a></span></span><span>        </span><span class="hs-comment">-- ^ Count number of created metavariables</span><span>
</span><span id="line-37"></span><span>                   </span><span class="hs-glyph">|</span><span> </span><span id="Interactive"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#Interactive"><span class="hs-identifier hs-var">Interactive</span></a></span></span><span>  </span><span class="hs-comment">-- ^ Measure time of interactive commands</span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680745003"><span id="local-6989586621680745005"><span id="local-6989586621680745007"><span class="annot"><span class="annottext">Int -&gt; ProfileOption -&gt; ShowS
[ProfileOption] -&gt; ShowS
ProfileOption -&gt; String
(Int -&gt; ProfileOption -&gt; ShowS)
-&gt; (ProfileOption -&gt; String)
-&gt; ([ProfileOption] -&gt; ShowS)
-&gt; Show ProfileOption
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ProfileOption] -&gt; ShowS
$cshowList :: [ProfileOption] -&gt; ShowS
show :: ProfileOption -&gt; String
$cshow :: ProfileOption -&gt; String
showsPrec :: Int -&gt; ProfileOption -&gt; ShowS
$cshowsPrec :: Int -&gt; ProfileOption -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744998"><span id="local-6989586621680745000"><span class="annot"><span class="annottext">ProfileOption -&gt; ProfileOption -&gt; Bool
(ProfileOption -&gt; ProfileOption -&gt; Bool)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Bool) -&gt; Eq ProfileOption
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c/= :: ProfileOption -&gt; ProfileOption -&gt; Bool
== :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c== :: ProfileOption -&gt; ProfileOption -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744978"><span id="local-6989586621680744980"><span id="local-6989586621680744983"><span id="local-6989586621680744986"><span id="local-6989586621680744989"><span id="local-6989586621680744991"><span id="local-6989586621680744993"><span class="annot"><span class="annottext">Eq ProfileOption
Eq ProfileOption
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Ordering)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Bool)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Bool)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Bool)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; Bool)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; ProfileOption)
-&gt; (ProfileOption -&gt; ProfileOption -&gt; ProfileOption)
-&gt; Ord ProfileOption
ProfileOption -&gt; ProfileOption -&gt; Bool
ProfileOption -&gt; ProfileOption -&gt; Ordering
ProfileOption -&gt; ProfileOption -&gt; ProfileOption
forall a.
Eq a
-&gt; (a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
min :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption
$cmin :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption
max :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption
$cmax :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption
&gt;= :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c&gt;= :: ProfileOption -&gt; ProfileOption -&gt; Bool
&gt; :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c&gt; :: ProfileOption -&gt; ProfileOption -&gt; Bool
&lt;= :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c&lt;= :: ProfileOption -&gt; ProfileOption -&gt; Bool
&lt; :: ProfileOption -&gt; ProfileOption -&gt; Bool
$c&lt; :: ProfileOption -&gt; ProfileOption -&gt; Bool
compare :: ProfileOption -&gt; ProfileOption -&gt; Ordering
$ccompare :: ProfileOption -&gt; ProfileOption -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744937"><span id="local-6989586621680744939"><span id="local-6989586621680744943"><span id="local-6989586621680744947"><span id="local-6989586621680744949"><span id="local-6989586621680744961"><span id="local-6989586621680744967"><span id="local-6989586621680744975"><span class="annot"><span class="annottext">Int -&gt; ProfileOption
ProfileOption -&gt; Int
ProfileOption -&gt; [ProfileOption]
ProfileOption -&gt; ProfileOption
ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
ProfileOption -&gt; ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
(ProfileOption -&gt; ProfileOption)
-&gt; (ProfileOption -&gt; ProfileOption)
-&gt; (Int -&gt; ProfileOption)
-&gt; (ProfileOption -&gt; Int)
-&gt; (ProfileOption -&gt; [ProfileOption])
-&gt; (ProfileOption -&gt; ProfileOption -&gt; [ProfileOption])
-&gt; (ProfileOption -&gt; ProfileOption -&gt; [ProfileOption])
-&gt; (ProfileOption
    -&gt; ProfileOption -&gt; ProfileOption -&gt; [ProfileOption])
-&gt; Enum ProfileOption
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
enumFromThenTo :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
$cenumFromThenTo :: ProfileOption -&gt; ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
enumFromTo :: ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
$cenumFromTo :: ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
enumFromThen :: ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
$cenumFromThen :: ProfileOption -&gt; ProfileOption -&gt; [ProfileOption]
enumFrom :: ProfileOption -&gt; [ProfileOption]
$cenumFrom :: ProfileOption -&gt; [ProfileOption]
fromEnum :: ProfileOption -&gt; Int
$cfromEnum :: ProfileOption -&gt; Int
toEnum :: Int -&gt; ProfileOption
$ctoEnum :: Int -&gt; ProfileOption
pred :: ProfileOption -&gt; ProfileOption
$cpred :: ProfileOption -&gt; ProfileOption
succ :: ProfileOption -&gt; ProfileOption
$csucc :: ProfileOption -&gt; ProfileOption
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744932"><span id="local-6989586621680744934"><span class="annot"><span class="annottext">ProfileOption
ProfileOption -&gt; ProfileOption -&gt; Bounded ProfileOption
forall a. a -&gt; a -&gt; Bounded a
maxBound :: ProfileOption
$cmaxBound :: ProfileOption
minBound :: ProfileOption
$cminBound :: ProfileOption
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Bounded</span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(forall x. ProfileOption -&gt; Rep ProfileOption x)
-&gt; (forall x. Rep ProfileOption x -&gt; ProfileOption)
-&gt; Generic ProfileOption
forall x. Rep ProfileOption x -&gt; ProfileOption
forall x. ProfileOption -&gt; Rep ProfileOption x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cto :: forall x. Rep ProfileOption x -&gt; ProfileOption
$cfrom :: forall x. ProfileOption -&gt; Rep ProfileOption x
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621680744926"><span class="annot"><span class="hs-identifier hs-type">NFData</span></span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-comment">-- | A set of 'ProfileOption's</span><span>
</span><span id="line-43"></span><span class="hs-keyword">newtype</span><span> </span><span id="ProfileOptions"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-var">ProfileOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ProfileOpts"><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-var">ProfileOpts</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unProfileOpts"><span class="annot"><span class="annottext">ProfileOptions -&gt; Set ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#unProfileOpts"><span class="hs-identifier hs-var hs-var">unProfileOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621680744914"><span id="local-6989586621680744916"><span id="local-6989586621680744921"><span class="annot"><span class="annottext">Int -&gt; ProfileOptions -&gt; ShowS
[ProfileOptions] -&gt; ShowS
ProfileOptions -&gt; String
(Int -&gt; ProfileOptions -&gt; ShowS)
-&gt; (ProfileOptions -&gt; String)
-&gt; ([ProfileOptions] -&gt; ShowS)
-&gt; Show ProfileOptions
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ProfileOptions] -&gt; ShowS
$cshowList :: [ProfileOptions] -&gt; ShowS
show :: ProfileOptions -&gt; String
$cshow :: ProfileOptions -&gt; String
showsPrec :: Int -&gt; ProfileOptions -&gt; ShowS
$cshowsPrec :: Int -&gt; ProfileOptions -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744907"><span id="local-6989586621680744912"><span class="annot"><span class="annottext">ProfileOptions -&gt; ProfileOptions -&gt; Bool
(ProfileOptions -&gt; ProfileOptions -&gt; Bool)
-&gt; (ProfileOptions -&gt; ProfileOptions -&gt; Bool) -&gt; Eq ProfileOptions
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: ProfileOptions -&gt; ProfileOptions -&gt; Bool
$c/= :: ProfileOptions -&gt; ProfileOptions -&gt; Bool
== :: ProfileOptions -&gt; ProfileOptions -&gt; Bool
$c== :: ProfileOptions -&gt; ProfileOptions -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621680744902"><span class="annot"><span class="annottext">ProfileOptions -&gt; ()
(ProfileOptions -&gt; ()) -&gt; NFData ProfileOptions
forall a. (a -&gt; ()) -&gt; NFData a
rnf :: ProfileOptions -&gt; ()
$crnf :: ProfileOptions -&gt; ()
</span><a href="#local-6989586621680744902"><span class="hs-identifier hs-var hs-var hs-var hs-var">NFData</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="hs-comment">-- | The empty set of profiling options.</span><span>
</span><span id="line-47"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#noProfileOptions"><span class="hs-identifier hs-type">noProfileOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span>
</span><span id="line-48"></span><span id="noProfileOptions"><span class="annot"><span class="annottext">noProfileOptions :: ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#noProfileOptions"><span class="hs-identifier hs-var hs-var">noProfileOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-var">ProfileOpts</span></a></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#addAllProfileOptions"><span class="hs-identifier hs-type">addAllProfileOptions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span>
</span><span id="line-51"></span><span id="addAllProfileOptions"><span class="annot"><span class="annottext">addAllProfileOptions :: ProfileOptions -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#addAllProfileOptions"><span class="hs-identifier hs-var hs-var">addAllProfileOptions</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-type">ProfileOpts</span></a></span><span> </span><span id="local-6989586621680744894"><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744894"><span class="hs-identifier hs-var">opts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-var">ProfileOpts</span></a></span><span> </span><span class="annot"><span class="annottext">(Set ProfileOption -&gt; ProfileOptions)
-&gt; Set ProfileOption -&gt; ProfileOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Set ProfileOption -&gt; ProfileOption -&gt; Set ProfileOption)
-&gt; Set ProfileOption -&gt; [ProfileOption] -&gt; Set ProfileOption
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; ProfileOption -&gt; Set ProfileOption
</span><a href="#local-6989586621680744892"><span class="hs-identifier hs-var">ins</span></a></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744894"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-53"></span><span>    </span><span id="local-6989586621680744892"><span class="annot"><span class="annottext">ins :: Set ProfileOption -&gt; ProfileOption -&gt; Set ProfileOption
</span><a href="#local-6989586621680744892"><span class="hs-identifier hs-var hs-var">ins</span></a></span></span><span> </span><span id="local-6989586621680744886"><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744886"><span class="hs-identifier hs-var">os</span></a></span></span><span> </span><span id="local-6989586621680744885"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744885"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">(ProfileOption -&gt; Bool) -&gt; Set ProfileOption -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProfileOption -&gt; ProfileOption -&gt; Bool
</span><a href="Agda.Utils.ProfileOptions.html#incompatible"><span class="hs-identifier hs-var">incompatible</span></a></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744885"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744886"><span class="hs-identifier hs-var">os</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744886"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-54"></span><span>             </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>               </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; Set ProfileOption -&gt; Set ProfileOption
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744885"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744886"><span class="hs-identifier hs-var">os</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span class="hs-comment">-- | Strings accepted by 'addProfileOption'</span><span>
</span><span id="line-57"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#validProfileOptionStrings"><span class="hs-identifier hs-type">validProfileOptionStrings</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-58"></span><span id="validProfileOptionStrings"><span class="annot"><span class="annottext">validProfileOptionStrings :: [String]
</span><a href="Agda.Utils.ProfileOptions.html#validProfileOptionStrings"><span class="hs-identifier hs-var hs-var">validProfileOptionStrings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;all&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; [String]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(ProfileOption -&gt; String) -&gt; [ProfileOption] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; String
</span><a href="Agda.Utils.ProfileOptions.html#optName"><span class="hs-identifier hs-var">optName</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#parseOpt"><span class="hs-identifier hs-type">parseOpt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span>
</span><span id="line-61"></span><span id="parseOpt"><span class="annot"><span class="annottext">parseOpt :: String -&gt; Either String ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#parseOpt"><span class="hs-identifier hs-var hs-var">parseOpt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680744879"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744879"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Map String ProfileOption -&gt; Maybe ProfileOption
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744879"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Map String ProfileOption
</span><a href="#local-6989586621680744877"><span class="hs-identifier hs-var">names</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><span class="annottext">Maybe ProfileOption
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String ProfileOption
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String ProfileOption)
-&gt; String -&gt; Either String ProfileOption
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621680744876"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744879"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621680744875"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744875"><span class="hs-identifier hs-var">o</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; Either String ProfileOption
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744875"><span class="hs-identifier hs-var">o</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-65"></span><span>    </span><span id="local-6989586621680744877"><span class="annot"><span class="annottext">names :: Map String ProfileOption
</span><a href="#local-6989586621680744877"><span class="hs-identifier hs-var hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(String, ProfileOption)] -&gt; Map String ProfileOption
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProfileOption -&gt; String
</span><a href="Agda.Utils.ProfileOptions.html#optName"><span class="hs-identifier hs-var">optName</span></a></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744868"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744868"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span id="local-6989586621680744868"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744868"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">minBound</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">ProfileOption
forall a. Bounded a =&gt; a
</span><span class="hs-identifier hs-var">maxBound</span></span><span class="hs-special">]</span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span>    </span><span id="local-6989586621680744865"><span class="annot"><span class="annottext">close :: String -&gt; String -&gt; Bool
</span><a href="#local-6989586621680744865"><span class="hs-identifier hs-var hs-var">close</span></a></span></span><span> </span><span id="local-6989586621680744864"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744864"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621680744863"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744863"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EditCosts -&gt; String -&gt; String -&gt; Int
</span><span class="hs-identifier hs-var">restrictedDamerauLevenshteinDistance</span></span><span> </span><span class="annot"><span class="annottext">EditCosts
</span><span class="hs-identifier hs-var">defaultEditCosts</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744864"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744863"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-68"></span><span>    </span><span id="local-6989586621680744876"><span class="annot"><span class="annottext">err :: ShowS
</span><a href="#local-6989586621680744876"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span>  </span><span id="local-6989586621680744857"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744857"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Not a valid profiling option: '&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744857"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'. &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ShowS
</span><a href="#local-6989586621680744855"><span class="hs-identifier hs-var">hint</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744857"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>    </span><span id="local-6989586621680744855"><span class="annot"><span class="annottext">hint :: ShowS
</span><a href="#local-6989586621680744855"><span class="hs-identifier hs-var hs-var">hint</span></a></span></span><span> </span><span id="local-6989586621680744845"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744845"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
</span><a href="#local-6989586621680744865"><span class="hs-identifier hs-var">close</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744845"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map String ProfileOption -&gt; [String]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map String ProfileOption
</span><a href="#local-6989586621680744877"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-70"></span><span>               </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Valid options are &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map String ProfileOption -&gt; [String]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map String ProfileOption
</span><a href="#local-6989586621680744877"><span class="hs-identifier hs-var">names</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, or all.&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-71"></span><span>               </span><span id="local-6989586621680744843"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621680744843"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Did you mean &quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; String
forall a. [a] -&gt; [[a]] -&gt; [a]
</span><span class="hs-identifier hs-var">intercalate</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; or &quot;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621680744843"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#optName"><span class="hs-identifier hs-type">optName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-74"></span><span id="optName"><span class="annot"><span class="annottext">optName :: ProfileOption -&gt; String
</span><a href="Agda.Utils.ProfileOptions.html#optName"><span class="hs-identifier hs-var hs-var">optName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Char) -&gt; ShowS
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char
</span><span class="hs-identifier hs-var">toLower</span></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; (ProfileOption -&gt; String) -&gt; ProfileOption -&gt; String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#incompatible"><span class="hs-identifier hs-type">incompatible</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-77"></span><span id="incompatible"><span class="annot"><span class="annottext">incompatible :: ProfileOption -&gt; ProfileOption -&gt; Bool
</span><a href="Agda.Utils.ProfileOptions.html#incompatible"><span class="hs-identifier hs-var hs-var">incompatible</span></a></span></span><span> </span><span id="local-6989586621680744840"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744840"><span class="hs-identifier hs-var">o1</span></a></span></span><span> </span><span id="local-6989586621680744839"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744839"><span class="hs-identifier hs-var">o2</span></a></span></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744840"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; ProfileOption -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744839"><span class="hs-identifier hs-var">o2</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([ProfileOption] -&gt; Bool) -&gt; [[ProfileOption]] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621680744838"><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744838"><span class="hs-identifier hs-var">set</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; [ProfileOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744840"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744838"><span class="hs-identifier hs-var">set</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; [ProfileOption] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744839"><span class="hs-identifier hs-var">o2</span></a></span><span> </span><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744838"><span class="hs-identifier hs-var">set</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[ProfileOption]]
</span><a href="#local-6989586621680744835"><span class="hs-identifier hs-var">sets</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-81"></span><span>    </span><span id="local-6989586621680744835"><span class="annot"><span class="annottext">sets :: [[ProfileOption]]
</span><a href="#local-6989586621680744835"><span class="hs-identifier hs-var hs-var">sets</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#Internal"><span class="hs-identifier hs-var">Internal</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#Modules"><span class="hs-identifier hs-var">Modules</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#Definitions"><span class="hs-identifier hs-var">Definitions</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="hs-comment">-- | Parse and add a profiling option to a set of profiling options. Returns `Left` with a helpful</span><span>
</span><span id="line-84"></span><span class="hs-comment">--   error message if the option doesn't parse or if it's incompatible with existing options.</span><span>
</span><span id="line-85"></span><span class="hs-comment">--   The special string &quot;all&quot; adds all options compatible with the given set and prefering the first</span><span>
</span><span id="line-86"></span><span class="hs-comment">--   of incompatible options. So `--profile=all` sets 'Internal' over 'Modules' and 'Definitions',</span><span>
</span><span id="line-87"></span><span class="hs-comment">--   but `--profile=modules --profile=all` sets 'Modules' and not 'Internal'.</span><span>
</span><span id="line-88"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#addProfileOption"><span class="hs-identifier hs-type">addProfileOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span>
</span><span id="line-89"></span><span id="addProfileOption"><span class="annot"><span class="annottext">addProfileOption :: String -&gt; ProfileOptions -&gt; Either String ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#addProfileOption"><span class="hs-identifier hs-var hs-var">addProfileOption</span></a></span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;all&quot;</span></span><span> </span><span id="local-6989586621680744834"><span class="annot"><span class="annottext">ProfileOptions
</span><a href="#local-6989586621680744834"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfileOptions -&gt; Either String ProfileOptions
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(ProfileOptions -&gt; Either String ProfileOptions)
-&gt; ProfileOptions -&gt; Either String ProfileOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProfileOptions -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#addAllProfileOptions"><span class="hs-identifier hs-var">addAllProfileOptions</span></a></span><span> </span><span class="annot"><span class="annottext">ProfileOptions
</span><a href="#local-6989586621680744834"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-90"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#addProfileOption"><span class="hs-identifier hs-var">addProfileOption</span></a></span><span> </span><span id="local-6989586621680744833"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744833"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-type">ProfileOpts</span></a></span><span> </span><span id="local-6989586621680744832"><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744832"><span class="hs-identifier hs-var">opts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621680744831"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744831"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String ProfileOption
</span><a href="Agda.Utils.ProfileOptions.html#parseOpt"><span class="hs-identifier hs-var">parseOpt</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744833"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621680744830"><span class="annot"><span class="annottext">conflicts :: [ProfileOption]
</span><a href="#local-6989586621680744830"><span class="hs-identifier hs-var hs-var">conflicts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ProfileOption -&gt; Bool) -&gt; [ProfileOption] -&gt; [ProfileOption]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ProfileOption -&gt; ProfileOption -&gt; Bool
</span><a href="Agda.Utils.ProfileOptions.html#incompatible"><span class="hs-identifier hs-var">incompatible</span></a></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744831"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set ProfileOption -&gt; [ProfileOption]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744832"><span class="hs-identifier hs-var">opts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; Either String () -&gt; Either String ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ProfileOption] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744830"><span class="hs-identifier hs-var">conflicts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either String () -&gt; Either String ())
-&gt; Either String () -&gt; Either String ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Either String ()
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either String ()) -&gt; String -&gt; Either String ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Cannot use profiling option '&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621680744833"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;' with '&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; String
</span><a href="Agda.Utils.ProfileOptions.html#optName"><span class="hs-identifier hs-var">optName</span></a></span><span> </span><span class="annot"><span class="annottext">(ProfileOption -&gt; String) -&gt; ProfileOption -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ProfileOption] -&gt; ProfileOption
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">([ProfileOption] -&gt; ProfileOption)
-&gt; [ProfileOption] -&gt; ProfileOption
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744830"><span class="hs-identifier hs-var">conflicts</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="annottext">ProfileOptions -&gt; Either String ProfileOptions
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(ProfileOptions -&gt; Either String ProfileOptions)
-&gt; ProfileOptions -&gt; Either String ProfileOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-var">ProfileOpts</span></a></span><span> </span><span class="annot"><span class="annottext">(Set ProfileOption -&gt; ProfileOptions)
-&gt; Set ProfileOption -&gt; ProfileOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; Set ProfileOption -&gt; Set ProfileOption
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744831"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744832"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- | Check if a given profiling option is present in a set of profiling options.</span><span>
</span><span id="line-97"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#containsProfileOption"><span class="hs-identifier hs-type">containsProfileOption</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-98"></span><span id="containsProfileOption"><span class="annot"><span class="annottext">containsProfileOption :: ProfileOption -&gt; ProfileOptions -&gt; Bool
</span><a href="Agda.Utils.ProfileOptions.html#containsProfileOption"><span class="hs-identifier hs-var hs-var">containsProfileOption</span></a></span></span><span> </span><span id="local-6989586621680744825"><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744825"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-type">ProfileOpts</span></a></span><span> </span><span id="local-6989586621680744824"><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744824"><span class="hs-identifier hs-var">opts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProfileOption -&gt; Set ProfileOption -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.member</span></span><span> </span><span class="annot"><span class="annottext">ProfileOption
</span><a href="#local-6989586621680744825"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744824"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-comment">-- | Use only for serialization.</span><span>
</span><span id="line-101"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#profileOptionsToList"><span class="hs-identifier hs-type">profileOptionsToList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-102"></span><span id="profileOptionsToList"><span class="annot"><span class="annottext">profileOptionsToList :: ProfileOptions -&gt; [ProfileOption]
</span><a href="Agda.Utils.ProfileOptions.html#profileOptionsToList"><span class="hs-identifier hs-var hs-var">profileOptionsToList</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-type">ProfileOpts</span></a></span><span> </span><span id="local-6989586621680744822"><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744822"><span class="hs-identifier hs-var">opts</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; [ProfileOption]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set ProfileOption
</span><a href="#local-6989586621680744822"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Use only for serialization.</span><span>
</span><span id="line-105"></span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#profileOptionsFromList"><span class="hs-identifier hs-type">profileOptionsFromList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOption"><span class="hs-identifier hs-type">ProfileOption</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.ProfileOptions.html#ProfileOptions"><span class="hs-identifier hs-type">ProfileOptions</span></a></span><span>
</span><span id="line-106"></span><span id="profileOptionsFromList"><span class="annot"><span class="annottext">profileOptionsFromList :: [ProfileOption] -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#profileOptionsFromList"><span class="hs-identifier hs-var hs-var">profileOptionsFromList</span></a></span></span><span> </span><span id="local-6989586621680744821"><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744821"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set ProfileOption -&gt; ProfileOptions
</span><a href="Agda.Utils.ProfileOptions.html#ProfileOpts"><span class="hs-identifier hs-var">ProfileOpts</span></a></span><span> </span><span class="annot"><span class="annottext">(Set ProfileOption -&gt; ProfileOptions)
-&gt; Set ProfileOption -&gt; ProfileOptions
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ProfileOption] -&gt; Set ProfileOption
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="annot"><span class="annottext">[ProfileOption]
</span><a href="#local-6989586621680744821"><span class="hs-identifier hs-var">opts</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span></pre></body></html>