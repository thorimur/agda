<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE NondecreasingIndentation #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-comment">{- |  Non-linear matching of the lhs of a rewrite rule against a
      neutral term.

Given a lhs

  &#916; &#8866; lhs : B

and a candidate term

  &#915; &#8866; t : A

we seek a substitution &#915; &#8866; &#963; : &#916; such that

  &#915; &#8866; B[&#963;] = A   and
  &#915; &#8866; lhs[&#963;] = t : A

-}</span><span>
</span><span id="line-20"></span><span>
</span><span id="line-21"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.TypeChecking.Rewriting.NonLinMatch</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sequence</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Applicative</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">Alternative</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">void</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadError</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ExceptT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runExceptT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadState</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StateT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">runStateT</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Fail</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Fail</span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntMap</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntMap</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">IntSet</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.IntSet</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IntSet</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.MetaVars.html"><span class="hs-identifier">Agda.Syntax.Internal.MetaVars</span></a></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html"><span class="hs-identifier">Agda.TypeChecking.Conversion.Pure</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Datatypes.html"><span class="hs-identifier">Agda.TypeChecking.Datatypes</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.html"><span class="hs-identifier">Agda.TypeChecking.Free</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Free.Reduce</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html"><span class="hs-identifier">Agda.TypeChecking.Irrelevance</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html#workOnTypes"><span class="hs-identifier">workOnTypes</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Irrelevance.html#isPropM"><span class="hs-identifier">isPropM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Level.html"><span class="hs-identifier">Agda.TypeChecking.Level</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#constructorForm"><span class="hs-identifier">constructorForm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Records.html"><span class="hs-identifier">Agda.TypeChecking.Records</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Reduce.Monad</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Substitute.html"><span class="hs-identifier">Agda.TypeChecking.Substitute</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Primitive.Cubical.html"><span class="hs-identifier">Agda.TypeChecking.Primitive.Cubical</span></a></span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Monad.html"><span class="hs-identifier">Agda.Utils.Monad</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Size.html"><span class="hs-identifier">Agda.Utils.Size</span></a></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>
</span><span id="line-71"></span><span class="hs-comment">-- | Monad for non-linear matching.</span><span>
</span><span id="line-72"></span><span class="hs-keyword">newtype</span><span> </span><span id="NLM"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-var">NLM</span></a></span></span><span> </span><span id="local-6989586621681070644"><span class="annot"><a href="#local-6989586621681070644"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NLM"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-var">NLM</span></a></span></span><span> </span><span class="hs-special">{</span><span> </span><span id="unNLM"><span class="annot"><span class="annottext">forall a. NLM a -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) a
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#unNLM"><span class="hs-identifier hs-var hs-var">unNLM</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReduceM"><span class="hs-identifier hs-type">ReduceM</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681070644"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span> </span><span id="local-6989586621681070083"><span id="local-6989586621681070089"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b)
-&gt; (forall a b. a -&gt; NLM b -&gt; NLM a) -&gt; Functor NLM
forall a b. a -&gt; NLM b -&gt; NLM a
forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; NLM b -&gt; NLM a
$c&lt;$ :: forall a b. a -&gt; NLM b -&gt; NLM a
fmap :: forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
$cfmap :: forall a b. (a -&gt; b) -&gt; NLM a -&gt; NLM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681070046"><span id="local-6989586621681070052"><span id="local-6989586621681070058"><span id="local-6989586621681070064"><span id="local-6989586621681070071"><span class="annot"><span class="annottext">Functor NLM
Functor NLM
-&gt; (forall a. a -&gt; NLM a)
-&gt; (forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM b)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM a)
-&gt; Applicative NLM
forall a. a -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM b
forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: forall a b. NLM a -&gt; NLM b -&gt; NLM a
$c&lt;* :: forall a b. NLM a -&gt; NLM b -&gt; NLM a
*&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
$c*&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
liftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
$cliftA2 :: forall a b c. (a -&gt; b -&gt; c) -&gt; NLM a -&gt; NLM b -&gt; NLM c
&lt;*&gt; :: forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
$c&lt;*&gt; :: forall a b. NLM (a -&gt; b) -&gt; NLM a -&gt; NLM b
pure :: forall a. a -&gt; NLM a
$cpure :: forall a. a -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681070013"><span id="local-6989586621681070018"><span id="local-6989586621681070024"><span class="annot"><span class="annottext">Applicative NLM
Applicative NLM
-&gt; (forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b)
-&gt; (forall a b. NLM a -&gt; NLM b -&gt; NLM b)
-&gt; (forall a. a -&gt; NLM a)
-&gt; Monad NLM
forall a. a -&gt; NLM a
forall a b. NLM a -&gt; NLM b -&gt; NLM b
forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; NLM a
$creturn :: forall a. a -&gt; NLM a
&gt;&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
$c&gt;&gt; :: forall a b. NLM a -&gt; NLM b -&gt; NLM b
&gt;&gt;= :: forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
$c&gt;&gt;= :: forall a b. NLM a -&gt; (a -&gt; NLM b) -&gt; NLM b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681070002"><span class="annot"><span class="annottext">Monad NLM
Monad NLM -&gt; (forall a. String -&gt; NLM a) -&gt; MonadFail NLM
forall a. String -&gt; NLM a
forall (m :: * -&gt; *).
Monad m -&gt; (forall a. String -&gt; m a) -&gt; MonadFail m
fail :: forall a. String -&gt; NLM a
$cfail :: forall a. String -&gt; NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">Fail.MonadFail</span></span></span><span>
</span><span id="line-74"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069967"><span id="local-6989586621681069974"><span id="local-6989586621681069981"><span id="local-6989586621681069989"><span class="annot"><span class="annottext">Applicative NLM
Applicative NLM
-&gt; (forall a. NLM a)
-&gt; (forall a. NLM a -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. NLM a -&gt; NLM [a])
-&gt; (forall a. NLM a -&gt; NLM [a])
-&gt; Alternative NLM
forall a. NLM a
forall a. NLM a -&gt; NLM [a]
forall a. NLM a -&gt; NLM a -&gt; NLM a
forall (f :: * -&gt; *).
Applicative f
-&gt; (forall a. f a)
-&gt; (forall a. f a -&gt; f a -&gt; f a)
-&gt; (forall a. f a -&gt; f [a])
-&gt; (forall a. f a -&gt; f [a])
-&gt; Alternative f
many :: forall a. NLM a -&gt; NLM [a]
$cmany :: forall a. NLM a -&gt; NLM [a]
some :: forall a. NLM a -&gt; NLM [a]
$csome :: forall a. NLM a -&gt; NLM [a]
&lt;|&gt; :: forall a. NLM a -&gt; NLM a -&gt; NLM a
$c&lt;|&gt; :: forall a. NLM a -&gt; NLM a -&gt; NLM a
empty :: forall a. NLM a
$cempty :: forall a. NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Alternative</span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069928"><span id="local-6989586621681069935"><span class="annot"><span class="annottext">Monad NLM
Alternative NLM
Alternative NLM
-&gt; Monad NLM
-&gt; (forall a. NLM a)
-&gt; (forall a. NLM a -&gt; NLM a -&gt; NLM a)
-&gt; MonadPlus NLM
forall a. NLM a
forall a. NLM a -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
Alternative m
-&gt; Monad m
-&gt; (forall a. m a)
-&gt; (forall a. m a -&gt; m a -&gt; m a)
-&gt; MonadPlus m
mplus :: forall a. NLM a -&gt; NLM a -&gt; NLM a
$cmplus :: forall a. NLM a -&gt; NLM a -&gt; NLM a
mzero :: forall a. NLM a
$cmzero :: forall a. NLM a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadPlus</span></span></span></span><span>
</span><span id="line-75"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069906"><span id="local-6989586621681069912"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069885"><span id="local-6989586621681069890"><span id="local-6989586621681069896"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span></span></span></span><span>
</span><span id="line-76"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069869"><span class="annot"><span class="annottext">Functor NLM
MonadFail NLM
Applicative NLM
Functor NLM
-&gt; Applicative NLM
-&gt; MonadFail NLM
-&gt; (String -&gt; NLM (Maybe (Builtin PrimFun)))
-&gt; HasBuiltins NLM
String -&gt; NLM (Maybe (Builtin PrimFun))
forall (m :: * -&gt; *).
Functor m
-&gt; Applicative m
-&gt; MonadFail m
-&gt; (String -&gt; m (Maybe (Builtin PrimFun)))
-&gt; HasBuiltins m
getBuiltinThing :: String -&gt; NLM (Maybe (Builtin PrimFun))
$cgetBuiltinThing :: String -&gt; NLM (Maybe (Builtin PrimFun))
</span><a href="Agda.TypeChecking.Monad.Builtin.html#C%3AHasBuiltins"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasBuiltins</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069833"><span id="local-6989586621681069838"><span id="local-6989586621681069844"><span class="annot"><span class="annottext">Functor NLM
MonadFail NLM
Applicative NLM
MonadDebug NLM
HasOptions NLM
MonadTCEnv NLM
Functor NLM
-&gt; Applicative NLM
-&gt; MonadFail NLM
-&gt; HasOptions NLM
-&gt; MonadDebug NLM
-&gt; MonadTCEnv NLM
-&gt; (QName -&gt; NLM Definition)
-&gt; (QName -&gt; NLM (Either SigError Definition))
-&gt; (QName -&gt; NLM RewriteRules)
-&gt; HasConstInfo NLM
QName -&gt; NLM RewriteRules
QName -&gt; NLM (Either SigError Definition)
QName -&gt; NLM Definition
forall (m :: * -&gt; *).
Functor m
-&gt; Applicative m
-&gt; MonadFail m
-&gt; HasOptions m
-&gt; MonadDebug m
-&gt; MonadTCEnv m
-&gt; (QName -&gt; m Definition)
-&gt; (QName -&gt; m (Either SigError Definition))
-&gt; (QName -&gt; m RewriteRules)
-&gt; HasConstInfo m
getRewriteRulesFor :: QName -&gt; NLM RewriteRules
$cgetRewriteRulesFor :: QName -&gt; NLM RewriteRules
getConstInfo' :: QName -&gt; NLM (Either SigError Definition)
$cgetConstInfo' :: QName -&gt; NLM (Either SigError Definition)
getConstInfo :: QName -&gt; NLM Definition
$cgetConstInfo :: QName -&gt; NLM Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#C%3AHasConstInfo"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasConstInfo</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069809"><span id="local-6989586621681069815"><span class="annot"><span class="annottext">Monad NLM
Functor NLM
Applicative NLM
NLM PragmaOptions
NLM CommandLineOptions
Functor NLM
-&gt; Applicative NLM
-&gt; Monad NLM
-&gt; NLM PragmaOptions
-&gt; NLM CommandLineOptions
-&gt; HasOptions NLM
forall (m :: * -&gt; *).
Functor m
-&gt; Applicative m
-&gt; Monad m
-&gt; m PragmaOptions
-&gt; m CommandLineOptions
-&gt; HasOptions m
commandLineOptions :: NLM CommandLineOptions
$ccommandLineOptions :: NLM CommandLineOptions
pragmaOptions :: NLM PragmaOptions
$cpragmaOptions :: NLM PragmaOptions
</span><a href="Agda.Interaction.Options.HasOptions.html#C%3AHasOptions"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">HasOptions</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069786"><span id="local-6989586621681069791"><span id="local-6989586621681069797"><span class="annot"><span class="annottext">Monad NLM
NLM TCState
Monad NLM
-&gt; NLM TCState
-&gt; (forall a b. Lens' a TCState -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a)
-&gt; ReadTCState NLM
forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
forall a b. Lens' a TCState -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
forall (m :: * -&gt; *).
Monad m
-&gt; m TCState
-&gt; (forall a b. Lens' a TCState -&gt; (a -&gt; a) -&gt; m b -&gt; m b)
-&gt; (forall a. (TCState -&gt; TCState) -&gt; m a -&gt; m a)
-&gt; ReadTCState m
withTCState :: forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
$cwithTCState :: forall a. (TCState -&gt; TCState) -&gt; NLM a -&gt; NLM a
locallyTCState :: forall a b. Lens' a TCState -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
$clocallyTCState :: forall a b. Lens' a TCState -&gt; (a -&gt; a) -&gt; NLM b -&gt; NLM b
getTCState :: NLM TCState
$cgetTCState :: NLM TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#C%3AReadTCState"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">ReadTCState</span></a></span></span></span></span><span>
</span><span id="line-77"></span><span>           </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069766"><span id="local-6989586621681069772"><span class="annot"><span class="annottext">Monad NLM
NLM TCEnv
Monad NLM
-&gt; NLM TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a)
-&gt; MonadTCEnv NLM
forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
Monad m
-&gt; m TCEnv
-&gt; (forall a. (TCEnv -&gt; TCEnv) -&gt; m a -&gt; m a)
-&gt; MonadTCEnv m
localTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
$clocalTC :: forall a. (TCEnv -&gt; TCEnv) -&gt; NLM a -&gt; NLM a
askTC :: NLM TCEnv
$caskTC :: NLM TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#C%3AMonadTCEnv"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadTCEnv</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069748"><span class="annot"><span class="annottext">Applicative NLM
HasOptions NLM
MonadTCEnv NLM
ReadTCState NLM
Applicative NLM
-&gt; MonadTCEnv NLM
-&gt; ReadTCState NLM
-&gt; HasOptions NLM
-&gt; (forall a. ReduceM a -&gt; NLM a)
-&gt; MonadReduce NLM
forall a. ReduceM a -&gt; NLM a
forall (m :: * -&gt; *).
Applicative m
-&gt; MonadTCEnv m
-&gt; ReadTCState m
-&gt; HasOptions m
-&gt; (forall a. ReduceM a -&gt; m a)
-&gt; MonadReduce m
liftReduce :: forall a. ReduceM a -&gt; NLM a
$cliftReduce :: forall a. ReduceM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#C%3AMonadReduce"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadReduce</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069719"><span id="local-6989586621681069724"><span id="local-6989586621681069729"><span id="local-6989586621681069735"><span class="annot"><span class="annottext">MonadTCEnv NLM
MonadTCEnv NLM
-&gt; (forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a)
-&gt; (forall a.
    Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a)
-&gt; MonadAddContext NLM
forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
forall a. Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
forall (m :: * -&gt; *).
MonadTCEnv m
-&gt; (forall a. Name -&gt; Dom Type -&gt; m a -&gt; m a)
-&gt; (forall a. Name -&gt; Term -&gt; Dom Type -&gt; m a -&gt; m a)
-&gt; (forall a. Substitution -&gt; (Context -&gt; Context) -&gt; m a -&gt; m a)
-&gt; (forall a. Range -&gt; String -&gt; (Name -&gt; m a) -&gt; m a)
-&gt; MonadAddContext m
withFreshName :: forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
$cwithFreshName :: forall a. Range -&gt; String -&gt; (Name -&gt; NLM a) -&gt; NLM a
updateContext :: forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
$cupdateContext :: forall a. Substitution -&gt; (Context -&gt; Context) -&gt; NLM a -&gt; NLM a
addLetBinding' :: forall a. Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
$caddLetBinding' :: forall a. Name -&gt; Term -&gt; Dom Type -&gt; NLM a -&gt; NLM a
addCtx :: forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
$caddCtx :: forall a. Name -&gt; Dom Type -&gt; NLM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Context.html#C%3AMonadAddContext"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadAddContext</span></a></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069669"><span id="local-6989586621681069674"><span id="local-6989586621681069679"><span id="local-6989586621681069684"><span id="local-6989586621681069689"><span id="local-6989586621681069694"><span id="local-6989586621681069700"><span class="annot"><span class="annottext">Monad NLM
Functor NLM
Applicative NLM
NLM Bool
NLM ProfileOptions
NLM Verbosity
Functor NLM
-&gt; Applicative NLM
-&gt; Monad NLM
-&gt; (String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a)
-&gt; NLM Verbosity
-&gt; NLM ProfileOptions
-&gt; NLM Bool
-&gt; (forall a. NLM a -&gt; NLM a)
-&gt; MonadDebug NLM
String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
forall a. NLM a -&gt; NLM a
forall (m :: * -&gt; *).
Functor m
-&gt; Applicative m
-&gt; Monad m
-&gt; (String -&gt; Key -&gt; TCMT IO Doc -&gt; m String)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; m a -&gt; m a)
-&gt; (forall a. String -&gt; Key -&gt; String -&gt; m a -&gt; m a)
-&gt; m Verbosity
-&gt; m ProfileOptions
-&gt; m Bool
-&gt; (forall a. m a -&gt; m a)
-&gt; MonadDebug m
nowDebugPrinting :: forall a. NLM a -&gt; NLM a
$cnowDebugPrinting :: forall a. NLM a -&gt; NLM a
isDebugPrinting :: NLM Bool
$cisDebugPrinting :: NLM Bool
getProfileOptions :: NLM ProfileOptions
$cgetProfileOptions :: NLM ProfileOptions
getVerbosity :: NLM Verbosity
$cgetVerbosity :: NLM Verbosity
verboseBracket :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
$cverboseBracket :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
traceDebugMessage :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
$ctraceDebugMessage :: forall a. String -&gt; Key -&gt; String -&gt; NLM a -&gt; NLM a
formatDebugMessage :: String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
$cformatDebugMessage :: String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM String
</span><a href="Agda.TypeChecking.Monad.Debug.html#C%3AMonadDebug"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">MonadDebug</span></a></span></span></span></span></span></span></span></span><span>
</span><span id="line-78"></span><span>           </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MonadDebug NLM
MonadTCEnv NLM
MonadReduce NLM
ReadTCState NLM
MonadAddContext NLM
HasBuiltins NLM
HasConstInfo NLM
HasBuiltins NLM
-&gt; HasConstInfo NLM
-&gt; MonadAddContext NLM
-&gt; MonadDebug NLM
-&gt; MonadReduce NLM
-&gt; MonadTCEnv NLM
-&gt; ReadTCState NLM
-&gt; PureTCM NLM
forall (m :: * -&gt; *).
HasBuiltins m
-&gt; HasConstInfo m
-&gt; MonadAddContext m
-&gt; MonadDebug m
-&gt; MonadReduce m
-&gt; MonadTCEnv m
-&gt; ReadTCState m
-&gt; PureTCM m
</span><a href="Agda.TypeChecking.Monad.Pure.html#C%3APureTCM"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">PureTCM</span></a></span><span>
</span><span id="line-79"></span><span>           </span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621681069633"><span class="annot"><span class="annottext">patternViolation :: forall a. Blocker -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var hs-var hs-var hs-var">patternViolation</span></a></span></span><span> </span><span id="local-6989586621681069631"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681069631"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM a) -&gt; Blocked_ -&gt; NLM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; () -&gt; Blocked_
forall t a. Blocker -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-var">Blocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681069631"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>  </span><span id="local-6989586621681069626"><span class="annot"><span class="annottext">catchPatternErr :: forall a. (Blocker -&gt; NLM a) -&gt; NLM a -&gt; NLM a
</span><a href="Agda.TypeChecking.Monad.Base.html#catchPatternErr"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchPatternErr</span></a></span></span><span> </span><span id="local-6989586621681069624"><span class="annot"><span class="annottext">Blocker -&gt; NLM a
</span><a href="#local-6989586621681069624"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681069623"><span class="annot"><span class="annottext">NLM a
</span><a href="#local-6989586621681069623"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLM a -&gt; (Blocked_ -&gt; NLM a) -&gt; NLM a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">catchError</span></span><span> </span><span class="annot"><span class="annottext">NLM a
</span><a href="#local-6989586621681069623"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Blocked_ -&gt; NLM a) -&gt; NLM a) -&gt; (Blocked_ -&gt; NLM a) -&gt; NLM a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-type">Blocked</span></a></span><span> </span><span id="local-6989586621681069621"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681069621"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; NLM a
</span><a href="#local-6989586621681069624"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681069621"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-85"></span><span>    </span><span id="local-6989586621681069620"><span class="annot"><span class="annottext">err :: Blocked_
</span><a href="#local-6989586621681069620"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-type">NotBlocked</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069620"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-86"></span><span>
</span><span id="line-87"></span><span class="hs-keyword">data</span><span> </span><span id="NLMState"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-var">NLMState</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NLMState"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-var">NLMState</span></a></span></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_nlmSub"><span class="annot"><span class="annottext">NLMState -&gt; Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var hs-var">_nlmSub</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="_nlmEqs"><span class="annot"><span class="annottext">NLMState -&gt; PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var hs-var">_nlmEqs</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#Null"><span class="hs-identifier hs-type">Null</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>  </span><span id="local-6989586621681069607"><span class="annot"><span class="annottext">empty :: NLMState
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_nlmSub :: Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_nlmEqs :: PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-94"></span><span>  </span><span id="local-6989586621681069603"><span class="annot"><span class="annottext">null :: NLMState -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var hs-var hs-var hs-var">null</span></a></span></span><span> </span><span id="local-6989586621681069601"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069601"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069601"><span class="hs-identifier hs-var">s</span></a></span><span class="annot"><span class="annottext">NLMState -&gt; Lens' Sub NLMState -&gt; Sub
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">PostponedEquations -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069601"><span class="hs-identifier hs-var">s</span></a></span><span class="annot"><span class="annottext">NLMState -&gt; Lens' PostponedEquations NLMState -&gt; PostponedEquations
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Lens' PostponedEquations NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-type">nlmSub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span>
</span><span id="line-97"></span><span id="nlmSub"><span class="annot"><span class="annottext">nlmSub :: Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var hs-var">nlmSub</span></a></span></span><span> </span><span id="local-6989586621681069590"><span class="annot"><span class="annottext">Sub -&gt; f Sub
</span><a href="#local-6989586621681069590"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681069589"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069589"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub -&gt; f Sub
</span><a href="#local-6989586621681069590"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState -&gt; Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069589"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f Sub -&gt; (Sub -&gt; NLMState) -&gt; f NLMState
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681069587"><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681069587"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069589"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_nlmSub :: Sub
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmSub"><span class="hs-identifier hs-var">_nlmSub</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681069587"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-98"></span><span>
</span><span id="line-99"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-type">nlmEqs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html#Lens%27"><span class="hs-identifier hs-type">Lens'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span>
</span><span id="line-100"></span><span id="nlmEqs"><span class="annot"><span class="annottext">nlmEqs :: Lens' PostponedEquations NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var hs-var">nlmEqs</span></a></span></span><span> </span><span id="local-6989586621681069584"><span class="annot"><span class="annottext">PostponedEquations -&gt; f PostponedEquations
</span><a href="#local-6989586621681069584"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681069583"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069583"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations -&gt; f PostponedEquations
</span><a href="#local-6989586621681069584"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLMState -&gt; PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069583"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">f PostponedEquations
-&gt; (PostponedEquations -&gt; NLMState) -&gt; f NLMState
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#%3C%26%3E"><span class="hs-operator hs-var">&lt;&amp;&gt;</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681069582"><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681069582"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069583"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_nlmEqs :: PostponedEquations
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#_nlmEqs"><span class="hs-identifier hs-var">_nlmEqs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681069582"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621681070427"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-type">runNLM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-type">MonadReduce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070427"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070427"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLMState"><span class="hs-identifier hs-type">NLMState</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-103"></span><span id="runNLM"><span class="annot"><span class="annottext">runNLM :: forall (m :: * -&gt; *).
MonadReduce m =&gt;
NLM () -&gt; m (Either Blocked_ NLMState)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-var hs-var">runNLM</span></a></span></span><span> </span><span id="local-6989586621681069570"><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069570"><span class="hs-identifier hs-var">nlm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681069569"><span class="annot"><span class="annottext">Either Blocked_ ()
</span><a href="#local-6989586621681069569"><span class="hs-identifier hs-var">ok</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681069568"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069568"><span class="hs-identifier hs-var">out</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReduceM (Either Blocked_ (), NLMState)
-&gt; m (Either Blocked_ (), NLMState)
forall (m :: * -&gt; *) a. MonadReduce m =&gt; ReduceM a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftReduce"><span class="hs-identifier hs-var">liftReduce</span></a></span><span> </span><span class="annot"><span class="annottext">(ReduceM (Either Blocked_ (), NLMState)
 -&gt; m (Either Blocked_ (), NLMState))
-&gt; ReduceM (Either Blocked_ (), NLMState)
-&gt; m (Either Blocked_ (), NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">StateT NLMState ReduceM (Either Blocked_ ())
-&gt; NLMState -&gt; ReduceM (Either Blocked_ (), NLMState)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT Blocked_ (StateT NLMState ReduceM) ()
-&gt; StateT NLMState ReduceM (Either Blocked_ ())
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">(ExceptT Blocked_ (StateT NLMState ReduceM) ()
 -&gt; StateT NLMState ReduceM (Either Blocked_ ()))
-&gt; ExceptT Blocked_ (StateT NLMState ReduceM) ()
-&gt; StateT NLMState ReduceM (Either Blocked_ ())
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLM () -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) ()
forall a. NLM a -&gt; ExceptT Blocked_ (StateT NLMState ReduceM) a
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#unNLM"><span class="hs-identifier hs-var">unNLM</span></a></span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069570"><span class="hs-identifier hs-var">nlm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLMState
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ ()
</span><a href="#local-6989586621681069569"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681069566"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069566"><span class="hs-identifier hs-var">block</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState))
-&gt; Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Either Blocked_ NLMState
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069566"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState))
-&gt; Either Blocked_ NLMState -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLMState -&gt; Either Blocked_ NLMState
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681069568"><span class="hs-identifier hs-var">out</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-type">matchingBlocked</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span id="matchingBlocked"><span class="annot"><span class="annottext">matchingBlocked :: Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var hs-var">matchingBlocked</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Add substitution @i |-&gt; v : a@ to result of matching.</span><span>
</span><span id="line-113"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-type">tellSub</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span id="tellSub"><span class="annot"><span class="annottext">tellSub :: Relevance -&gt; Key -&gt; Type -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-var hs-var">tellSub</span></a></span></span><span> </span><span id="local-6989586621681069563"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069563"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069562"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681069562"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681069561"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069561"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681069560"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069560"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-115"></span><span>  </span><span id="local-6989586621681069559"><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><a href="#local-6989586621681069559"><span class="hs-identifier hs-var">old</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Sub -&gt; Maybe (Relevance, Term)
forall a. Key -&gt; IntMap a -&gt; Maybe a
</span><span class="hs-identifier hs-var">IntMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681069562"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; Maybe (Relevance, Term))
-&gt; NLM Sub -&gt; NLM (Maybe (Relevance, Term))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState -&gt; NLM Sub
forall o (m :: * -&gt; *) i. MonadState o m =&gt; Lens' i o -&gt; m i
</span><a href="Agda.Utils.Lens.html#use"><span class="hs-identifier hs-var">use</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><a href="#local-6989586621681069559"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-117"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState -&gt; (Sub -&gt; Sub) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' i o -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; (Relevance, Term) -&gt; Sub -&gt; Sub
forall a. Key -&gt; a -&gt; IntMap a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.insert</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681069562"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069563"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069560"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-118"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069549"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069549"><span class="hs-identifier hs-var">r'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681069548"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069548"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069563"><span class="hs-identifier hs-var">r</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Bool
forall a. LensRelevance a =&gt; a -&gt; Bool
</span><a href="Agda.Syntax.Common.html#isIrrelevant"><span class="hs-identifier hs-var">isIrrelevant</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069549"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Sub NLMState -&gt; (Sub -&gt; Sub) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' i o -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; (Relevance, Term) -&gt; Sub -&gt; Sub
forall a. Key -&gt; a -&gt; IntMap a -&gt; IntMap a
</span><span class="hs-identifier hs-var">IntMap.insert</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681069562"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069563"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069560"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM (Maybe Blocked_) -&gt; (Blocked_ -&gt; NLM ()) -&gt; NLM ()
forall (m :: * -&gt; *) a.
Monad m =&gt;
m (Maybe a) -&gt; (a -&gt; m ()) -&gt; m ()
</span><a href="Agda.Utils.Maybe.html#whenJustM"><span class="hs-identifier hs-var">whenJustM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; NLM (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var">equal</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069561"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069560"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069548"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-type">tellEq</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span id="tellEq"><span class="annot"><span class="annottext">tellEq :: Telescope -&gt; Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-var hs-var">tellEq</span></a></span></span><span> </span><span id="local-6989586621681069541"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069541"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069540"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069540"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681069539"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069539"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681069538"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069538"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681069537"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069537"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-126"></span><span>               </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;adding equality between&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069541"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069540"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069538"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>               </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069540"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069537"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-128"></span><span>  </span><span class="annot"><span class="annottext">Lens' PostponedEquations NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' PostponedEquations NLMState
-&gt; (PostponedEquations -&gt; PostponedEquations) -&gt; NLM ()
forall o (m :: * -&gt; *) i.
MonadState o m =&gt;
Lens' i o -&gt; (i -&gt; i) -&gt; m ()
</span><a href="Agda.Utils.Lens.html#%25%3D"><span class="hs-operator hs-var">%=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; PostponedEquation
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069540"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069539"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069538"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069537"><span class="hs-identifier hs-var">v</span></a></span><span class="annot"><span class="annottext">PostponedEquation -&gt; PostponedEquations -&gt; PostponedEquations
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span class="hs-keyword">type</span><span> </span><span id="Sub"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-var">Sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | Matching against a term produces a constraint</span><span>
</span><span id="line-133"></span><span class="hs-comment">--   which we have to verify after applying</span><span>
</span><span id="line-134"></span><span class="hs-comment">--   the substitution computed by matching.</span><span>
</span><span id="line-135"></span><span class="hs-keyword">data</span><span> </span><span id="PostponedEquation"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PostponedEquation"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-var">PostponedEquation</span></a></span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="eqFreeVars"><span class="annot"><span class="annottext">PostponedEquation -&gt; Telescope
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqFreeVars"><span class="hs-identifier hs-var hs-var">eqFreeVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-comment">-- ^ Telescope of free variables in the equation</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqType"><span class="annot"><span class="annottext">PostponedEquation -&gt; Type
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqType"><span class="hs-identifier hs-var hs-var">eqType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span>    </span><span class="hs-comment">-- ^ Type of the equation, living in same context as the rhs.</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqLhs"><span class="annot"><span class="annottext">PostponedEquation -&gt; Term
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqLhs"><span class="hs-identifier hs-var hs-var">eqLhs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>     </span><span class="hs-comment">-- ^ Term from pattern, living in pattern context.</span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="eqRhs"><span class="annot"><span class="annottext">PostponedEquation -&gt; Term
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#eqRhs"><span class="hs-identifier hs-var hs-var">eqRhs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span>     </span><span class="hs-comment">-- ^ Term from scrutinee, living in context where matching was invoked.</span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-141"></span><span class="hs-keyword">type</span><span> </span><span id="PostponedEquations"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-var">PostponedEquations</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-type">PostponedEquation</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-comment">-- | Match a non-linear pattern against a neutral term,</span><span>
</span><span id="line-144"></span><span class="hs-comment">--   returning a substitution.</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span class="hs-keyword">class</span><span> </span><span id="Match"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-var">Match</span></a></span></span><span> </span><span id="local-6989586621681070380"><span class="annot"><a href="#local-6989586621681070380"><span class="hs-identifier hs-type">t</span></a></span></span><span> </span><span id="local-6989586621681070379"><span class="annot"><a href="#local-6989586621681070379"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621681070378"><span class="annot"><a href="#local-6989586621681070378"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-147"></span><span>  </span><span id="match"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-type">match</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#Relevance"><span class="hs-identifier hs-type">Relevance</span></a></span><span>  </span><span class="hs-comment">-- ^ Are we currently matching in an irrelevant context?</span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>  </span><span class="hs-comment">-- ^ The telescope of pattern variables</span><span>
</span><span id="line-149"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>  </span><span class="hs-comment">-- ^ The telescope of lambda-bound variables</span><span>
</span><span id="line-150"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070380"><span class="hs-identifier hs-type">t</span></a></span><span>          </span><span class="hs-comment">-- ^ The type of the pattern</span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070379"><span class="hs-identifier hs-type">a</span></a></span><span>          </span><span class="hs-comment">-- ^ The pattern to match</span><span>
</span><span id="line-152"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070378"><span class="hs-identifier hs-type">b</span></a></span><span>          </span><span class="hs-comment">-- ^ The term to be matched against the pattern</span><span>
</span><span id="line-153"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#NLM"><span class="hs-identifier hs-type">NLM</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681070375"><span id="local-6989586621681070376"><span id="local-6989586621681070377"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070377"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070376"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070375"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070377"><span class="hs-identifier hs-type">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070376"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-type">Arg</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070375"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621681069515"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; Dom t -&gt; Arg a -&gt; Arg b -&gt; NLM ()
</span><a href="#local-6989586621681069515"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069514"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069514"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069513"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069513"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069512"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069512"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681069511"><span class="annot"><span class="annottext">Dom t
</span><a href="#local-6989586621681069511"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681069510"><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681069510"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681069509"><span class="annot"><span class="annottext">Arg b
</span><a href="#local-6989586621681069509"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069508"><span class="annot"><span class="annottext">r' :: Relevance
</span><a href="#local-6989586621681069508"><span class="hs-identifier hs-var hs-var">r'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069514"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Relevance
</span><a href="Agda.Syntax.Common.html#composeRelevance"><span class="hs-operator hs-var">`composeRelevance`</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a -&gt; Relevance
forall a. LensRelevance a =&gt; a -&gt; Relevance
</span><a href="Agda.Syntax.Common.html#getRelevance"><span class="hs-identifier hs-var">getRelevance</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681069510"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-157"></span><span>                          </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069508"><span class="hs-identifier hs-var">r'</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069513"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069512"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom t -&gt; t
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom t
</span><a href="#local-6989586621681069511"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg a -&gt; a
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg a
</span><a href="#local-6989586621681069510"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg b -&gt; b
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg b
</span><a href="#local-6989586621681069509"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Elim%27"><span class="hs-identifier hs-type">Elim'</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Elims"><span class="hs-identifier hs-type">Elims</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>  </span><span id="local-6989586621681069376"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
</span><a href="#local-6989586621681069376"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069375"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069375"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069374"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069374"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069373"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069373"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069372"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069372"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069371"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069371"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681069370"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069370"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069369"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069369"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069368"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069368"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069367"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069367"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069366"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069366"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681069364"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069364"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069363"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069363"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069362"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069362"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069361"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069361"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069360"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069360"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>  </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span id="local-6989586621681069359"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069358"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069357"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069356"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069356"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681069355"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069355"><span class="hs-identifier hs-var">hd</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069354"><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681069354"><span class="hs-identifier hs-var">p</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681069353"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681069353"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681069352"><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681069352"><span class="hs-identifier hs-var">v</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681069351"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681069351"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-164"></span><span>   </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">50</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-165"></span><span>     </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching elimination &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681069354"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with               &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681069352"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  eliminating head   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; TCMT IO Doc) -&gt; Term -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069355"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069356"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-168"></span><span>   </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat
</span><a href="#local-6989586621681069354"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elim
</span><a href="#local-6989586621681069352"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621681069349"><span class="annot"><span class="annottext">Arg NLPat
</span><a href="#local-6989586621681069349"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span> </span><span id="local-6989586621681069348"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069348"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; NLM Term -&gt; NLM Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Term -&gt; NLM Term) -&gt; NLM Term -&gt; NLM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Term) -&gt; NLM Type -&gt; NLM Term
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069356"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM Term -&gt; (Term -&gt; NLM ()) -&gt; NLM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-170"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681069344"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681069344"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681069343"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681069343"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; Dom Type
-&gt; Arg NLPat
-&gt; Arg Term
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681069344"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Arg NLPat
</span><a href="#local-6989586621681069349"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069348"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-172"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069342"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681069342"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; SubstArg Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-identifier hs-var">absApp</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681069343"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069348"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>            </span><span id="local-6989586621681069340"><span class="annot"><span class="annottext">hd' :: Elims -&gt; Term
</span><a href="#local-6989586621681069340"><span class="hs-identifier hs-var hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069355"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; (Elims -&gt; Elims) -&gt; Elims -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069348"><span class="hs-identifier hs-var">v</span></a></span><span class="annot"><span class="annottext">Elim -&gt; Elims -&gt; Elims
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069342"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069340"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681069353"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681069351"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-175"></span><span>      </span><span id="local-6989586621681069338"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069338"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span>
</span><span id="line-176"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;application at non-pi type (possible non-confluence?) &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069338"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621681069335"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069335"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681069334"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069334"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span id="local-6989586621681069333"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069333"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span> </span><span id="local-6989586621681069332"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069332"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681069331"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069331"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681069330"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069330"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; NLM PathView -&gt; NLM PathView
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM PathView -&gt; NLM PathView) -&gt; NLM PathView -&gt; NLM PathView
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM PathView
forall (m :: * -&gt; *). HasBuiltins m =&gt; Type -&gt; m PathView
</span><a href="Agda.TypeChecking.Monad.Builtin.html#pathView"><span class="hs-identifier hs-var">pathView</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NLM PathView) -&gt; NLM Type -&gt; NLM PathView
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069356"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM PathView -&gt; (PathView -&gt; NLM ()) -&gt; NLM ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-179"></span><span>      </span><span class="annot"><a href="Agda.Syntax.Internal.html#PathType"><span class="hs-identifier hs-type">PathType</span></a></span><span> </span><span id="local-6989586621681069326"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069326"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681069325"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069325"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span id="local-6989586621681069324"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069324"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681069323"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069323"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621681069322"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069322"><span class="hs-identifier hs-var">_u</span></a></span></span><span> </span><span id="local-6989586621681069321"><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069321"><span class="hs-identifier hs-var">_v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-180"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681069320"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069320"><span class="hs-identifier hs-var">interval</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr NLM Type -&gt; NLM (Either TCErr Type)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr NLM Type
forall (m :: * -&gt; *).
(HasBuiltins m, MonadError TCErr m, MonadTCEnv m, ReadTCState m) =&gt;
m Type
</span><a href="Agda.TypeChecking.Primitive.Cubical.html#primIntervalType"><span class="hs-identifier hs-var">primIntervalType</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069320"><span class="hs-identifier hs-var">interval</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069333"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069330"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-182"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069318"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681069318"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069326"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; Term -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Term
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Term
</span><a href="#local-6989586621681069323"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069330"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-183"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069314"><span class="annot"><span class="annottext">hd' :: Elims -&gt; Term
</span><a href="#local-6989586621681069314"><span class="hs-identifier hs-var hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069355"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="annot"><span class="annottext">(Elims -&gt; Term) -&gt; (Elims -&gt; Elims) -&gt; Elims -&gt; Term
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term -&gt; Elim
forall a. a -&gt; a -&gt; a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-var">IApply</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069332"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069331"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069330"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Elim -&gt; Elims -&gt; Elims
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>        </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069318"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069314"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681069353"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681069351"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-185"></span><span>      </span><span id="local-6989586621681069313"><span class="annot"><span class="annottext">PathView
</span><a href="#local-6989586621681069313"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span>
</span><span id="line-186"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;interval application at non-pi type (possible non-confluence?) &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PathView -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Builtin.html#pathUnview"><span class="hs-identifier hs-var">pathUnview</span></a></span><span> </span><span class="annot"><span class="annottext">PathView
</span><a href="#local-6989586621681069313"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span id="local-6989586621681069310"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681069310"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span id="local-6989586621681069309"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069309"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span id="local-6989586621681069308"><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681069308"><span class="hs-identifier hs-var">o'</span></a></span></span><span> </span><span id="local-6989586621681069307"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069307"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069309"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069307"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681069306"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681069306"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681069305"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681069305"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Maybe Type) -&gt; NLM (Maybe Type)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe Type) -&gt; NLM (Maybe Type))
-&gt; NLM (Maybe Type) -&gt; NLM (Maybe Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Type -&gt; NLM (Maybe Type)
forall (m :: * -&gt; *). PureTCM m =&gt; QName -&gt; Type -&gt; m (Maybe Type)
</span><a href="Agda.TypeChecking.Records.html#getDefType"><span class="hs-identifier hs-var">getDefType</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069309"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; NLM (Maybe Type)) -&gt; NLM Type -&gt; NLM (Maybe Type)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM Type
forall a (m :: * -&gt; *). (Reduce a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#reduce"><span class="hs-identifier hs-var">reduce</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069356"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069303"><span class="annot"><span class="annottext">u :: Term
</span><a href="#local-6989586621681069303"><span class="hs-identifier hs-var hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069355"><span class="hs-identifier hs-var">hd</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>          </span><span id="local-6989586621681069302"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681069302"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681069305"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type -&gt; SubstArg Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; SubstArg a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absApp"><span class="hs-operator hs-var">`absApp`</span></a></span><span> </span><span class="annot"><span class="annottext">Term
SubstArg Type
</span><a href="#local-6989586621681069303"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span id="local-6989586621681069301"><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069301"><span class="hs-identifier hs-var">hd'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term))
-&gt; NLM (Elims -&gt; Term) -&gt; NLM (Elims -&gt; Term)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-identifier hs-var">applyE</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Elims -&gt; Term) -&gt; NLM Term -&gt; NLM (Elims -&gt; Term)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Arg Term -&gt; NLM Term
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
ProjOrigin -&gt; QName -&gt; Arg Term -&gt; m Term
</span><a href="Agda.TypeChecking.Monad.Signature.html#applyDef"><span class="hs-identifier hs-var">applyDef</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="#local-6989586621681069310"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069309"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; Arg Type
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681069306"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Arg Type -&gt; Term -&gt; Arg Term
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; b -&gt; f b
</span><span class="hs-operator hs-var">$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069303"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>      </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069359"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069358"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069357"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069302"><span class="hs-identifier hs-var">t'</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Elims -&gt; Term
</span><a href="#local-6989586621681069301"><span class="hs-identifier hs-var">hd'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681069353"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681069351"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681069296"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069296"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681069295"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069295"><span class="hs-identifier hs-var">f'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">20</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between projections &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069296"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681069295"><span class="hs-identifier hs-var">f'</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall (m :: * -&gt; *) a. MonadPlus m =&gt; m a
</span><span class="hs-identifier hs-var">mzero</span></span><span>
</span><span id="line-199"></span><span>
</span><span id="line-200"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-type">Proj</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-type">Apply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Elim
</span><span class="hs-identifier">_</span></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Elim' NLPat
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-type">IApply</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-comment">-- TODO</span><span>
</span><span id="line-205"></span><span>
</span><span id="line-206"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681070317"><span id="local-6989586621681070318"><span id="local-6989586621681070319"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070319"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070318"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070317"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070319"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070318"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Dom"><span class="hs-identifier hs-type">Dom</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070317"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-207"></span><span>  </span><span id="local-6989586621681069289"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; t -&gt; Dom a -&gt; Dom b -&gt; NLM ()
</span><a href="#local-6989586621681069289"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069288"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069288"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069287"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069287"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069286"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069286"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681069285"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681069285"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681069284"><span class="annot"><span class="annottext">Dom a
</span><a href="#local-6989586621681069284"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681069283"><span class="annot"><span class="annottext">Dom b
</span><a href="#local-6989586621681069283"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069288"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069287"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069286"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681069285"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom a -&gt; a
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom a
</span><a href="#local-6989586621681069284"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom b -&gt; b
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">Dom b
</span><a href="#local-6989586621681069283"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPType"><span class="hs-identifier hs-type">NLPType</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-210"></span><span>  </span><span id="local-6989586621681069273"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPType -&gt; Type -&gt; NLM ()
</span><a href="#local-6989586621681069273"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069272"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069272"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069271"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069271"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069270"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069270"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPType"><span class="hs-identifier hs-type">NLPType</span></a></span><span> </span><span id="local-6989586621681069268"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681069268"><span class="hs-identifier hs-var">sp</span></a></span></span><span> </span><span id="local-6989586621681069267"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069267"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-type">El</span></a></span><span> </span><span id="local-6989586621681069266"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069266"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681069265"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069265"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasOptions m, MonadDebug m) =&gt;
m a -&gt; m a
</span><a href="Agda.TypeChecking.Irrelevance.html#workOnTypes"><span class="hs-identifier hs-var">workOnTypes</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPSort -&gt; Sort -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069272"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069271"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069270"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681069268"><span class="hs-identifier hs-var">sp</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069266"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069272"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069271"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069270"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#sort"><span class="hs-identifier hs-var">sort</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069266"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069267"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069265"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPSort"><span class="hs-identifier hs-type">NLPSort</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-215"></span><span>  </span><span id="local-6989586621681069228"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPSort -&gt; Sort -&gt; NLM ()
</span><a href="#local-6989586621681069228"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069227"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069227"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069226"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069226"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069225"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681069224"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681069224"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681069223"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069223"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-216"></span><span>    </span><span id="local-6989586621681069222"><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681069222"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Blocked Sort) -&gt; NLM (Blocked Sort)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Blocked Sort) -&gt; NLM (Blocked Sort))
-&gt; NLM (Blocked Sort) -&gt; NLM (Blocked Sort)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; NLM (Blocked Sort)
forall a (m :: * -&gt; *).
(Reduce a, MonadReduce m) =&gt;
a -&gt; m (Blocked a)
</span><a href="Agda.TypeChecking.Reduce.html#reduceB"><span class="hs-identifier hs-var">reduceB</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069223"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681069220"><span class="annot"><span class="annottext">b :: Blocked_
</span><a href="#local-6989586621681069220"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked Sort -&gt; Blocked_
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681069222"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-218"></span><span>        </span><span id="local-6989586621681069219"><span class="annot"><span class="annottext">s :: Sort
</span><a href="#local-6989586621681069219"><span class="hs-identifier hs-var hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked Sort -&gt; Sort
forall t a. Blocked' t a -&gt; a
</span><a href="Agda.Syntax.Internal.Blockers.html#ignoreBlocking"><span class="hs-identifier hs-var">ignoreBlocking</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked Sort
</span><a href="#local-6989586621681069222"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621681069216"><span class="annot"><span class="annottext">yes :: NLM ()
</span><a href="#local-6989586621681069216"><span class="hs-identifier hs-var hs-var">yes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>        </span><span id="local-6989586621681069215"><span class="annot"><span class="annottext">no :: NLM ()
</span><a href="#local-6989586621681069215"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-222"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching pattern &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069226"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681069224"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with sort      &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sort -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069219"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681069224"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681069219"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-225"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PType"><span class="hs-identifier hs-type">PType</span></a></span><span> </span><span id="local-6989586621681069213"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069213"><span class="hs-identifier hs-var">lp</span></a></span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span id="local-6989586621681069211"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069211"><span class="hs-identifier hs-var">l</span></a></span></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPat -&gt; Level' Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069227"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069226"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069213"><span class="hs-identifier hs-var">lp</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069211"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PProp"><span class="hs-identifier hs-type">PProp</span></a></span><span> </span><span id="local-6989586621681069209"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069209"><span class="hs-identifier hs-var">lp</span></a></span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Prop"><span class="hs-identifier hs-type">Prop</span></a></span><span> </span><span id="local-6989586621681069207"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069207"><span class="hs-identifier hs-var">l</span></a></span></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPat -&gt; Level' Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069227"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069226"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069209"><span class="hs-identifier hs-var">lp</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069207"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-227"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PSSet"><span class="hs-identifier hs-type">PSSet</span></a></span><span> </span><span id="local-6989586621681069205"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069205"><span class="hs-identifier hs-var">lp</span></a></span></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#SSet"><span class="hs-identifier hs-type">SSet</span></a></span><span> </span><span id="local-6989586621681069203"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069203"><span class="hs-identifier hs-var">l</span></a></span></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPat -&gt; Level' Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069227"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069226"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069225"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069205"><span class="hs-identifier hs-var">lp</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069203"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-228"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PInf"><span class="hs-identifier hs-type">PInf</span></a></span><span> </span><span id="local-6989586621681069201"><span class="annot"><span class="annottext">IsFibrant
</span><a href="#local-6989586621681069201"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621681069200"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681069200"><span class="hs-identifier hs-var">np</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Inf"><span class="hs-identifier hs-type">Inf</span></a></span><span> </span><span id="local-6989586621681069198"><span class="annot"><span class="annottext">IsFibrant
</span><a href="#local-6989586621681069198"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681069197"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681069197"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>        </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">IsFibrant
</span><a href="#local-6989586621681069201"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">IsFibrant -&gt; IsFibrant -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">IsFibrant
</span><a href="#local-6989586621681069198"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681069200"><span class="hs-identifier hs-var">np</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621681069197"><span class="hs-identifier hs-var">n</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069216"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PSizeUniv"><span class="hs-identifier hs-var">PSizeUniv</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#SizeUniv"><span class="hs-identifier hs-var">SizeUniv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069216"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-231"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PLockUniv"><span class="hs-identifier hs-var">PLockUniv</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#LockUniv"><span class="hs-identifier hs-var">LockUniv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069216"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-232"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><a href="Agda.TypeChecking.Monad.Base.html#PIntervalUniv"><span class="hs-identifier hs-var">PIntervalUniv</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="Agda.Syntax.Internal.html#IntervalUniv"><span class="hs-identifier hs-var">IntervalUniv</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069216"><span class="hs-identifier hs-var">yes</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-comment">-- blocked cases</span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#UnivSort"><span class="hs-identifier hs-type">UnivSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069220"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#PiSort"><span class="hs-identifier hs-type">PiSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069220"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-237"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#FunSort"><span class="hs-identifier hs-type">FunSort</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681069220"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-238"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaS"><span class="hs-identifier hs-type">MetaS</span></a></span><span> </span><span id="local-6989586621681069186"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681069186"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">Elims
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocked_
forall t. MetaId -&gt; Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#blocked_"><span class="hs-identifier hs-var">blocked_</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681069186"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-239"></span><span>
</span><span id="line-240"></span><span>      </span><span class="hs-comment">-- all other cases do not match</span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPSort
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Sort
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681069215"><span class="hs-identifier hs-var">no</span></a></span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Level"><span class="hs-identifier hs-type">Level</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>  </span><span id="local-6989586621681069174"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPat -&gt; Level' Term -&gt; NLM ()
</span><a href="#local-6989586621681069174"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681069173"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069173"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681069172"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069172"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681069171"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069171"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span class="annot"><span class="annottext">()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681069170"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069170"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681069169"><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069169"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-245"></span><span>    </span><span id="local-6989586621681069168"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069168"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Term -&gt; Type
forall t a. Sort' t -&gt; a -&gt; Type'' t a
</span><a href="Agda.Syntax.Internal.html#El"><span class="hs-identifier hs-var">El</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Sort
</span><a href="Agda.Syntax.Internal.html#mkType"><span class="hs-identifier hs-var">mkType</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Type) -&gt; (Maybe Term -&gt; Term) -&gt; Maybe Term -&gt; Type
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term -&gt; Term
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Term
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Term -&gt; Type) -&gt; NLM (Maybe Term) -&gt; NLM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; NLM (Maybe Term)
forall (m :: * -&gt; *). HasBuiltins m =&gt; String -&gt; m (Maybe Term)
</span><a href="Agda.TypeChecking.Monad.Builtin.html#getBuiltin%27"><span class="hs-identifier hs-var">getBuiltin'</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="Agda.Syntax.Builtin.html#builtinLevel"><span class="hs-identifier hs-var">builtinLevel</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span id="local-6989586621681069163"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069163"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Level' Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Level' Term -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#reallyUnLevelView"><span class="hs-identifier hs-var">reallyUnLevelView</span></a></span><span> </span><span class="annot"><span class="annottext">Level' Term
</span><a href="#local-6989586621681069169"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681069173"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069172"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681069171"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681069168"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681069170"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681069163"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-248"></span><span>
</span><span id="line-249"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#NLPat"><span class="hs-identifier hs-type">NLPat</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>  </span><span id="local-6989586621681068898"><span class="annot"><span class="annottext">match :: Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
</span><a href="#local-6989586621681068898"><span class="hs-identifier hs-var hs-var hs-var hs-var">match</span></a></span></span><span> </span><span id="local-6989586621681068897"><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068897"><span class="hs-identifier hs-var">r0</span></a></span></span><span> </span><span id="local-6989586621681068896"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681068895"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681068894"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068894"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681068893"><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068893"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681068892"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068892"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-251"></span><span>    </span><span id="local-6989586621681068891"><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681068891"><span class="hs-identifier hs-var">vbt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type)))
-&gt; NLM (Blocked (Term, Type)) -&gt; NLM (Blocked (Term, Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Term, Type) -&gt; NLM (Blocked (Term, Type))
forall a (m :: * -&gt; *).
(Reduce a, MonadReduce m) =&gt;
a -&gt; m (Blocked a)
</span><a href="Agda.TypeChecking.Reduce.html#reduceB"><span class="hs-identifier hs-var">reduceB</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068892"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068894"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068890"><span class="annot"><span class="annottext">n :: Key
</span><a href="#local-6989586621681068890"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-253"></span><span>        </span><span id="local-6989586621681068888"><span class="annot"><span class="annottext">b :: Blocked_
</span><a href="#local-6989586621681068888"><span class="hs-identifier hs-var hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type) -&gt; Blocked_
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681068891"><span class="hs-identifier hs-var">vbt</span></a></span><span>
</span><span id="line-254"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681068887"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681068886"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type) -&gt; (Term, Type)
forall t a. Blocked' t a -&gt; a
</span><a href="Agda.Syntax.Internal.Blockers.html#ignoreBlocking"><span class="hs-identifier hs-var">ignoreBlocking</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked (Term, Type)
</span><a href="#local-6989586621681068891"><span class="hs-identifier hs-var">vbt</span></a></span><span>
</span><span id="line-255"></span><span>        </span><span id="local-6989586621681068885"><span class="annot"><span class="annottext">prettyPat :: TCMT IO Doc
</span><a href="#local-6989586621681068885"><span class="hs-identifier hs-var hs-var">prettyPat</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPat -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068893"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>        </span><span id="local-6989586621681068883"><span class="annot"><span class="annottext">prettyTerm :: TCMT IO Doc
</span><a href="#local-6989586621681068883"><span class="hs-identifier hs-var hs-var">prettyTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-257"></span><span>        </span><span id="local-6989586621681068882"><span class="annot"><span class="annottext">prettyType :: TCMT IO Doc
</span><a href="#local-6989586621681068882"><span class="hs-identifier hs-var hs-var">prettyType</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *) a. ReadTCState m =&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Options.html#withShowAllArguments"><span class="hs-identifier hs-var">withShowAllArguments</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO Doc) -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-258"></span><span>    </span><span id="local-6989586621681068881"><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681068881"><span class="hs-identifier hs-var">etaRecord</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args)))
-&gt; NLM (Maybe (QName, Args)) -&gt; NLM (Maybe (QName, Args))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; NLM (Maybe (QName, Args))
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
Type -&gt; m (Maybe (QName, Args))
</span><a href="Agda.TypeChecking.Records.html#isEtaRecordType"><span class="hs-identifier hs-var">isEtaRecordType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-259"></span><span>    </span><span id="local-6989586621681068879"><span class="annot"><span class="annottext">Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type
</span><a href="#local-6989586621681068879"><span class="hs-identifier hs-var">pview</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">NLM (Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type)
forall (m :: * -&gt; *).
HasBuiltins m =&gt;
m (Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type)
</span><a href="Agda.TypeChecking.Telescope.html#pathViewAsPi%27whnf"><span class="hs-identifier hs-var">pathViewAsPi'whnf</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span id="local-6989586621681068877"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681068877"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Blocker -&gt; Bool) -&gt; Either Blocker Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; Either a b -&gt; b
</span><a href="Agda.Utils.Either.html#fromRight"><span class="hs-identifier hs-var">fromRight</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Either Blocker Bool -&gt; Bool)
-&gt; (BlockT NLM Bool -&gt; NLM (Either Blocker Bool))
-&gt; BlockT NLM Bool
-&gt; NLM Bool
forall (m :: * -&gt; *) b c a.
Functor m =&gt;
(b -&gt; c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><a href="Agda.Utils.Functor.html#%3C.%3E"><span class="hs-operator hs-var">&lt;.&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">BlockT NLM Bool -&gt; NLM (Either Blocker Bool)
forall (m :: * -&gt; *) a.
Monad m =&gt;
BlockT m a -&gt; m (Either Blocker a)
</span><a href="Agda.TypeChecking.Monad.Base.html#runBlocked"><span class="hs-identifier hs-var">runBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockT NLM Bool -&gt; NLM (Either Blocker Bool))
-&gt; (BlockT NLM Bool -&gt; BlockT NLM Bool)
-&gt; BlockT NLM Bool
-&gt; NLM (Either Blocker Bool)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; BlockT NLM Bool -&gt; BlockT NLM Bool
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(BlockT NLM Bool -&gt; NLM Bool) -&gt; BlockT NLM Bool -&gt; NLM Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; BlockT NLM Bool
forall a (m :: * -&gt; *).
(LensSort a, PrettyTCM a, PureTCM m, MonadBlock m) =&gt;
a -&gt; m Bool
</span><a href="Agda.TypeChecking.Irrelevance.html#isPropM"><span class="hs-identifier hs-var">isPropM</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068873"><span class="annot"><span class="annottext">r :: Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681068877"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068897"><span class="hs-identifier hs-var">r0</span></a></span><span>
</span><span id="line-262"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-263"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching pattern &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068885"><span class="hs-identifier hs-var">prettyPat</span></a></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  with term      &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068883"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span>
</span><span id="line-265"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  of type        &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068882"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">80</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-267"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw pattern:  &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLPat -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068893"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-268"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw term:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;  raw type:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">70</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#vcat"><span class="hs-identifier hs-var">vcat</span></a></span><span>
</span><span id="line-271"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;pattern vars:   &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span>
</span><span id="line-272"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;bound vars:     &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068867"><span class="annot"><span class="annottext">yes :: NLM ()
</span><a href="#local-6989586621681068867"><span class="hs-identifier hs-var hs-var">yes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; NLM ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>        </span><span id="local-6989586621681068866"><span class="annot"><span class="annottext">no :: TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681068866"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span> </span><span id="local-6989586621681068865"><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068865"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681068867"><span class="hs-identifier hs-var">yes</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-275"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-276"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068885"><span class="hs-identifier hs-var">prettyPat</span></a></span><span>
</span><span id="line-277"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068883"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span>
</span><span id="line-278"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; of type &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068882"><span class="hs-identifier hs-var">prettyType</span></a></span><span>
</span><span id="line-279"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><a href="#local-6989586621681068865"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-280"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-281"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking tag from reduction: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068888"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-282"></span><span>          </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068888"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span id="local-6989586621681068864"><span class="annot"><span class="annottext">block :: Blocked_ -&gt; NLM ()
</span><a href="#local-6989586621681068864"><span class="hs-identifier hs-var hs-var">block</span></a></span></span><span> </span><span id="local-6989586621681068863"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068863"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Relevance -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">NLM ()
</span><a href="#local-6989586621681068867"><span class="hs-identifier hs-var">yes</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-284"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-285"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching blocked on meta&quot;</span></span><span>
</span><span id="line-286"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068863"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>          </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-288"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking tag from reduction: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_ -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068863"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-289"></span><span>          </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068888"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Blocked_ -&gt; Blocked_
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068863"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-290"></span><span>        </span><span id="local-6989586621681068862"><span class="annot"><span class="annottext">maybeBlock :: Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var hs-var">maybeBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-291"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#MetaV"><span class="hs-identifier hs-type">MetaV</span></a></span><span> </span><span id="local-6989586621681068860"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681068860"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681068859"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068859"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#matchingBlocked"><span class="hs-identifier hs-var">matchingBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; NLM ()) -&gt; Blocked_ -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocked_
forall t. MetaId -&gt; Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#blocked_"><span class="hs-identifier hs-var">blocked_</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681068860"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-292"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681068866"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068893"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-294"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PVar"><span class="hs-identifier hs-type">PVar</span></a></span><span> </span><span id="local-6989586621681068857"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068857"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681068856"><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681068856"><span class="hs-identifier hs-var">bvs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PVar: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068857"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-295"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681068855"><span class="hs-identifier hs-type">allowedVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span>
</span><span id="line-296"></span><span>            </span><span id="local-6989586621681068855"><span class="annot"><span class="annottext">allowedVars :: IntSet
</span><a href="#local-6989586621681068855"><span class="hs-identifier hs-var hs-var">allowedVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Key -&gt; Key) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Key -&gt; Key
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681068856"><span class="hs-identifier hs-var">bvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-297"></span><span>            </span><span class="annot"><a href="#local-6989586621681068853"><span class="hs-identifier hs-type">badVars</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span>
</span><span id="line-298"></span><span>            </span><span id="local-6989586621681068853"><span class="annot"><span class="annottext">badVars :: IntSet
</span><a href="#local-6989586621681068853"><span class="hs-identifier hs-var hs-var">badVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; IntSet -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.difference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Key] -&gt; IntSet
</span><span class="hs-identifier hs-var">IntSet.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; [Key]
forall a. Integral a =&gt; a -&gt; [a]
</span><a href="Agda.Utils.List.html#downFrom"><span class="hs-identifier hs-var">downFrom</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068890"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681068855"><span class="hs-identifier hs-var">allowedVars</span></a></span><span>
</span><span id="line-299"></span><span>            </span><span class="annot"><a href="#local-6989586621681068850"><span class="hs-identifier hs-type">perm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#Permutation"><span class="hs-identifier hs-type">Permutation</span></a></span><span>
</span><span id="line-300"></span><span>            </span><span id="local-6989586621681068850"><span class="annot"><span class="annottext">perm :: Permutation
</span><a href="#local-6989586621681068850"><span class="hs-identifier hs-var hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Key] -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#Perm"><span class="hs-identifier hs-var">Perm</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068890"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">([Key] -&gt; Permutation) -&gt; [Key] -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Key] -&gt; [Key]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Key] -&gt; [Key]) -&gt; [Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Arg Key -&gt; Key) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Key -&gt; Key
forall e. Arg e -&gt; e
</span><a href="Agda.Syntax.Common.html#unArg"><span class="hs-identifier hs-var">unArg</span></a></span><span> </span><span class="annot"><span class="annottext">([Arg Key] -&gt; [Key]) -&gt; [Arg Key] -&gt; [Key]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Arg Key]
</span><a href="#local-6989586621681068856"><span class="hs-identifier hs-var">bvs</span></a></span><span>
</span><span id="line-301"></span><span>            </span><span class="annot"><a href="#local-6989586621681068847"><span class="hs-identifier hs-type">tel</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span>
</span><span id="line-302"></span><span>            </span><span id="local-6989586621681068847"><span class="annot"><span class="annottext">tel :: Telescope
</span><a href="#local-6989586621681068847"><span class="hs-identifier hs-var hs-var">tel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; Telescope -&gt; Telescope
</span><a href="Agda.TypeChecking.Telescope.html#permuteTel"><span class="hs-identifier hs-var">permuteTel</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681068850"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span>
</span><span id="line-303"></span><span>        </span><span id="local-6989586621681068845"><span class="annot"><span class="annottext">Either Blocked_ (Maybe Term)
</span><a href="#local-6989586621681068845"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Either Blocked_ (Maybe Term))
-&gt; NLM (Either Blocked_ (Maybe Term))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Either Blocked_ (Maybe Term))
 -&gt; NLM (Either Blocked_ (Maybe Term)))
-&gt; NLM (Either Blocked_ (Maybe Term))
-&gt; NLM (Either Blocked_ (Maybe Term))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; Term -&gt; NLM (Either Blocked_ (Maybe Term))
forall (m :: * -&gt; *) a.
(MonadReduce m, Reduce a, ForceNotFree a) =&gt;
IntSet -&gt; a -&gt; m (Either Blocked_ (Maybe a))
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#reallyFree"><span class="hs-identifier hs-var">reallyFree</span></a></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681068853"><span class="hs-identifier hs-var">badVars</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-304"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ (Maybe Term)
</span><a href="#local-6989586621681068845"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-305"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681068843"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068843"><span class="hs-identifier hs-var">b</span></a></span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; NLM ()
</span><a href="#local-6989586621681068864"><span class="hs-identifier hs-var">block</span></a></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068843"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-306"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; NLM ()
</span><a href="#local-6989586621681068866"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-307"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681068842"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068842"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-308"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068841"><span class="annot"><span class="annottext">t' :: Type
</span><a href="#local-6989586621681068841"><span class="hs-identifier hs-var hs-var">t'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Type -&gt; Type
</span><a href="Agda.TypeChecking.Substitute.html#telePi"><span class="hs-identifier hs-var">telePi</span></a></span><span>  </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068847"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; Type) -&gt; Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Permutation -&gt; Type -&gt; Type
forall a. Subst a =&gt; Impossible -&gt; Permutation -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#renameP"><span class="hs-identifier hs-var">renameP</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681068850"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-309"></span><span>                </span><span id="local-6989586621681068837"><span class="annot"><span class="annottext">v' :: Term
</span><a href="#local-6989586621681068837"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Term -&gt; Term
</span><a href="Agda.TypeChecking.Substitute.html#teleLam"><span class="hs-identifier hs-var">teleLam</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068847"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Term) -&gt; Term -&gt; Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Impossible -&gt; Permutation -&gt; Term -&gt; Term
forall a. Subst a =&gt; Impossible -&gt; Permutation -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.html#renameP"><span class="hs-identifier hs-var">renameP</span></a></span><span> </span><span class="annot"><span class="annottext">Impossible
HasCallStack =&gt; Impossible
</span><a href="Agda.Utils.Impossible.html#impossible"><span class="hs-identifier hs-var">impossible</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><a href="#local-6989586621681068850"><span class="hs-identifier hs-var">perm</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068842"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-310"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Key -&gt; Type -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellSub"><span class="hs-identifier hs-var">tellSub</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068857"><span class="hs-identifier hs-var">i</span></a></span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068890"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068841"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068837"><span class="hs-identifier hs-var">v'</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-type">PDef</span></a></span><span> </span><span id="local-6989586621681068834"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681068833"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PDef: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-313"></span><span>        </span><span id="local-6989586621681068832"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068832"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Term -&gt; NLM Term
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Term -&gt; NLM Term) -&gt; NLM Term -&gt; NLM Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Reduce.Monad.html#constructorForm"><span class="hs-identifier hs-var">constructorForm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLM Term) -&gt; NLM Term -&gt; NLM Term
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM Term
forall (m :: * -&gt; *). HasBuiltins m =&gt; Term -&gt; m Term
</span><a href="Agda.TypeChecking.Level.html#unLevel"><span class="hs-identifier hs-var">unLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-314"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068832"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-315"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621681068828"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068828"><span class="hs-identifier hs-var">f'</span></a></span></span><span> </span><span id="local-6989586621681068827"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068827"><span class="hs-identifier hs-var">es</span></a></span></span><span>
</span><span id="line-316"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068828"><span class="hs-identifier hs-var">f'</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-317"></span><span>                </span><span id="local-6989586621681068826"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068826"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Type -&gt; NLM Type
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Type -&gt; NLM Type) -&gt; NLM Type -&gt; NLM Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; NLM Definition -&gt; NLM Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-318"></span><span>                </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068826"><span class="hs-identifier hs-var">ft</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-var">Def</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068827"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-319"></span><span>          </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span id="local-6989586621681068822"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068822"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681068821"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068821"><span class="hs-identifier hs-var">ci</span></a></span></span><span> </span><span id="local-6989586621681068820"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068820"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-320"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068822"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-321"></span><span>                </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068818"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068818"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe ((QName, Type, Args), Type))
 -&gt; NLM (Maybe ((QName, Type, Args), Type)))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068822"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-322"></span><span>                </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068818"><span class="hs-identifier hs-var">ct</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068822"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068821"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068820"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-323"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681068816"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068816"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068815"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068815"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068814"><span class="annot"><span class="annottext">ai :: ArgInfo
</span><a href="#local-6989586621681068814"><span class="hs-identifier hs-var hs-var">ai</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068816"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-325"></span><span>                </span><span id="local-6989586621681068812"><span class="annot"><span class="annottext">pbody :: NLPat
</span><a href="#local-6989586621681068812"><span class="hs-identifier hs-var hs-var">pbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-var">PDef</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">([Elim' NLPat] -&gt; NLPat) -&gt; [Elim' NLPat] -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; Arg NLPat -&gt; Elim' NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; NLPat -&gt; Arg NLPat
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681068814"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(NLPat -&gt; Arg NLPat) -&gt; NLPat -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-var">PTerm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLPat) -&gt; Term -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-326"></span><span>                </span><span id="local-6989586621681068807"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681068807"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068832"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068816"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-327"></span><span>                </span><span id="local-6989586621681068806"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681068806"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068816"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068815"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-328"></span><span>            </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068806"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068815"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068812"><span class="hs-identifier hs-var">pbody</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068807"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-329"></span><span>          </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681068801"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068801"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068800"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068800"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681068881"><span class="hs-identifier hs-var">etaRecord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-330"></span><span>          </span><span class="hs-comment">-- If v is not of record constructor form but we are matching at record</span><span>
</span><span id="line-331"></span><span>          </span><span class="hs-comment">-- type, e.g., we eta-expand both v to (c vs) and</span><span>
</span><span id="line-332"></span><span>          </span><span class="hs-comment">-- the pattern (p = PDef f ps) to @c (p .f1) ... (p .fn)@.</span><span>
</span><span id="line-333"></span><span>            </span><span id="local-6989586621681068799"><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068799"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Defn -&gt; NLM Defn
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Defn -&gt; NLM Defn) -&gt; NLM Defn -&gt; NLM Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Defn) -&gt; NLM Definition -&gt; NLM Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068801"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-334"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681068797"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068797"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068796"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068796"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068795"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068795"><span class="hs-identifier hs-var">ci</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068794"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068794"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Telescope, ConHead, ConInfo, Args)
 -&gt; NLM (Telescope, ConHead, ConInfo, Args))
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; m (Telescope, ConHead, ConInfo, Args)
</span><a href="Agda.TypeChecking.Records.html#etaExpandRecord_"><span class="hs-identifier hs-var">etaExpandRecord_</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068801"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068800"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068799"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068832"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-335"></span><span>            </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068792"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068792"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe ((QName, Type, Args), Type))
 -&gt; NLM (Maybe ((QName, Type, Args), Type)))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068796"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-336"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068791"><span class="annot"><span class="annottext">flds :: [Arg QName]
</span><a href="#local-6989586621681068791"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">([Dom QName] -&gt; [Arg QName]) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">recFields</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068799"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-337"></span><span>                </span><span id="local-6989586621681068789"><span class="annot"><span class="annottext">mkField :: QName -&gt; NLPat
</span><a href="#local-6989586621681068789"><span class="hs-identifier hs-var hs-var">mkField</span></a></span></span><span> </span><span id="local-6989586621681068788"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068788"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QName -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PDef"><span class="hs-identifier hs-var">PDef</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' NLPat
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068788"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>                </span><span class="hs-comment">-- Issue #3335: when matching against the record constructor,</span><span>
</span><span id="line-339"></span><span>                </span><span class="hs-comment">-- don't add projections but take record field directly.</span><span>
</span><span id="line-340"></span><span>                </span><span id="local-6989586621681068786"><span class="annot"><span class="annottext">ps' :: [Elim' NLPat]
</span><a href="#local-6989586621681068786"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>
</span><span id="line-341"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068796"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068834"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068833"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-342"></span><span>                  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; Elim' NLPat) -&gt; [Arg QName] -&gt; [Elim' NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat)
-&gt; (Arg QName -&gt; Arg NLPat) -&gt; Arg QName -&gt; Elim' NLPat
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLPat
</span><a href="#local-6989586621681068789"><span class="hs-identifier hs-var">mkField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681068791"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-343"></span><span>            </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068792"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068796"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068795"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068786"><span class="hs-identifier hs-var">ps'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068794"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>          </span><span id="local-6989586621681068785"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068785"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068785"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-345"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PLam"><span class="hs-identifier hs-type">PLam</span></a></span><span> </span><span id="local-6989586621681068783"><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681068783"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681068782"><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681068782"><span class="hs-identifier hs-var">p'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-346"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681068781"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068781"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068780"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068780"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-347"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068779"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681068779"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681068783"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-348"></span><span>              </span><span id="local-6989586621681068778"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681068778"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068781"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068780"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-349"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068778"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068780"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPat -&gt; NLPat
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681068782"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068779"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681068777"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068777"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681068776"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068776"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-special">(</span><span id="local-6989586621681068775"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068775"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681068774"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068774"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Either ((Dom Type, Abs Type), (Term, Term)) Type
</span><a href="#local-6989586621681068879"><span class="hs-identifier hs-var">pview</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068773"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681068773"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Elims -&gt; Term
forall t. Apply t =&gt; t -&gt; Elims -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#applyE"><span class="hs-operator hs-var">`applyE`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term -&gt; Term -&gt; Elim
forall a. a -&gt; a -&gt; a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#IApply"><span class="hs-identifier hs-var">IApply</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068775"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068774"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Elim) -&gt; Term -&gt; Elim
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-352"></span><span>              </span><span id="local-6989586621681068772"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681068772"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068777"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;i&quot;</span></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068772"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068776"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPat -&gt; NLPat
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPat
</span><a href="#local-6989586621681068782"><span class="hs-identifier hs-var">p'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068773"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-354"></span><span>        </span><span id="local-6989586621681068771"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068771"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068771"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-355"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PPi"><span class="hs-identifier hs-type">PPi</span></a></span><span> </span><span id="local-6989586621681068769"><span class="annot"><span class="annottext">Dom NLPType
</span><a href="#local-6989586621681068769"><span class="hs-identifier hs-var">pa</span></a></span></span><span> </span><span id="local-6989586621681068768"><span class="annot"><span class="annottext">Abs NLPType
</span><a href="#local-6989586621681068768"><span class="hs-identifier hs-var">pb</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681068767"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068767"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068766"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068766"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-357"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; ()
-&gt; Dom NLPType
-&gt; Dom Type
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Dom NLPType
</span><a href="#local-6989586621681068769"><span class="hs-identifier hs-var">pa</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068767"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-358"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068765"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681068765"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068767"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068766"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPType -&gt; Type -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068765"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs NLPType -&gt; NLPType
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs NLPType
</span><a href="#local-6989586621681068768"><span class="hs-identifier hs-var">pb</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068766"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>        </span><span id="local-6989586621681068764"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068764"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068764"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PSort"><span class="hs-identifier hs-type">PSort</span></a></span><span> </span><span id="local-6989586621681068762"><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681068762"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-362"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Sort"><span class="hs-identifier hs-type">Sort</span></a></span><span> </span><span id="local-6989586621681068760"><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681068760"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; () -&gt; NLPSort -&gt; Sort -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPSort
</span><a href="#local-6989586621681068762"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Sort
</span><a href="#local-6989586621681068760"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-363"></span><span>        </span><span id="local-6989586621681068759"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068759"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068759"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-364"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-type">PBoundVar</span></a></span><span> </span><span id="local-6989586621681068757"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681068756"><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068756"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-365"></span><span>        </span><span class="annot"><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-type">Var</span></a></span><span> </span><span id="local-6989586621681068754"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068754"><span class="hs-identifier hs-var">i'</span></a></span></span><span> </span><span id="local-6989586621681068753"><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068753"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068754"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-366"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068752"><span class="annot"><span class="annottext">ti :: Type
</span><a href="#local-6989586621681068752"><span class="hs-identifier hs-var hs-var">ti</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Type
forall t e. Dom' t e -&gt; e
</span><a href="Agda.Syntax.Internal.html#unDom"><span class="hs-identifier hs-var">unDom</span></a></span><span> </span><span class="annot"><span class="annottext">(Dom Type -&gt; Type) -&gt; Dom Type -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; [Dom Type] -&gt; Key -&gt; Dom Type
forall a. a -&gt; [a] -&gt; Key -&gt; a
</span><a href="Agda.Utils.List.html#indexWithDefault"><span class="hs-identifier hs-var">indexWithDefault</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; [Dom Type]
forall a. TermSubst a =&gt; Tele (Dom a) -&gt; [Dom a]
</span><a href="Agda.TypeChecking.Telescope.html#flattenTel"><span class="hs-identifier hs-var">flattenTel</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-367"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068752"><span class="hs-identifier hs-var">ti</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Var"><span class="hs-identifier hs-var">Var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068756"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Elims
</span><a href="#local-6989586621681068753"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-368"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Pi"><span class="hs-identifier hs-type">Pi</span></a></span><span> </span><span id="local-6989586621681068749"><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068749"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068748"><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068748"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term
forall t a. Type'' t a -&gt; a
</span><a href="Agda.Syntax.Internal.html#unEl"><span class="hs-identifier hs-var">unEl</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-369"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068747"><span class="annot"><span class="annottext">ai :: ArgInfo
</span><a href="#local-6989586621681068747"><span class="hs-identifier hs-var hs-var">ai</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; ArgInfo
forall t e. Dom' t e -&gt; ArgInfo
</span><a href="Agda.Syntax.Internal.html#domInfo"><span class="hs-identifier hs-var">domInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068749"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-370"></span><span>              </span><span id="local-6989586621681068746"><span class="annot"><span class="annottext">pbody :: NLPat
</span><a href="#local-6989586621681068746"><span class="hs-identifier hs-var hs-var">pbody</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-var">PBoundVar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Elim' NLPat] -&gt; NLPat) -&gt; [Elim' NLPat] -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068756"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; Arg NLPat -&gt; Elim' NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; NLPat -&gt; Arg NLPat
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681068747"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(NLPat -&gt; Arg NLPat) -&gt; NLPat -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-var">PTerm</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; NLPat) -&gt; Term -&gt; NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-371"></span><span>              </span><span id="local-6989586621681068744"><span class="annot"><span class="annottext">body :: Term
</span><a href="#local-6989586621681068744"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term -&gt; Term
forall a. Subst a =&gt; Key -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#raise"><span class="hs-identifier hs-var">raise</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Args -&gt; Term
forall t. Apply t =&gt; t -&gt; Args -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#apply"><span class="hs-operator hs-var">`apply`</span></a></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">ArgInfo -&gt; Term -&gt; Arg Term
forall e. ArgInfo -&gt; e -&gt; Arg e
</span><a href="Agda.Syntax.Common.html#Arg"><span class="hs-identifier hs-var">Arg</span></a></span><span> </span><span class="annot"><span class="annottext">ArgInfo
</span><a href="#local-6989586621681068747"><span class="hs-identifier hs-var">ai</span></a></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Arg Term) -&gt; Term -&gt; Arg Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Term
</span><a href="Agda.Syntax.Internal.html#var"><span class="hs-identifier hs-var">var</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-372"></span><span>              </span><span id="local-6989586621681068743"><span class="annot"><span class="annottext">k' :: Telescope
</span><a href="#local-6989586621681068743"><span class="hs-identifier hs-var hs-var">k'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dom Type -&gt; Abs Telescope -&gt; Telescope
forall a. a -&gt; Abs (Tele a) -&gt; Tele a
</span><a href="Agda.Syntax.Internal.html#ExtendTel"><span class="hs-identifier hs-var">ExtendTel</span></a></span><span> </span><span class="annot"><span class="annottext">Dom Type
</span><a href="#local-6989586621681068749"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Telescope -&gt; Abs Telescope
forall a. String -&gt; a -&gt; Abs a
</span><a href="Agda.Syntax.Internal.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; String
forall a. Abs a -&gt; String
</span><a href="Agda.Syntax.Internal.html#absName"><span class="hs-identifier hs-var">absName</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068748"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope -&gt; Telescope -&gt; Type -&gt; NLPat -&gt; Term -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068743"><span class="hs-identifier hs-var">k'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Abs Type -&gt; Type
forall a. Subst a =&gt; Abs a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#absBody"><span class="hs-identifier hs-var">absBody</span></a></span><span> </span><span class="annot"><span class="annottext">Abs Type
</span><a href="#local-6989586621681068748"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NLPat
</span><a href="#local-6989586621681068746"><span class="hs-identifier hs-var">pbody</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068744"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-374"></span><span>        </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681068742"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068742"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068741"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068741"><span class="hs-identifier hs-var">pars</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Args)
</span><a href="#local-6989586621681068881"><span class="hs-identifier hs-var">etaRecord</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-375"></span><span>          </span><span id="local-6989586621681068740"><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068740"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; NLM Defn -&gt; NLM Defn
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM Defn -&gt; NLM Defn) -&gt; NLM Defn -&gt; NLM Defn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Defn) -&gt; NLM Definition -&gt; NLM Defn
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; NLM Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068742"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-376"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681068739"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068739"><span class="hs-identifier hs-var">tel</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068738"><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068738"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068737"><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068737"><span class="hs-identifier hs-var">ci</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068736"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068736"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Telescope, ConHead, ConInfo, Args)
 -&gt; NLM (Telescope, ConHead, ConInfo, Args))
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
-&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; NLM (Telescope, ConHead, ConInfo, Args)
forall (m :: * -&gt; *).
HasConstInfo m =&gt;
QName
-&gt; Args -&gt; Defn -&gt; Term -&gt; m (Telescope, ConHead, ConInfo, Args)
</span><a href="Agda.TypeChecking.Records.html#etaExpandRecord_"><span class="hs-identifier hs-var">etaExpandRecord_</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068742"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068741"><span class="hs-identifier hs-var">pars</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068740"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-377"></span><span>          </span><span class="hs-glyph">~</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName, Type, Args)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068735"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068735"><span class="hs-identifier hs-var">ct</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM (Maybe ((QName, Type, Args), Type))
 -&gt; NLM (Maybe ((QName, Type, Args), Type)))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
-&gt; NLM (Maybe ((QName, Type, Args), Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; Type -&gt; NLM (Maybe ((QName, Type, Args), Type))
forall (m :: * -&gt; *).
PureTCM m =&gt;
ConHead -&gt; Type -&gt; m (Maybe ((QName, Type, Args), Type))
</span><a href="Agda.TypeChecking.Datatypes.html#getFullyAppliedConType"><span class="hs-identifier hs-var">getFullyAppliedConType</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068738"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-378"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068734"><span class="annot"><span class="annottext">flds :: [Arg QName]
</span><a href="#local-6989586621681068734"><span class="hs-identifier hs-var hs-var">flds</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Dom QName -&gt; Arg QName) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Dom QName -&gt; Arg QName
forall t a. Dom' t a -&gt; Arg a
</span><a href="Agda.Syntax.Internal.html#argFromDom"><span class="hs-identifier hs-var">argFromDom</span></a></span><span> </span><span class="annot"><span class="annottext">([Dom QName] -&gt; [Arg QName]) -&gt; [Dom QName] -&gt; [Arg QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Defn -&gt; [Dom QName]
</span><a href="Agda.TypeChecking.Monad.Base.html#recFields"><span class="hs-identifier hs-var">recFields</span></a></span><span> </span><span class="annot"><span class="annottext">Defn
</span><a href="#local-6989586621681068740"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-379"></span><span>              </span><span id="local-6989586621681068733"><span class="annot"><span class="annottext">ps' :: [Arg NLPat]
</span><a href="#local-6989586621681068733"><span class="hs-identifier hs-var hs-var">ps'</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Arg QName -&gt; Arg NLPat) -&gt; [Arg QName] -&gt; [Arg NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat)
-&gt; (QName -&gt; NLPat) -&gt; Arg QName -&gt; Arg NLPat
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681068732"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068732"><span class="hs-identifier hs-var">fld</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Key -&gt; [Elim' NLPat] -&gt; NLPat
</span><a href="Agda.TypeChecking.Monad.Base.html#PBoundVar"><span class="hs-identifier hs-var">PBoundVar</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068757"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Elim' NLPat]
</span><a href="#local-6989586621681068756"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Elim' NLPat] -&gt; [Elim' NLPat] -&gt; [Elim' NLPat]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ProjOrigin -&gt; QName -&gt; Elim' NLPat
forall a. ProjOrigin -&gt; QName -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Proj"><span class="hs-identifier hs-var">Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><a href="Agda.Syntax.Common.html#ProjSystem"><span class="hs-identifier hs-var">ProjSystem</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068732"><span class="hs-identifier hs-var">fld</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg QName]
</span><a href="#local-6989586621681068734"><span class="hs-identifier hs-var">flds</span></a></span><span>
</span><span id="line-380"></span><span>          </span><span class="annot"><span class="annottext">Relevance
-&gt; Telescope
-&gt; Telescope
-&gt; (Type, Elims -&gt; Term)
-&gt; [Elim' NLPat]
-&gt; Elims
-&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="#local-6989586621681068873"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068735"><span class="hs-identifier hs-var">ct</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConHead -&gt; ConInfo -&gt; Elims -&gt; Term
</span><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-var">Con</span></a></span><span> </span><span class="annot"><span class="annottext">ConHead
</span><a href="#local-6989586621681068738"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><a href="#local-6989586621681068737"><span class="hs-identifier hs-var">ci</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg NLPat -&gt; Elim' NLPat) -&gt; [Arg NLPat] -&gt; [Elim' NLPat]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg NLPat -&gt; Elim' NLPat
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">[Arg NLPat]
</span><a href="#local-6989586621681068733"><span class="hs-identifier hs-var">ps'</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Arg Term -&gt; Elim) -&gt; Args -&gt; Elims
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Arg Term -&gt; Elim
forall a. Arg a -&gt; Elim' a
</span><a href="Agda.Syntax.Internal.Elim.html#Apply"><span class="hs-identifier hs-var">Apply</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068736"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>        </span><span id="local-6989586621681068731"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068731"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; NLM ()
</span><a href="#local-6989586621681068862"><span class="hs-identifier hs-var">maybeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068731"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PTerm"><span class="hs-identifier hs-type">PTerm</span></a></span><span> </span><span id="local-6989586621681068730"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068730"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; NLM () -&gt; NLM ()
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">60</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching a PTerm&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Telescope
forall t. Abstract t =&gt; Telescope -&gt; t -&gt; t
</span><a href="Agda.TypeChecking.Substitute.Class.html#abstract"><span class="hs-operator hs-var">`abstract`</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068730"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; NLM ()) -&gt; NLM () -&gt; NLM ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-383"></span><span>        </span><span class="annot"><span class="annottext">Telescope -&gt; Telescope -&gt; Type -&gt; Term -&gt; Term -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#tellEq"><span class="hs-identifier hs-var">tellEq</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068896"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068895"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068886"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068730"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068887"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- Checks if the given term contains any free variables that satisfy the</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- given condition on their DBI, possibly reducing the term in the process.</span><span>
</span><span id="line-387"></span><span class="hs-comment">-- Returns `Right Nothing` if there are such variables, `Right (Just v')`</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- if there are none (where v' is the possibly reduced version of the given</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- term) or `Left b` if the problem is blocked on a meta.</span><span>
</span><span id="line-390"></span><span id="local-6989586621681070261"><span id="local-6989586621681070262"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#reallyFree"><span class="hs-identifier hs-type">reallyFree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-type">MonadReduce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070262"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#Reduce"><span class="hs-identifier hs-type">Reduce</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070261"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#ForceNotFree"><span class="hs-identifier hs-type">ForceNotFree</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070261"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IntSet</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070261"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070262"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681070261"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-392"></span><span id="reallyFree"><span class="annot"><span class="annottext">reallyFree :: forall (m :: * -&gt; *) a.
(MonadReduce m, Reduce a, ForceNotFree a) =&gt;
IntSet -&gt; a -&gt; m (Either Blocked_ (Maybe a))
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#reallyFree"><span class="hs-identifier hs-var hs-var">reallyFree</span></a></span></span><span> </span><span id="local-6989586621681068711"><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681068711"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621681068710"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068710"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621681068709"><span class="annot"><span class="annottext">IntMap IsFree
</span><a href="#local-6989586621681068709"><span class="hs-identifier hs-var">mxs</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068708"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068708"><span class="hs-identifier hs-var">v'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IntSet -&gt; a -&gt; m (IntMap IsFree, a)
forall a (m :: * -&gt; *).
(ForceNotFree a, Reduce a, MonadReduce m) =&gt;
IntSet -&gt; a -&gt; m (IntMap IsFree, a)
</span><a href="Agda.TypeChecking.Free.Reduce.html#forceNotFree"><span class="hs-identifier hs-var">forceNotFree</span></a></span><span> </span><span class="annot"><span class="annottext">IntSet
</span><a href="#local-6989586621681068711"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068710"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(IsFree -&gt; IsFree -&gt; IsFree) -&gt; IsFree -&gt; IntMap IsFree -&gt; IsFree
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; IntMap a -&gt; b
</span><span class="hs-identifier hs-var">IntMap.foldr</span></span><span> </span><span class="annot"><span class="annottext">IsFree -&gt; IsFree -&gt; IsFree
</span><a href="#local-6989586621681068705"><span class="hs-identifier hs-var">pickFree</span></a></span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="Agda.TypeChecking.Free.Reduce.html#NotFree"><span class="hs-identifier hs-var">NotFree</span></a></span><span> </span><span class="annot"><span class="annottext">IntMap IsFree
</span><a href="#local-6989586621681068709"><span class="hs-identifier hs-var">mxs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#MaybeFree"><span class="hs-identifier hs-type">MaybeFree</span></a></span><span> </span><span id="local-6989586621681068702"><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068702"><span class="hs-identifier hs-var">ms</span></a></span></span><span>
</span><span id="line-396"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">MetaSet -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068702"><span class="hs-identifier hs-var">ms</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a)))
-&gt; Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Either Blocked_ (Maybe a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-397"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a)))
-&gt; Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Either Blocked_ (Maybe a)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; Either Blocked_ (Maybe a))
-&gt; Blocked_ -&gt; Either Blocked_ (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; () -&gt; Blocked_
forall t a. Blocker -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-var">Blocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681068701"><span class="hs-identifier hs-var">blocker</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-398"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681068701"><span class="annot"><span class="annottext">blocker :: Blocker
</span><a href="#local-6989586621681068701"><span class="hs-identifier hs-var hs-var">blocker</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set Blocker -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnAll"><span class="hs-identifier hs-var">unblockOnAll</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Blocker -&gt; Blocker) -&gt; Set Blocker -&gt; Blocker
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(MetaId -&gt; Set Blocker -&gt; Set Blocker)
-&gt; Set Blocker -&gt; MetaSet -&gt; Set Blocker
forall a. (MetaId -&gt; a -&gt; a) -&gt; a -&gt; MetaSet -&gt; a
</span><a href="Agda.TypeChecking.Free.Lazy.html#foldrMetaSet"><span class="hs-identifier hs-var">foldrMetaSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blocker -&gt; Set Blocker -&gt; Set Blocker
forall a. Ord a =&gt; a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.insert</span></span><span> </span><span class="annot"><span class="annottext">(Blocker -&gt; Set Blocker -&gt; Set Blocker)
-&gt; (MetaId -&gt; Blocker) -&gt; MetaId -&gt; Set Blocker -&gt; Set Blocker
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnMeta"><span class="hs-identifier hs-var">unblockOnMeta</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Set Blocker
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068702"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-399"></span><span>    </span><span class="annot"><span class="annottext">IsFree
</span><a href="Agda.TypeChecking.Free.Reduce.html#NotFree"><span class="hs-identifier hs-var">NotFree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a)))
-&gt; Either Blocked_ (Maybe a) -&gt; m (Either Blocked_ (Maybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; Either Blocked_ (Maybe a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068708"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-400"></span><span>
</span><span id="line-401"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-comment">-- Check if any of the variables occur freely.</span><span>
</span><span id="line-403"></span><span>    </span><span class="hs-comment">-- Prefer occurrences that do not depend on any metas.</span><span>
</span><span id="line-404"></span><span>    </span><span class="annot"><a href="#local-6989586621681068705"><span class="hs-identifier hs-type">pickFree</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#IsFree"><span class="hs-identifier hs-type">IsFree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#IsFree"><span class="hs-identifier hs-type">IsFree</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#IsFree"><span class="hs-identifier hs-type">IsFree</span></a></span><span>
</span><span id="line-405"></span><span>    </span><span id="local-6989586621681068705"><span class="annot"><span class="annottext">pickFree :: IsFree -&gt; IsFree -&gt; IsFree
</span><a href="#local-6989586621681068705"><span class="hs-identifier hs-var hs-var">pickFree</span></a></span></span><span> </span><span id="local-6989586621681068695"><span class="annot"><span class="annottext">f1 :: IsFree
</span><a href="#local-6989586621681068695"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#MaybeFree"><span class="hs-identifier hs-type">MaybeFree</span></a></span><span> </span><span id="local-6989586621681068694"><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068694"><span class="hs-identifier hs-var">ms1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681068693"><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068693"><span class="hs-identifier hs-var">f2</span></a></span></span><span>
</span><span id="line-406"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">MetaSet -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068694"><span class="hs-identifier hs-var">ms1</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068695"><span class="hs-identifier hs-var">f1</span></a></span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><a href="#local-6989586621681068705"><span class="hs-identifier hs-var">pickFree</span></a></span><span> </span><span id="local-6989586621681068692"><span class="annot"><span class="annottext">f1 :: IsFree
</span><a href="#local-6989586621681068692"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#MaybeFree"><span class="hs-identifier hs-type">MaybeFree</span></a></span><span> </span><span id="local-6989586621681068691"><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068691"><span class="hs-identifier hs-var">ms1</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681068690"><span class="annot"><span class="annottext">f2 :: IsFree
</span><a href="#local-6989586621681068690"><span class="hs-identifier hs-var">f2</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#MaybeFree"><span class="hs-identifier hs-type">MaybeFree</span></a></span><span> </span><span id="local-6989586621681068689"><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068689"><span class="hs-identifier hs-var">ms2</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">MetaSet -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068689"><span class="hs-identifier hs-var">ms2</span></a></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068690"><span class="hs-identifier hs-var">f2</span></a></span><span>
</span><span id="line-409"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068692"><span class="hs-identifier hs-var">f1</span></a></span><span>
</span><span id="line-410"></span><span>    </span><span class="annot"><a href="#local-6989586621681068705"><span class="hs-identifier hs-var">pickFree</span></a></span><span> </span><span id="local-6989586621681068688"><span class="annot"><span class="annottext">f1 :: IsFree
</span><a href="#local-6989586621681068688"><span class="hs-identifier hs-var">f1</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Free.Reduce.html#MaybeFree"><span class="hs-identifier hs-type">MaybeFree</span></a></span><span> </span><span id="local-6989586621681068687"><span class="annot"><span class="annottext">MetaSet
</span><a href="#local-6989586621681068687"><span class="hs-identifier hs-var">ms1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="Agda.TypeChecking.Free.Reduce.html#NotFree"><span class="hs-identifier hs-var">NotFree</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068688"><span class="hs-identifier hs-var">f1</span></a></span><span>
</span><span id="line-411"></span><span>    </span><span class="annot"><a href="#local-6989586621681068705"><span class="hs-identifier hs-var">pickFree</span></a></span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="Agda.TypeChecking.Free.Reduce.html#NotFree"><span class="hs-identifier hs-var">NotFree</span></a></span><span> </span><span id="local-6989586621681068686"><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068686"><span class="hs-identifier hs-var">f2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IsFree
</span><a href="#local-6989586621681068686"><span class="hs-identifier hs-var">f2</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span>
</span><span id="line-414"></span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-type">makeSubstitution</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Sub"><span class="hs-identifier hs-type">Sub</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span>
</span><span id="line-415"></span><span id="makeSubstitution"><span class="annot"><span class="annottext">makeSubstitution :: Telescope -&gt; Sub -&gt; Maybe Substitution
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-var hs-var">makeSubstitution</span></a></span></span><span> </span><span id="local-6989586621681068684"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068684"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681068683"><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681068683"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-416"></span><span>  </span><span class="annot"><span class="annottext">[Term] -&gt; Substitution
forall a. DeBruijn a =&gt; [a] -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#parallelS"><span class="hs-identifier hs-var">parallelS</span></a></span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; Substitution) -&gt; Maybe [Term] -&gt; Maybe Substitution
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Key -&gt; Maybe Term) -&gt; [Key] -&gt; Maybe [Term]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Term
</span><a href="#local-6989586621681068680"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">..</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068684"><span class="hs-identifier hs-var">gamma</span></a></span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span>
</span><span id="line-417"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-418"></span><span>      </span><span id="local-6989586621681068680"><span class="annot"><span class="annottext">val :: Key -&gt; Maybe Term
</span><a href="#local-6989586621681068680"><span class="hs-identifier hs-var hs-var">val</span></a></span></span><span> </span><span id="local-6989586621681068679"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068679"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Sub -&gt; Maybe (Relevance, Term)
forall a. Key -&gt; IntMap a -&gt; Maybe a
</span><span class="hs-identifier hs-var">IntMap.lookup</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068679"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Sub
</span><a href="#local-6989586621681068683"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-419"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Irrelevant"><span class="hs-identifier hs-var">Irrelevant</span></a></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068678"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068678"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term -&gt; Maybe Term) -&gt; Term -&gt; Maybe Term
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Term
</span><a href="Agda.Syntax.Internal.html#dontCare"><span class="hs-identifier hs-var">dontCare</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068678"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-420"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Relevance
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681068676"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068676"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term -&gt; Maybe Term
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068676"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-421"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Relevance, Term)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Term
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span id="local-6989586621681070225"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-type">checkPostponedEquations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070225"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-424"></span><span>                        </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquations"><span class="hs-identifier hs-type">PostponedEquations</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070225"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-425"></span><span id="checkPostponedEquations"><span class="annot"><span class="annottext">checkPostponedEquations :: forall (m :: * -&gt; *).
PureTCM m =&gt;
Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-var hs-var">checkPostponedEquations</span></a></span></span><span> </span><span id="local-6989586621681068638"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681068638"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span id="local-6989586621681068637"><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681068637"><span class="hs-identifier hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PostponedEquations
-&gt; (PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Applicative m, Monoid b) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="Agda.Utils.Monad.html#forM%27"><span class="hs-identifier hs-var">forM'</span></a></span><span> </span><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681068637"><span class="hs-identifier hs-var">eqs</span></a></span><span> </span><span class="annot"><span class="annottext">((PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_))
-&gt; (PostponedEquation -&gt; m (Maybe Blocked_)) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-426"></span><span>  </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#PostponedEquation"><span class="hs-identifier hs-type">PostponedEquation</span></a></span><span> </span><span id="local-6989586621681068635"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068635"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621681068634"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068634"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068633"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068633"><span class="hs-identifier hs-var">lhs</span></a></span></span><span> </span><span id="local-6989586621681068632"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068632"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-427"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068631"><span class="annot"><span class="annottext">lhs' :: Term
</span><a href="#local-6989586621681068631"><span class="hs-identifier hs-var hs-var">lhs'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Substitution' (SubstArg Term) -&gt; Term -&gt; Term
forall a. Subst a =&gt; Substitution' (SubstArg a) -&gt; a -&gt; a
</span><a href="Agda.TypeChecking.Substitute.Class.html#applySubst"><span class="hs-identifier hs-var">applySubst</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key -&gt; Substitution -&gt; Substitution
forall a. Key -&gt; Substitution' a -&gt; Substitution' a
</span><a href="Agda.TypeChecking.Substitute.Class.html#liftS"><span class="hs-identifier hs-var">liftS</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Telescope -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068635"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681068638"><span class="hs-identifier hs-var">sub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068633"><span class="hs-identifier hs-var">lhs</span></a></span><span>
</span><span id="line-428"></span><span>      </span><span class="annot"><span class="annottext">String
-&gt; Key -&gt; TCMT IO Doc -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">30</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-429"></span><span>        </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;checking postponed equality between&quot;</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068635"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068631"><span class="hs-identifier hs-var">lhs'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068635"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068632"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-431"></span><span>      </span><span class="annot"><span class="annottext">Telescope -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068635"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var">equal</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068634"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068631"><span class="hs-identifier hs-var">lhs'</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068632"><span class="hs-identifier hs-var">rhs</span></a></span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- main function</span><span>
</span><span id="line-434"></span><span id="local-6989586621681070211"><span id="local-6989586621681070212"><span id="local-6989586621681070213"><span id="local-6989586621681070214"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nonLinMatch"><span class="hs-identifier hs-type">nonLinMatch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070214"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#Match"><span class="hs-identifier hs-type">Match</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070213"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070212"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070211"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Telescope"><span class="hs-identifier hs-type">Telescope</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070213"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070212"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070211"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070214"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Substitution"><span class="hs-identifier hs-type">Substitution</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-436"></span><span id="nonLinMatch"><span class="annot"><span class="annottext">nonLinMatch :: forall (m :: * -&gt; *) t a b.
(PureTCM m, Match t a b) =&gt;
Telescope -&gt; t -&gt; a -&gt; b -&gt; m (Either Blocked_ Substitution)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nonLinMatch"><span class="hs-identifier hs-var hs-var">nonLinMatch</span></a></span></span><span> </span><span id="local-6989586621681068593"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068593"><span class="hs-identifier hs-var">gamma</span></a></span></span><span> </span><span id="local-6989586621681068592"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681068592"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681068591"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068591"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681068590"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681068590"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068571"><span class="annot"><span class="annottext">no :: String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681068571"><span class="hs-identifier hs-var hs-var">no</span></a></span></span><span> </span><span id="local-6989586621681068570"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681068570"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621681068569"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068569"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Key -&gt; TCMT IO Doc -&gt; m (Either a b) -&gt; m (Either a b)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-438"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;matching failed during&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681068570"><span class="hs-identifier hs-var">msg</span></a></span><span>
</span><span id="line-439"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;blocking: &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068569"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Either a b) -&gt; m (Either a b))
-&gt; m (Either a b) -&gt; m (Either a b)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Either a b -&gt; m (Either a b)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Either a b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068569"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>  </span><span class="annot"><span class="annottext">m (Either Blocked_ NLMState)
-&gt; (Blocked_ -&gt; m (Either Blocked_ Substitution))
-&gt; (NLMState -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
m (Either a b) -&gt; (a -&gt; m c) -&gt; (b -&gt; m c) -&gt; m c
</span><a href="Agda.Utils.Either.html#caseEitherM"><span class="hs-identifier hs-var">caseEitherM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NLM () -&gt; m (Either Blocked_ NLMState)
forall (m :: * -&gt; *).
MonadReduce m =&gt;
NLM () -&gt; m (Either Blocked_ NLMState)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#runNLM"><span class="hs-identifier hs-var">runNLM</span></a></span><span> </span><span class="annot"><span class="annottext">(NLM () -&gt; m (Either Blocked_ NLMState))
-&gt; NLM () -&gt; m (Either Blocked_ NLMState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
forall t a b.
Match t a b =&gt;
Relevance -&gt; Telescope -&gt; Telescope -&gt; t -&gt; a -&gt; b -&gt; NLM ()
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#match"><span class="hs-identifier hs-var">match</span></a></span><span> </span><span class="annot"><span class="annottext">Relevance
</span><a href="Agda.Syntax.Common.html#Relevant"><span class="hs-identifier hs-var">Relevant</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068593"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
forall a. Tele a
</span><a href="Agda.Syntax.Internal.html#EmptyTel"><span class="hs-identifier hs-var">EmptyTel</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621681068592"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681068591"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681068590"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681068571"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;matching&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((NLMState -&gt; m (Either Blocked_ Substitution))
 -&gt; m (Either Blocked_ Substitution))
-&gt; (NLMState -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681068565"><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681068565"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-441"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068564"><span class="annot"><span class="annottext">msub :: Maybe Substitution
</span><a href="#local-6989586621681068564"><span class="hs-identifier hs-var hs-var">msub</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; Sub -&gt; Maybe Substitution
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#makeSubstitution"><span class="hs-identifier hs-var">makeSubstitution</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681068593"><span class="hs-identifier hs-var">gamma</span></a></span><span> </span><span class="annot"><span class="annottext">(Sub -&gt; Maybe Substitution) -&gt; Sub -&gt; Maybe Substitution
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681068565"><span class="hs-identifier hs-var">s</span></a></span><span class="annot"><span class="annottext">NLMState -&gt; Lens' Sub NLMState -&gt; Sub
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Lens' Sub NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmSub"><span class="hs-identifier hs-var">nlmSub</span></a></span><span>
</span><span id="line-442"></span><span>        </span><span id="local-6989586621681068561"><span class="annot"><span class="annottext">eqs :: PostponedEquations
</span><a href="#local-6989586621681068561"><span class="hs-identifier hs-var hs-var">eqs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NLMState
</span><a href="#local-6989586621681068565"><span class="hs-identifier hs-var">s</span></a></span><span class="annot"><span class="annottext">NLMState -&gt; Lens' PostponedEquations NLMState -&gt; PostponedEquations
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">Lens' PostponedEquations NLMState
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#nlmEqs"><span class="hs-identifier hs-var">nlmEqs</span></a></span><span>
</span><span id="line-443"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; Key
-&gt; TCMT IO Doc
-&gt; m (Either Blocked_ Substitution)
-&gt; m (Either Blocked_ Substitution)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">90</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; String -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#text"><span class="hs-identifier hs-var">text</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; TCMT IO Doc) -&gt; String -&gt; TCMT IO Doc
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;msub = &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Maybe Substitution -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Maybe Substitution
</span><a href="#local-6989586621681068564"><span class="hs-identifier hs-var">msub</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Either Blocked_ Substitution)
 -&gt; m (Either Blocked_ Substitution))
-&gt; m (Either Blocked_ Substitution)
-&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Substitution
</span><a href="#local-6989586621681068564"><span class="hs-identifier hs-var">msub</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-444"></span><span>      </span><span class="annot"><span class="annottext">Maybe Substitution
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681068571"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checking that all variables are bound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
forall t. Blocked' t ()
</span><a href="Agda.Syntax.Internal.Blockers.html#notBlocked_"><span class="hs-identifier hs-var">notBlocked_</span></a></span><span>
</span><span id="line-445"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681068557"><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681068557"><span class="hs-identifier hs-var">sub</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-446"></span><span>        </span><span id="local-6989586621681068556"><span class="annot"><span class="annottext">Maybe Blocked_
</span><a href="#local-6989586621681068556"><span class="hs-identifier hs-var">ok</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *).
PureTCM m =&gt;
Substitution -&gt; PostponedEquations -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#checkPostponedEquations"><span class="hs-identifier hs-var">checkPostponedEquations</span></a></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681068557"><span class="hs-identifier hs-var">sub</span></a></span><span> </span><span class="annot"><span class="annottext">PostponedEquations
</span><a href="#local-6989586621681068561"><span class="hs-identifier hs-var">eqs</span></a></span><span>
</span><span id="line-447"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_
</span><a href="#local-6989586621681068556"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-448"></span><span>          </span><span class="annot"><span class="annottext">Maybe Blocked_
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution))
-&gt; Either Blocked_ Substitution -&gt; m (Either Blocked_ Substitution)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Substitution -&gt; Either Blocked_ Substitution
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Substitution
</span><a href="#local-6989586621681068557"><span class="hs-identifier hs-var">sub</span></a></span><span>
</span><span id="line-449"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681068555"><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068555"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Blocked_ -&gt; m (Either Blocked_ Substitution)
forall {m :: * -&gt; *} {a} {b}.
(MonadDebug m, Show a) =&gt;
String -&gt; a -&gt; m (Either a b)
</span><a href="#local-6989586621681068571"><span class="hs-identifier hs-var">no</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;checking of postponed equations&quot;</span></span><span> </span><span class="annot"><span class="annottext">Blocked_
</span><a href="#local-6989586621681068555"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- | Typed &#946;&#951;-equality, also handles empty record types.</span><span>
</span><span id="line-452"></span><span class="hs-comment">--   Returns `Nothing` if the terms are equal, or `Just b` if the terms are not</span><span>
</span><span id="line-453"></span><span class="hs-comment">--   (where b contains information about possible metas blocking the comparison)</span><span>
</span><span id="line-454"></span><span id="local-6989586621681070400"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-type">equal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070400"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070400"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Blocked_"><span class="hs-identifier hs-type">Blocked_</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-455"></span><span id="equal"><span class="annot"><span class="annottext">equal :: forall (m :: * -&gt; *).
PureTCM m =&gt;
Type -&gt; Term -&gt; Term -&gt; m (Maybe Blocked_)
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#equal"><span class="hs-identifier hs-var hs-var">equal</span></a></span></span><span> </span><span id="local-6989586621681068530"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068530"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681068529"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068529"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681068528"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068528"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockT m Bool -&gt; m (Either Blocker Bool)
forall (m :: * -&gt; *) a.
Monad m =&gt;
BlockT m a -&gt; m (Either Blocker a)
</span><a href="Agda.TypeChecking.Monad.Base.html#runBlocked"><span class="hs-identifier hs-var">runBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; BlockT m Bool
forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m) =&gt;
Type -&gt; Term -&gt; Term -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualTerm"><span class="hs-identifier hs-var">pureEqualTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068530"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068529"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068528"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m (Either Blocker Bool)
-&gt; (Either Blocker Bool -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-456"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681068526"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681068526"><span class="hs-identifier hs-var">b</span></a></span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Blocked_ -&gt; m (Maybe Blocked_))
-&gt; Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Maybe Blocked_
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; Maybe Blocked_) -&gt; Blocked_ -&gt; Maybe Blocked_
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; () -&gt; Blocked_
forall t a. Blocker -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#Blocked"><span class="hs-identifier hs-var">Blocked</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681068526"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Blocked_
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-458"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
-&gt; Key -&gt; TCMT IO Doc -&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a.
MonadDebug m =&gt;
String -&gt; Key -&gt; TCMT IO Doc -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Debug.html#traceSDoc"><span class="hs-identifier hs-var">traceSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;rewriting.match&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-number">10</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[TCMT IO Doc] -&gt; TCMT IO Doc
forall (m :: * -&gt; *) (t :: * -&gt; *).
(Applicative m, Foldable t) =&gt;
t (m Doc) -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#sep"><span class="hs-identifier hs-var">sep</span></a></span><span>
</span><span id="line-459"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;mismatch between &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068529"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-460"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot; and &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681068528"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-461"></span><span>      </span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe Blocked_) -&gt; m (Maybe Blocked_))
-&gt; m (Maybe Blocked_) -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-462"></span><span>    </span><span class="annot"><span class="annottext">Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Blocked_ -&gt; m (Maybe Blocked_))
-&gt; Maybe Blocked_ -&gt; m (Maybe Blocked_)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Blocked_ -&gt; Maybe Blocked_
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Blocked_ -&gt; Maybe Blocked_) -&gt; Blocked_ -&gt; Maybe Blocked_
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term -&gt; () -&gt; Blocked_
forall t a. NotBlocked' t -&gt; a -&gt; Blocked' t a
</span><a href="Agda.Syntax.Internal.Blockers.html#NotBlocked"><span class="hs-identifier hs-var">NotBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">NotBlocked' Term
forall t. NotBlocked' t
</span><a href="Agda.Syntax.Internal.Blockers.html#ReallyNotBlocked"><span class="hs-identifier hs-var">ReallyNotBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-463"></span><span>
</span><span id="line-464"></span><span class="hs-comment">-- | Utility function for getting the name and type of a head term (i.e. a</span><span>
</span><span id="line-465"></span><span class="hs-comment">--   `Def` or `Con` with no arguments)</span><span>
</span><span id="line-466"></span><span id="local-6989586621681070191"><span class="annot"><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#getTypedHead"><span class="hs-identifier hs-type">getTypedHead</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681070191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681070191"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">QName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-467"></span><span id="getTypedHead"><span class="annot"><span class="annottext">getTypedHead :: forall (m :: * -&gt; *). PureTCM m =&gt; Term -&gt; m (Maybe (QName, Type))
</span><a href="Agda.TypeChecking.Rewriting.NonLinMatch.html#getTypedHead"><span class="hs-identifier hs-var hs-var">getTypedHead</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-468"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Def"><span class="hs-identifier hs-type">Def</span></a></span><span> </span><span id="local-6989586621681068476"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068476"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(QName, Type) -&gt; Maybe (QName, Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">((QName, Type) -&gt; Maybe (QName, Type))
-&gt; (Definition -&gt; (QName, Type))
-&gt; Definition
-&gt; Maybe (QName, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068476"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Type -&gt; (QName, Type))
-&gt; (Definition -&gt; Type) -&gt; Definition -&gt; (QName, Type)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Maybe (QName, Type))
-&gt; m Definition -&gt; m (Maybe (QName, Type))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068476"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span class="annot"><a href="Agda.Syntax.Internal.html#Con"><span class="hs-identifier hs-type">Con</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#ConHead"><span class="hs-identifier hs-type">ConHead</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">conName :: ConHead -&gt; QName
</span><a href="Agda.Syntax.Internal.html#conName"><span class="hs-identifier hs-var">conName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681068474"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068474"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-470"></span><span>    </span><span class="hs-comment">-- Andreas, 2018-09-08, issue #3211:</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-comment">-- discount module parameters for constructor heads</span><span>
</span><span id="line-472"></span><span>    </span><span id="local-6989586621681068473"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068473"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Args
forall (m :: * -&gt; *).
(Functor m, HasConstInfo m, HasOptions m, ReadTCState m,
 MonadTCEnv m, MonadDebug m) =&gt;
QName -&gt; m Args
</span><a href="Agda.TypeChecking.Monad.Signature.html#freeVarsToApply"><span class="hs-identifier hs-var">freeVarsToApply</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068474"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-comment">-- Jesper, 2020-06-17, issue #4755: add dummy arguments in</span><span>
</span><span id="line-474"></span><span>    </span><span class="hs-comment">-- case we don't have enough parameters</span><span>
</span><span id="line-475"></span><span>    </span><span id="local-6989586621681068471"><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068471"><span class="hs-identifier hs-var">npars</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Key -&gt; Key
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Key
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Key -&gt; Key) -&gt; m (Maybe Key) -&gt; m Key
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m (Maybe Key)
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m (Maybe Key)
</span><a href="Agda.TypeChecking.Datatypes.html#getNumberOfParameters"><span class="hs-identifier hs-var">getNumberOfParameters</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068474"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681068469"><span class="annot"><span class="annottext">ws :: Args
</span><a href="#local-6989586621681068469"><span class="hs-identifier hs-var hs-var">ws</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Key -&gt; Arg Term -&gt; Args
forall a. Key -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Key
</span><a href="#local-6989586621681068471"><span class="hs-identifier hs-var">npars</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Key -&gt; Key
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Key
forall a. Sized a =&gt; a -&gt; Key
</span><a href="Agda.Utils.Size.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068473"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Arg Term -&gt; Args) -&gt; Arg Term -&gt; Args
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; Arg Term
forall a. a -&gt; Arg a
</span><a href="Agda.Syntax.Common.html#defaultArg"><span class="hs-identifier hs-var">defaultArg</span></a></span><span> </span><span class="annot"><span class="annottext">Term
HasCallStack =&gt; Term
</span><a href="Agda.Syntax.Internal.html#__DUMMY_TERM__"><span class="hs-identifier hs-var">__DUMMY_TERM__</span></a></span><span>
</span><span id="line-477"></span><span>    </span><span id="local-6989586621681068466"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068466"><span class="hs-identifier hs-var">t0</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; m Definition -&gt; m Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; m Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068474"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-478"></span><span>    </span><span id="local-6989586621681068465"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068465"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068466"><span class="hs-identifier hs-var">t0</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; Args -&gt; m Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068473"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Args -&gt; Args -&gt; Args
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621681068469"><span class="hs-identifier hs-var">ws</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>    </span><span class="annot"><span class="annottext">Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (QName, Type) -&gt; m (Maybe (QName, Type)))
-&gt; Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(QName, Type) -&gt; Maybe (QName, Type)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681068474"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681068465"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>  </span><span class="annot"><span class="annottext">Term
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type) -&gt; m (Maybe (QName, Type))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Type)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-481"></span></pre></body></html>