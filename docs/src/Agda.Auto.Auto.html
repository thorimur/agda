<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.Auto.Auto</span><span>
</span><span id="line-3"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Auto.Auto.html#auto"><span class="hs-identifier">auto</span></a></span><span>
</span><span id="line-4"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier">AutoResult</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoProgress"><span class="hs-identifier">AutoProgress</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-7"></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(!!)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">null</span></span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">filterM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">forM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">guard</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">List</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Timeout</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Traversable</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Trav</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HMap</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html"><span class="hs-identifier">Agda.Utils.Permutation</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier">permute</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier">takeP</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Env.html#withCurrentModule"><span class="hs-identifier">withCurrentModule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Telescope.html"><span class="hs-identifier">Agda.TypeChecking.Telescope</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html"><span class="hs-identifier">Agda.Syntax.Abstract</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">A</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html"><span class="hs-identifier">Agda.Syntax.Abstract.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier">prettyA</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Concrete.Name.html"><span class="hs-identifier">Agda.Syntax.Concrete.Name</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Text.PrettyPrint</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PP</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TCM</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html"><span class="hs-identifier">Agda.Syntax.Position</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">I</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.InternalToAbstract.html"><span class="hs-identifier">Agda.Syntax.Translation.InternalToAbstract</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.AbstractToConcrete.html"><span class="hs-identifier">Agda.Syntax.Translation.AbstractToConcrete</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Translation.AbstractToConcrete.html#abstractToConcreteScope"><span class="hs-identifier">abstractToConcreteScope</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.AbstractToConcrete.html#abstractToConcrete_"><span class="hs-identifier">abstractToConcrete_</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.AbstractToConcrete.html#runAbsToCon"><span class="hs-identifier">runAbsToCon</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Translation.AbstractToConcrete.html#toConcrete"><span class="hs-identifier">toConcrete</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.Base.html"><span class="hs-identifier">Agda.Interaction.Base</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Interaction.BasicOps.html"><span class="hs-identifier">Agda.Interaction.BasicOps</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Interaction.BasicOps.html#refine"><span class="hs-identifier">refine</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier">normalise</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Scope.Base.html"><span class="hs-identifier">Agda.Syntax.Scope.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Scope</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Scope.Monad.html"><span class="hs-identifier">Agda.Syntax.Scope.Monad</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Scope.Monad.html#withCurrentModule"><span class="hs-identifier">withCurrentModule</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html"><span class="hs-identifier">Agda.Syntax.Abstract.Name</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AN</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html"><span class="hs-identifier">Agda.TypeChecking.Monad.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TCM</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html"><span class="hs-identifier">Agda.TypeChecking.EtaContract</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier">etaContract</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Options.html"><span class="hs-identifier">Agda.Auto.Options</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html"><span class="hs-identifier">Agda.Auto.Convert</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.NarrowingSearch.html"><span class="hs-identifier">Agda.Auto.NarrowingSearch</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html"><span class="hs-identifier">Agda.Auto.Syntax</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.SearchControl.html"><span class="hs-identifier">Agda.Auto.SearchControl</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.Typecheck.html"><span class="hs-identifier">Agda.Auto.Typecheck</span></a></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Auto.CaseSplit.html"><span class="hs-identifier">Agda.Auto.CaseSplit</span></a></span><span>
</span><span id="line-53"></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Functor.html"><span class="hs-identifier">Agda.Utils.Functor</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Lens.html"><span class="hs-identifier">Agda.Utils.Lens</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.List.html"><span class="hs-identifier">Agda.Utils.List</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html"><span class="hs-identifier">Agda.Utils.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier">prettyShow</span></a></span><span> </span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Tuple.html"><span class="hs-identifier">Agda.Utils.Tuple</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-type">insertAbsurdPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-65"></span><span id="insertAbsurdPattern"><span class="annot"><span class="annottext">insertAbsurdPattern :: [Char] -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-var hs-var">insertAbsurdPattern</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-66"></span><span class="annot"><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-var">insertAbsurdPattern</span></a></span><span> </span><span id="local-6989586621681157271"><span class="annot"><span class="annottext">s :: [Char]
</span><a href="#local-6989586621681157271"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; [Char]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="Agda.Auto.CaseSplit.html#abspatvarname"><span class="hs-identifier hs-var">abspatvarname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157271"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="Agda.Auto.CaseSplit.html#abspatvarname"><span class="hs-identifier hs-var">abspatvarname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;()&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char] -&gt; [Char]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="Agda.Auto.CaseSplit.html#abspatvarname"><span class="hs-identifier hs-var">abspatvarname</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157271"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-67"></span><span class="annot"><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-var">insertAbsurdPattern</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681157266"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681157266"><span class="hs-identifier hs-var">c</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681157265"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157265"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681157266"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; [Char] -&gt; [Char]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-var">insertAbsurdPattern</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157265"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="annot"><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-type">getHeadAsHint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span>
</span><span id="line-70"></span><span id="getHeadAsHint"><span class="annot"><span class="annottext">getHeadAsHint :: Expr -&gt; Maybe Hint
</span><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var hs-var">getHeadAsHint</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#ScopedExpr"><span class="hs-identifier hs-type">A.ScopedExpr</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681157262"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681157262"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Maybe Hint
</span><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681157262"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-71"></span><span class="annot"><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Def"><span class="hs-identifier hs-type">A.Def</span></a></span><span> </span><span id="local-6989586621681157260"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681157260"><span class="hs-identifier hs-var">qname</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hint -&gt; Maybe Hint
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Hint -&gt; Maybe Hint) -&gt; Hint -&gt; Maybe Hint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; Hint
</span><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681157260"><span class="hs-identifier hs-var">qname</span></a></span><span>
</span><span id="line-72"></span><span class="annot"><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Proj"><span class="hs-identifier hs-type">A.Proj</span></a></span><span> </span><span class="annot"><span class="annottext">ProjOrigin
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681157257"><span class="annot"><span class="annottext">AmbiguousQName
</span><a href="#local-6989586621681157257"><span class="hs-identifier hs-var">qname</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hint -&gt; Maybe Hint
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Hint -&gt; Maybe Hint) -&gt; Hint -&gt; Maybe Hint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; Hint
</span><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; Hint) -&gt; QName -&gt; Hint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AmbiguousQName -&gt; QName
</span><a href="Agda.Syntax.Abstract.Name.html#headAmbQ"><span class="hs-identifier hs-var">AN.headAmbQ</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousQName
</span><a href="#local-6989586621681157257"><span class="hs-identifier hs-var">qname</span></a></span><span>
</span><span id="line-73"></span><span class="annot"><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Abstract.html#Con"><span class="hs-identifier hs-type">A.Con</span></a></span><span> </span><span id="local-6989586621681157254"><span class="annot"><span class="annottext">AmbiguousQName
</span><a href="#local-6989586621681157254"><span class="hs-identifier hs-var">qname</span></a></span></span><span class="hs-special">)</span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Hint -&gt; Maybe Hint
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Hint -&gt; Maybe Hint) -&gt; Hint -&gt; Maybe Hint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; Hint
</span><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="annot"><span class="annottext">(QName -&gt; Hint) -&gt; QName -&gt; Hint
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AmbiguousQName -&gt; QName
</span><a href="Agda.Syntax.Abstract.Name.html#headAmbQ"><span class="hs-identifier hs-var">AN.headAmbQ</span></a></span><span> </span><span class="annot"><span class="annottext">AmbiguousQName
</span><a href="#local-6989586621681157254"><span class="hs-identifier hs-var">qname</span></a></span><span>
</span><span id="line-74"></span><span class="annot"><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Hint
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | Result type: Progress &amp; potential Message for the user</span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">--   The  of the Auto tactic can be one of the following three:</span><span>
</span><span id="line-79"></span><span class="hs-comment">--</span><span>
</span><span id="line-80"></span><span class="hs-comment">--   1. @Solutions [(ii,s)]@</span><span>
</span><span id="line-81"></span><span class="hs-comment">--      A list of solutions @s@ for interaction ids @ii@.</span><span>
</span><span id="line-82"></span><span class="hs-comment">--      In particular, @Solutions []@ means Agsy found no solution.</span><span>
</span><span id="line-83"></span><span class="hs-comment">--</span><span>
</span><span id="line-84"></span><span class="hs-comment">--   2. @FunClauses cs@</span><span>
</span><span id="line-85"></span><span class="hs-comment">--      A list of clauses for the interaction id @ii@ in which Auto</span><span>
</span><span id="line-86"></span><span class="hs-comment">--      was invoked with case-splitting turned on.</span><span>
</span><span id="line-87"></span><span class="hs-comment">--</span><span>
</span><span id="line-88"></span><span class="hs-comment">--   3. @Refinement s@</span><span>
</span><span id="line-89"></span><span class="hs-comment">--      A refinement for the interaction id @ii@ in which Auto was invoked.</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">data</span><span> </span><span id="AutoProgress"><span class="annot"><a href="Agda.Auto.Auto.html#AutoProgress"><span class="hs-identifier hs-var">AutoProgress</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-92"></span><span>    </span><span id="Solutions"><span class="annot"><a href="Agda.Auto.Auto.html#Solutions"><span class="hs-identifier hs-var">Solutions</span></a></span></span><span>  </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">InteractionId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="FunClauses"><span class="annot"><a href="Agda.Auto.Auto.html#FunClauses"><span class="hs-identifier hs-var">FunClauses</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Refinement"><span class="annot"><a href="Agda.Auto.Auto.html#Refinement"><span class="hs-identifier hs-var">Refinement</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-keyword">data</span><span> </span><span id="AutoResult"><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AutoResult"><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="autoProgress"><span class="annot"><span class="annottext">AutoResult -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#autoProgress"><span class="hs-identifier hs-var hs-var">autoProgress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoProgress"><span class="hs-identifier hs-type">AutoProgress</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="autoMessage"><span class="annot"><span class="annottext">AutoResult -&gt; Maybe [Char]
</span><a href="Agda.Auto.Auto.html#autoMessage"><span class="hs-identifier hs-var hs-var">autoMessage</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span class="annot"><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-type">stopWithMsg</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-type">AutoResult</span></a></span><span>
</span><span id="line-102"></span><span id="stopWithMsg"><span class="annot"><span class="annottext">stopWithMsg :: [Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var hs-var">stopWithMsg</span></a></span></span><span> </span><span id="local-6989586621681157246"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157246"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AutoResult -&gt; TCM AutoResult) -&gt; AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AutoProgress -&gt; Maybe [Char] -&gt; AutoResult
</span><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(InteractionId, [Char])] -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#Solutions"><span class="hs-identifier hs-var">Solutions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Maybe [Char]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681157246"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">-- | Entry point for Auto tactic (Agsy).</span><span>
</span><span id="line-105"></span><span class="hs-comment">--</span><span>
</span><span id="line-106"></span><span class="hs-comment">--   If the @autoMessage@ part of the result is set to @Just msg@, the</span><span>
</span><span id="line-107"></span><span class="hs-comment">--   message @msg@ produced by Agsy should be displayed to the user.</span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span class="hs-pragma">{-# SPECIALIZE</span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#auto"><span class="hs-pragma hs-type">auto</span></a></span><span> </span><span class="hs-pragma">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-pragma hs-type">InteractionId</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Range"><span class="hs-pragma hs-type">Range</span></a></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><span class="hs-pragma hs-type">String</span></span><span> </span><span class="hs-pragma">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-pragma hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-pragma hs-type">AutoResult</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-110"></span><span id="local-6989586621681157730"><span class="annot"><a href="Agda.Auto.Auto.html#auto"><span class="hs-identifier hs-type">auto</span></a></span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCM"><span class="hs-identifier hs-type">MonadTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681157730"><span class="hs-identifier hs-type">tcm</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">InteractionId</span></a></span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span>
</span><span id="line-114"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681157730"><span class="hs-identifier hs-type">tcm</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-type">AutoResult</span></a></span></span><span>
</span><span id="line-116"></span><span id="auto"><span class="annot"><span class="annottext">auto :: forall (tcm :: * -&gt; *).
MonadTCM tcm =&gt;
InteractionId -&gt; Range -&gt; [Char] -&gt; tcm AutoResult
</span><a href="Agda.Auto.Auto.html#auto"><span class="hs-identifier hs-var hs-var">auto</span></a></span></span><span> </span><span id="local-6989586621681156690"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span id="local-6989586621681156689"><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621681156689"><span class="hs-identifier hs-var">rng</span></a></span></span><span> </span><span id="local-6989586621681156688"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156688"><span class="hs-identifier hs-var">argstr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCM AutoResult -&gt; tcm AutoResult
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM AutoResult -&gt; tcm AutoResult)
-&gt; TCM AutoResult -&gt; tcm AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv
-&gt; (Bool -&gt; Bool) -&gt; TCM AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' a TCEnv -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eMakeCase"><span class="hs-identifier hs-var">eMakeCase</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCM AutoResult -&gt; TCM AutoResult)
-&gt; TCM AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-comment">-- Parse hints and other configuration.</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156681"><span class="annot"><span class="annottext">autoOptions :: AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var hs-var">autoOptions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; AutoOptions
</span><a href="Agda.Auto.Options.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156688"><span class="hs-identifier hs-var">argstr</span></a></span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156679"><span class="annot"><span class="annottext">hints :: [[Char]]
</span><a href="#local-6989586621681156679"><span class="hs-identifier hs-var hs-var">hints</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var">autoOptions</span></a></span><span> </span><span class="annot"><span class="annottext">AutoOptions -&gt; Lens' [[Char]] AutoOptions -&gt; [[Char]]
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' [[Char]] AutoOptions
</span><a href="Agda.Auto.Options.html#aoHints"><span class="hs-identifier hs-var">aoHints</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156674"><span class="annot"><span class="annottext">timeout :: TimeOut
</span><a href="#local-6989586621681156674"><span class="hs-identifier hs-var hs-var">timeout</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var">autoOptions</span></a></span><span> </span><span class="annot"><span class="annottext">AutoOptions -&gt; Lens' TimeOut AutoOptions -&gt; TimeOut
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' TimeOut AutoOptions
</span><a href="Agda.Auto.Options.html#aoTimeOut"><span class="hs-identifier hs-var">aoTimeOut</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156670"><span class="annot"><span class="annottext">pick :: Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var hs-var">pick</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var">autoOptions</span></a></span><span> </span><span class="annot"><span class="annottext">AutoOptions -&gt; Lens' Int AutoOptions -&gt; Int
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Int AutoOptions
</span><a href="Agda.Auto.Options.html#aoPick"><span class="hs-identifier hs-var">aoPick</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156666"><span class="annot"><span class="annottext">mode :: Mode
</span><a href="#local-6989586621681156666"><span class="hs-identifier hs-var hs-var">mode</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var">autoOptions</span></a></span><span> </span><span class="annot"><span class="annottext">AutoOptions -&gt; Lens' Mode AutoOptions -&gt; Mode
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Mode AutoOptions
</span><a href="Agda.Auto.Options.html#aoMode"><span class="hs-identifier hs-var">aoMode</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156662"><span class="annot"><span class="annottext">hintmode :: AutoHintMode
</span><a href="#local-6989586621681156662"><span class="hs-identifier hs-var hs-var">hintmode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoOptions
</span><a href="#local-6989586621681156681"><span class="hs-identifier hs-var">autoOptions</span></a></span><span> </span><span class="annot"><span class="annottext">AutoOptions -&gt; Lens' AutoHintMode AutoOptions -&gt; AutoHintMode
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' AutoHintMode AutoOptions
</span><a href="Agda.Auto.Options.html#aoHintMode"><span class="hs-identifier hs-var">aoHintMode</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621681156658"><span class="annot"><span class="annottext">[Expr]
</span><a href="#local-6989586621681156658"><span class="hs-identifier hs-var">ahints</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="#local-6989586621681156666"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-126"></span><span>    </span><span class="annot"><a href="Agda.Auto.Options.html#MRefine"><span class="hs-identifier hs-type">MRefine</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Expr] -&gt; TCMT IO [Expr]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="annottext">Mode
</span><span class="hs-identifier">_</span></span><span>         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCMT IO Expr) -&gt; [[Char]] -&gt; TCMT IO [Expr]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractionId -&gt; Range -&gt; [Char] -&gt; TCMT IO Expr
</span><a href="Agda.Interaction.BasicOps.html#parseExprIn"><span class="hs-identifier hs-var">parseExprIn</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621681156689"><span class="hs-identifier hs-var">rng</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621681156679"><span class="hs-identifier hs-var">hints</span></a></span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156654"><span class="annot"><span class="annottext">failHints :: TCM AutoResult
</span><a href="#local-6989586621681156654"><span class="hs-identifier hs-var hs-var">failHints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Hints must be a list of constant names&quot;</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span>  </span><span id="local-6989586621681156653"><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156653"><span class="hs-identifier hs-var">eqstuff</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; Range -&gt; TCM [Hint]
</span><a href="Agda.Auto.Auto.html#getEqCombinators"><span class="hs-identifier hs-var">getEqCombinators</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621681156689"><span class="hs-identifier hs-var">rng</span></a></span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">Maybe [Hint]
-&gt; TCM AutoResult -&gt; ([Hint] -&gt; TCM AutoResult) -&gt; TCM AutoResult
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Expr -&gt; Maybe Hint) -&gt; [Expr] -&gt; Maybe [Hint]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Maybe Hint
</span><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="annot"><span class="annottext">[Expr]
</span><a href="#local-6989586621681156658"><span class="hs-identifier hs-var">ahints</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TCM AutoResult
</span><a href="#local-6989586621681156654"><span class="hs-identifier hs-var">failHints</span></a></span><span> </span><span class="annot"><span class="annottext">(([Hint] -&gt; TCM AutoResult) -&gt; TCM AutoResult)
-&gt; ([Hint] -&gt; TCM AutoResult) -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681156650"><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156650"><span class="hs-identifier hs-var">ehints</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-133"></span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-comment">-- Get the meta variable for the interaction point we are trying to fill.</span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-comment">-- Add the @autohints@ for that meta to the hints collection.</span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621681156649"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCMT IO MetaId
forall (m :: * -&gt; *).
(MonadFail m, ReadTCState m, MonadError TCErr m, MonadTCEnv m) =&gt;
InteractionId -&gt; m MetaId
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#lookupInteractionId"><span class="hs-identifier hs-var">lookupInteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span id="local-6989586621681156647"><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCM (Maybe (QName, Clause, Bool))
</span><a href="Agda.Auto.Convert.html#findClauseDeep"><span class="hs-identifier hs-var">findClauseDeep</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span>
</span><span id="line-138"></span><span>    </span><span id="local-6989586621681156645"><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156645"><span class="hs-identifier hs-var">ehints</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156650"><span class="hs-identifier hs-var">ehints</span></a></span><span> </span><span class="annot"><span class="annottext">[Hint] -&gt; [Hint] -&gt; [Hint]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Hint] -&gt; [Hint]) -&gt; TCM [Hint] -&gt; TCM [Hint]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">AutoHintMode -&gt; MetaId -&gt; Maybe QName -&gt; TCM [Hint]
</span><a href="Agda.Auto.Auto.html#autohints"><span class="hs-identifier hs-var">autohints</span></a></span><span> </span><span class="annot"><span class="annottext">AutoHintMode
</span><a href="#local-6989586621681156662"><span class="hs-identifier hs-var">hintmode</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe QName -&gt; TCM [Hint]) -&gt; Maybe QName -&gt; TCM [Hint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((QName, Clause, Bool) -&gt; QName)
-&gt; Maybe (QName, Clause, Bool) -&gt; Maybe QName
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(QName, Clause, Bool) -&gt; QName
forall a b c. (a, b, c) -&gt; a
</span><a href="Agda.Utils.Tuple.html#fst3"><span class="hs-identifier hs-var">fst3</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-comment">-- If @thisdefinfo /= Nothing@ get the its type (normalized).</span><span>
</span><span id="line-141"></span><span>    </span><span id="local-6989586621681156641"><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681156641"><span class="hs-identifier hs-var">mrectyp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Type -&gt; [Type]
forall a. Maybe a -&gt; [a]
</span><span class="hs-identifier hs-var">maybeToList</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Type -&gt; [Type]) -&gt; TCMT IO (Maybe Type) -&gt; TCMT IO [Type]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-142"></span><span>      </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
-&gt; ((QName, Clause, Bool) -&gt; TCMT IO Type) -&gt; TCMT IO (Maybe Type)
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">Trav.forM</span></span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="annot"><span class="annottext">(((QName, Clause, Bool) -&gt; TCMT IO Type) -&gt; TCMT IO (Maybe Type))
-&gt; ((QName, Clause, Bool) -&gt; TCMT IO Type) -&gt; TCMT IO (Maybe Type)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156639"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156639"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-143"></span><span>        </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Type) -&gt; TCMT IO Type -&gt; TCMT IO Type
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">TCM.defType</span></a></span><span> </span><span class="annot"><span class="annottext">(Definition -&gt; Type) -&gt; TCMT IO Definition -&gt; TCMT IO Type
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156639"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681156635"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156635"><span class="hs-identifier hs-var">myhints'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156634"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156634"><span class="hs-identifier hs-var">mymrectyp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156633"><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156632"><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156632"><span class="hs-identifier hs-var">eqcons</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156631"><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681156631"><span class="hs-identifier hs-var">cmap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId
-&gt; [Hint]
-&gt; [Type]
-&gt; TCM
     ([ConstRef O], [MM (Exp O) (RefInfo O)],
      Map
        MetaId
        (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
         [MM (Exp O) (RefInfo O)], [MetaId]),
      [(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))],
      Map QName (TMode, ConstRef O))
</span><a href="Agda.Auto.Convert.html#tomy"><span class="hs-identifier hs-var">tomy</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156645"><span class="hs-identifier hs-var">ehints</span></a></span><span> </span><span class="annot"><span class="annottext">[Hint] -&gt; [Hint] -&gt; [Hint]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156653"><span class="hs-identifier hs-var">eqstuff</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Type]
</span><a href="#local-6989586621681156641"><span class="hs-identifier hs-var">mrectyp</span></a></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156629"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156629"><span class="hs-identifier hs-var">myhints</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156628"><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156628"><span class="hs-identifier hs-var">c1to6</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [ConstRef O] -&gt; ([ConstRef O], [ConstRef O])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[ConstRef O] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156635"><span class="hs-identifier hs-var">myhints'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">[Hint] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156653"><span class="hs-identifier hs-var">eqstuff</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156635"><span class="hs-identifier hs-var">myhints'</span></a></span><span>
</span><span id="line-148"></span><span>        </span><span id="local-6989586621681156626"><span class="annot"><span class="annottext">meqr :: Maybe (EqReasoningConsts O)
</span><a href="#local-6989586621681156626"><span class="hs-identifier hs-var hs-var">meqr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Hint]
-&gt; Maybe (EqReasoningConsts O)
-&gt; ([Hint] -&gt; Maybe (EqReasoningConsts O))
-&gt; Maybe (EqReasoningConsts O)
forall a b. Null a =&gt; a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Null.html#ifNull"><span class="hs-identifier hs-var">ifNull</span></a></span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><a href="#local-6989586621681156653"><span class="hs-identifier hs-var">eqstuff</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (EqReasoningConsts O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">(([Hint] -&gt; Maybe (EqReasoningConsts O))
 -&gt; Maybe (EqReasoningConsts O))
-&gt; ([Hint] -&gt; Maybe (EqReasoningConsts O))
-&gt; Maybe (EqReasoningConsts O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="annot"><span class="annottext">[Hint]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-comment">{- else -}</span><span>
</span><span id="line-149"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681156624"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156624"><span class="hs-identifier hs-var">c1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156623"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156623"><span class="hs-identifier hs-var">c2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156622"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156622"><span class="hs-identifier hs-var">c3</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156621"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156621"><span class="hs-identifier hs-var">c4</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156620"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156620"><span class="hs-identifier hs-var">c5</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156619"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156619"><span class="hs-identifier hs-var">c6</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156628"><span class="hs-identifier hs-var">c1to6</span></a></span><span>
</span><span id="line-150"></span><span>                 </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">EqReasoningConsts O -&gt; Maybe (EqReasoningConsts O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(EqReasoningConsts O -&gt; Maybe (EqReasoningConsts O))
-&gt; EqReasoningConsts O -&gt; Maybe (EqReasoningConsts O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstRef O
-&gt; ConstRef O
-&gt; ConstRef O
-&gt; ConstRef O
-&gt; ConstRef O
-&gt; ConstRef O
-&gt; EqReasoningConsts O
forall o.
ConstRef o
-&gt; ConstRef o
-&gt; ConstRef o
-&gt; ConstRef o
-&gt; ConstRef o
-&gt; ConstRef o
-&gt; EqReasoningConsts o
</span><a href="Agda.Auto.Syntax.html#EqReasoningConsts"><span class="hs-identifier hs-var">EqReasoningConsts</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156624"><span class="hs-identifier hs-var">c1</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156623"><span class="hs-identifier hs-var">c2</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156622"><span class="hs-identifier hs-var">c3</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156621"><span class="hs-identifier hs-var">c4</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156620"><span class="hs-identifier hs-var">c5</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156619"><span class="hs-identifier hs-var">c6</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156617"><span class="annot"><span class="annottext">tcSearchSC :: Bool -&gt; Ctx O -&gt; CExp O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156617"><span class="hs-identifier hs-var hs-var">tcSearchSC</span></a></span></span><span> </span><span id="local-6989586621681156616"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156616"><span class="hs-identifier hs-var">isdep</span></a></span></span><span> </span><span id="local-6989586621681156615"><span class="annot"><span class="annottext">Ctx O
</span><a href="#local-6989586621681156615"><span class="hs-identifier hs-var">ctx</span></a></span></span><span> </span><span id="local-6989586621681156614"><span class="annot"><span class="annottext">CExp O
</span><a href="#local-6989586621681156614"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span id="local-6989586621681156613"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156613"><span class="hs-identifier hs-var">trm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (EqReasoningConsts O)
-&gt; EE (MyPB O)
-&gt; (EqReasoningConsts O -&gt; EE (MyPB O))
-&gt; EE (MyPB O)
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (EqReasoningConsts O)
</span><a href="#local-6989586621681156626"><span class="hs-identifier hs-var">meqr</span></a></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156612"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">((EqReasoningConsts O -&gt; EE (MyPB O)) -&gt; EE (MyPB O))
-&gt; (EqReasoningConsts O -&gt; EE (MyPB O)) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681156611"><span class="annot"><span class="annottext">EqReasoningConsts O
</span><a href="#local-6989586621681156611"><span class="hs-identifier hs-var">eqr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>          </span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">(Prop (RefInfo O) -&gt; EE (MyPB O))
-&gt; Prop (RefInfo O) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O) -&gt; EE (MyPB O) -&gt; Prop (RefInfo O)
forall blk. MetaEnv (PB blk) -&gt; MetaEnv (PB blk) -&gt; Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#Sidecondition"><span class="hs-identifier hs-var">Sidecondition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EqReasoningConsts O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
forall o. EqReasoningConsts o -&gt; MExp o -&gt; EE (MyPB o)
</span><a href="Agda.Auto.Typecheck.html#calcEqRState"><span class="hs-identifier hs-var">calcEqRState</span></a></span><span> </span><span class="annot"><span class="annottext">EqReasoningConsts O
</span><a href="#local-6989586621681156611"><span class="hs-identifier hs-var">eqr</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156613"><span class="hs-identifier hs-var">trm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156612"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-155"></span><span>          </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681156612"><span class="annot"><span class="annottext">a :: EE (MyPB O)
</span><a href="#local-6989586621681156612"><span class="hs-identifier hs-var hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ctx O -&gt; CExp O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
forall o. Bool -&gt; Ctx o -&gt; CExp o -&gt; MExp o -&gt; EE (MyPB o)
</span><a href="Agda.Auto.Typecheck.html#tcSearch"><span class="hs-identifier hs-var">tcSearch</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156616"><span class="hs-identifier hs-var">isdep</span></a></span><span> </span><span class="annot"><span class="annottext">Ctx O
</span><a href="#local-6989586621681156615"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">CExp O
</span><a href="#local-6989586621681156614"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156613"><span class="hs-identifier hs-var">trm</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156606"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156606"><span class="hs-identifier hs-var">mainm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; MetaId
-&gt; (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
    [MM (Exp O) (RefInfo O)], [MetaId])
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Mode
</span><a href="#local-6989586621681156666"><span class="hs-identifier hs-var">mode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-159"></span><span>     </span><span class="annot"><a href="Agda.Auto.Options.html#MNormal"><span class="hs-identifier hs-type">MNormal</span></a></span><span> </span><span id="local-6989586621681156603"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156603"><span class="hs-identifier hs-var">listmode</span></a></span></span><span> </span><span id="local-6989586621681156602"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156602"><span class="hs-identifier hs-var">disprove</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156601"><span class="annot"><span class="annottext">numsols :: Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var hs-var">numsols</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156603"><span class="hs-identifier hs-var">listmode</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-161"></span><span>          </span><span class="hs-comment">-- Andreas, 2015-05-17 Issue 1504:</span><span>
</span><span id="line-162"></span><span>          </span><span class="hs-comment">-- wish to produce several solutions, as</span><span>
</span><span id="line-163"></span><span>          </span><span class="hs-comment">-- the first one might be ill-typed.</span><span>
</span><span id="line-164"></span><span>          </span><span class="hs-comment">-- However, currently changing the 1 to something higher makes Agsy loop.</span><span>
</span><span id="line-165"></span><span>        </span><span id="local-6989586621681156600"><span class="annot"><span class="annottext">IORef [[Term]]
</span><a href="#local-6989586621681156600"><span class="hs-identifier hs-var">sols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (IORef [[Term]]) -&gt; TCMT IO (IORef [[Term]])
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (IORef [[Term]]) -&gt; TCMT IO (IORef [[Term]]))
-&gt; IO (IORef [[Term]]) -&gt; TCMT IO (IORef [[Term]])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; IO (IORef [[Term]])
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>        </span><span id="local-6989586621681156597"><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (IORef Int) -&gt; TCMT IO (IORef Int))
-&gt; IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (IORef Int)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO (IORef Int)) -&gt; Int -&gt; IO (IORef Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span>
</span><span id="line-167"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156595"><span class="annot"><span class="annottext">hsol :: IO ()
</span><a href="#local-6989586621681156595"><span class="hs-identifier hs-var hs-var">hsol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-168"></span><span>             </span><span id="local-6989586621681156594"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156594"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-169"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156592"><span class="annot"><span class="annottext">cond :: Bool
</span><a href="#local-6989586621681156592"><span class="hs-identifier hs-var hs-var">cond</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156594"><span class="hs-identifier hs-var">nsol'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span>
</span><span id="line-170"></span><span>             </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156592"><span class="hs-identifier hs-var">cond</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>               </span><span id="local-6989586621681156590"><span class="annot"><span class="annottext">Either [Char] [Term]
</span><a href="#local-6989586621681156590"><span class="hs-identifier hs-var">trms</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExceptT [Char] IO [Term] -&gt; IO (Either [Char] [Term])
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span>
</span><span id="line-172"></span><span>                       </span><span class="annot"><span class="annottext">(ExceptT [Char] IO [Term] -&gt; IO (Either [Char] [Term]))
-&gt; ExceptT [Char] IO [Term] -&gt; IO (Either [Char] [Term])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
  [MM (Exp O) (RefInfo O)], [MetaId])
 -&gt; ExceptT [Char] IO Term)
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
-&gt; ExceptT [Char] IO [Term]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156588"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156588"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; ExceptT [Char] IO Term
forall (m :: * -&gt; *) a b. Conversion m a b =&gt; a -&gt; m b
</span><a href="Agda.Auto.Convert.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O)
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156588"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Convert.html#MOT"><span class="hs-identifier hs-type">MOT</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>                       </span><span class="annot"><span class="annottext">([(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])]
 -&gt; ExceptT [Char] IO [Term])
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
-&gt; ExceptT [Char] IO [Term]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span>
</span><span id="line-174"></span><span>               </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either [Char] [Term]
</span><a href="#local-6989586621681156590"><span class="hs-identifier hs-var">trms</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-175"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; Int -&gt; IO ()
forall a. IORef a -&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">writeIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; Int -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156594"><span class="hs-identifier hs-var">nsol'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-176"></span><span>                 </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681156581"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156581"><span class="hs-identifier hs-var">trms</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IORef [[Term]] -&gt; ([[Term]] -&gt; [[Term]]) -&gt; IO ()
forall a. IORef a -&gt; (a -&gt; a) -&gt; IO ()
</span><span class="hs-identifier hs-var">modifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]]
</span><a href="#local-6989586621681156600"><span class="hs-identifier hs-var">sols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156581"><span class="hs-identifier hs-var">trms</span></a></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; [[Term]] -&gt; [[Term]]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>                 </span><span class="hs-comment">-- Right trms -&gt; if listmode then modifyIORef sols (trms :)</span><span>
</span><span id="line-178"></span><span>                 </span><span class="hs-comment">--                           else writeIORef sols [trms]</span><span>
</span><span id="line-179"></span><span>        </span><span id="local-6989586621681156579"><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156579"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (IORef Int) -&gt; TCMT IO (IORef Int))
-&gt; IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (IORef Int)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156578"><span class="annot"><span class="annottext">exsearch :: EE (MyPB O)
-&gt; Maybe ([CSPat O], ConstRef O) -&gt; Int -&gt; TCMT IO (Maybe Bool)
</span><a href="#local-6989586621681156578"><span class="hs-identifier hs-var hs-var">exsearch</span></a></span></span><span> </span><span id="local-6989586621681156577"><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156577"><span class="hs-identifier hs-var">initprop</span></a></span></span><span> </span><span id="local-6989586621681156576"><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><a href="#local-6989586621681156576"><span class="hs-identifier hs-var">recinfo</span></a></span></span><span> </span><span id="local-6989586621681156575"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156575"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-182"></span><span>             </span><span class="annot"><span class="annottext">IO (Maybe Bool) -&gt; TCMT IO (Maybe Bool)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Bool) -&gt; TCMT IO (Maybe Bool))
-&gt; IO (Maybe Bool) -&gt; TCMT IO (Maybe Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO Bool -&gt; IO (Maybe Bool)
forall a. Int -&gt; IO a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">System.Timeout.timeout</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeOut -&gt; Int
</span><a href="Agda.Auto.Options.html#getTimeOut"><span class="hs-identifier hs-var">getTimeOut</span></a></span><span> </span><span class="annot"><span class="annottext">TimeOut
</span><a href="#local-6989586621681156674"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span>
</span><span id="line-183"></span><span>                    </span><span class="annot"><span class="annottext">(IO Bool -&gt; IO (Maybe Bool)) -&gt; IO Bool -&gt; IO (Maybe Bool)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Cost -&gt; IO Bool
</span><a href="#local-6989586621681156571"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">Cost
</span><span class="hs-number">0</span></span><span>
</span><span id="line-184"></span><span>             </span><span class="hs-keyword">where</span><span>
</span><span id="line-185"></span><span>               </span><span id="local-6989586621681156571"><span class="annot"><span class="annottext">loop :: Cost -&gt; IO Bool
</span><a href="#local-6989586621681156571"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621681156570"><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156570"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-186"></span><span>                 </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156569"><span class="annot"><span class="annottext">rechint :: [(ConstRef O, HintMode)] -&gt; [(ConstRef O, HintMode)]
</span><a href="#local-6989586621681156569"><span class="hs-identifier hs-var hs-var">rechint</span></a></span></span><span> </span><span id="local-6989586621681156568"><span class="annot"><span class="annottext">[(ConstRef O, HintMode)]
</span><a href="#local-6989586621681156568"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><a href="#local-6989586621681156576"><span class="hs-identifier hs-var">recinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-187"></span><span>                                  </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(ConstRef O, HintMode)]
</span><a href="#local-6989586621681156568"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-188"></span><span>                                  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CSPat O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156567"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156567"><span class="hs-identifier hs-var">recdef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156567"><span class="hs-identifier hs-var">recdef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HintMode
</span><a href="Agda.Auto.Syntax.html#HMRecCall"><span class="hs-identifier hs-var">HMRecCall</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ConstRef O, HintMode)
-&gt; [(ConstRef O, HintMode)] -&gt; [(ConstRef O, HintMode)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(ConstRef O, HintMode)]
</span><a href="#local-6989586621681156568"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-189"></span><span>                     </span><span id="local-6989586621681156565"><span class="annot"><span class="annottext">env :: RefInfo O
</span><a href="#local-6989586621681156565"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#RIEnv"><span class="hs-identifier hs-type">RIEnv</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">rieHints :: [(ConstRef O, HintMode)]
</span><a href="Agda.Auto.Syntax.html#rieHints"><span class="hs-identifier hs-var">rieHints</span></a></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(ConstRef O, HintMode)] -&gt; [(ConstRef O, HintMode)]
</span><a href="#local-6989586621681156569"><span class="hs-identifier hs-var">rechint</span></a></span><span> </span><span class="annot"><span class="annottext">([(ConstRef O, HintMode)] -&gt; [(ConstRef O, HintMode)])
-&gt; [(ConstRef O, HintMode)] -&gt; [(ConstRef O, HintMode)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(ConstRef O -&gt; (ConstRef O, HintMode))
-&gt; [ConstRef O] -&gt; [(ConstRef O, HintMode)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="annot"><span class="annottext">HintMode
</span><a href="Agda.Auto.Syntax.html#HMNormal"><span class="hs-identifier hs-var">HMNormal</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156629"><span class="hs-identifier hs-var">myhints</span></a></span><span>
</span><span id="line-190"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rieDefFreeVars :: Int
</span><a href="Agda.Auto.Syntax.html#rieDefFreeVars"><span class="hs-identifier hs-var">rieDefFreeVars</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156575"><span class="hs-identifier hs-var">defdfv</span></a></span><span>
</span><span id="line-191"></span><span>                                 </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">rieEqReasoningConsts :: Maybe (EqReasoningConsts O)
</span><a href="Agda.Auto.Syntax.html#rieEqReasoningConsts"><span class="hs-identifier hs-var">rieEqReasoningConsts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (EqReasoningConsts O)
</span><a href="#local-6989586621681156626"><span class="hs-identifier hs-var">meqr</span></a></span><span>
</span><span id="line-192"></span><span>                                 </span><span class="hs-special">}</span><span>
</span><span id="line-193"></span><span>                 </span><span id="local-6989586621681156559"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156559"><span class="hs-identifier hs-var">depreached</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef Int
-&gt; IORef Int
-&gt; IO ()
-&gt; RefInfo O
-&gt; EE (MyPB O)
-&gt; Cost
-&gt; Cost
-&gt; IO Bool
forall blk.
IORef Int
-&gt; IORef Int
-&gt; IO ()
-&gt; blk
-&gt; MetaEnv (PB blk)
-&gt; Cost
-&gt; Cost
-&gt; IO Bool
</span><a href="Agda.Auto.NarrowingSearch.html#topSearch"><span class="hs-identifier hs-var">topSearch</span></a></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156579"><span class="hs-identifier hs-var">ticks</span></a></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span> </span><span class="annot"><span class="annottext">IO ()
</span><a href="#local-6989586621681156595"><span class="hs-identifier hs-var">hsol</span></a></span><span> </span><span class="annot"><span class="annottext">RefInfo O
</span><a href="#local-6989586621681156565"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156577"><span class="hs-identifier hs-var">initprop</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156570"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Cost
</span><a href="Agda.Auto.SearchControl.html#costIncrease"><span class="hs-identifier hs-var">costIncrease</span></a></span><span>
</span><span id="line-194"></span><span>                 </span><span id="local-6989586621681156556"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156556"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-195"></span><span>                 </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156556"><span class="hs-identifier hs-var">nsol'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156559"><span class="hs-identifier hs-var">depreached</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Cost -&gt; IO Bool
</span><a href="#local-6989586621681156571"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156570"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Cost -&gt; Cost -&gt; Cost
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Cost
</span><a href="Agda.Auto.SearchControl.html#costIncrease"><span class="hs-identifier hs-var">costIncrease</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156559"><span class="hs-identifier hs-var">depreached</span></a></span><span>
</span><span id="line-196"></span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681156553"><span class="hs-identifier hs-type">getsols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">MetaId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-198"></span><span>            </span><span id="local-6989586621681156553"><span class="annot"><span class="annottext">getsols :: [Term] -&gt; TCM [(MetaId, Expr)]
</span><a href="#local-6989586621681156553"><span class="hs-identifier hs-var hs-var">getsols</span></a></span></span><span> </span><span id="local-6989586621681156552"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156552"><span class="hs-identifier hs-var">sol</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-199"></span><span>             </span><span id="local-6989586621681156551"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156551"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Term)]
-&gt; ((MetaId, Term) -&gt; TCMT IO (MetaId, Expr))
-&gt; TCM [(MetaId, Expr)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MetaId] -&gt; [Term] -&gt; [(MetaId, Term)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; [MetaId]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156552"><span class="hs-identifier hs-var">sol</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((MetaId, Term) -&gt; TCMT IO (MetaId, Expr))
 -&gt; TCM [(MetaId, Expr)])
-&gt; ((MetaId, Term) -&gt; TCMT IO (MetaId, Expr))
-&gt; TCM [(MetaId, Expr)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156549"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156549"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156548"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681156548"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-200"></span><span>               </span><span id="local-6989586621681156547"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156547"><span class="hs-identifier hs-var">mv</span></a></span></span><span>   </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156549"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-201"></span><span>               </span><span id="local-6989586621681156545"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681156545"><span class="hs-identifier hs-var">e</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO Term
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681156548"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-202"></span><span>               </span><span id="local-6989586621681156544"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156544"><span class="hs-identifier hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
</span><a href="Agda.Auto.Convert.html#modifyAbstractExpr"><span class="hs-identifier hs-var">modifyAbstractExpr</span></a></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Expr) -&gt; TCMT IO Expr -&gt; TCMT IO Expr
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Expr -&gt; TCMT IO Expr
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156547"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO Expr -&gt; TCMT IO Expr) -&gt; TCMT IO Expr -&gt; TCMT IO Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term -&gt; TCMT IO (ReifiesTo Term)
forall i (m :: * -&gt; *).
(Reify i, MonadReify m) =&gt;
i -&gt; m (ReifiesTo i)
</span><a href="Agda.Syntax.Translation.InternalToAbstract.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681156545"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-203"></span><span>               </span><span class="annot"><span class="annottext">(MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156549"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156544"><span class="hs-identifier hs-var">expr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621681156539"><span class="hs-identifier hs-type">loop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.html#Expr"><span class="hs-identifier hs-type">A.Expr</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-206"></span><span>                 </span><span id="local-6989586621681156539"><span class="annot"><span class="annottext">loop :: MetaId -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
</span><a href="#local-6989586621681156539"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621681156538"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-207"></span><span>                   </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156537"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156537"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156536"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681156536"><span class="hs-identifier hs-var">deps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; MetaId
-&gt; (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
    [MM (Exp O) (RefInfo O)], [MetaId])
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; a
</span><span class="hs-operator hs-var">Map.!</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span><span>
</span><span id="line-208"></span><span>                   </span><span id="local-6989586621681156535"><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156535"><span class="hs-identifier hs-var">asolss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(MetaId -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)])
-&gt; [MetaId] -&gt; StateT [MetaId] (TCMT IO) [[(MetaId, Expr)]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
</span><a href="#local-6989586621681156539"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681156536"><span class="hs-identifier hs-var">deps</span></a></span><span>
</span><span id="line-209"></span><span>                   </span><span id="local-6989586621681156534"><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681156534"><span class="hs-identifier hs-var">dones</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [MetaId] (TCMT IO) [MetaId]
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-210"></span><span>                   </span><span id="local-6989586621681156532"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156532"><span class="hs-identifier hs-var">asols</span></a></span></span><span>  </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681156534"><span class="hs-identifier hs-var">dones</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>                     </span><span class="annot"><span class="annottext">[MetaId] -&gt; StateT [MetaId] (TCMT IO) ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><span class="hs-identifier hs-var">put</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [MetaId] -&gt; [MetaId]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><a href="#local-6989586621681156534"><span class="hs-identifier hs-var">dones</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>                     </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Maybe Expr -&gt; Expr
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Expr
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Expr -&gt; Expr) -&gt; Maybe Expr -&gt; Expr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [(MetaId, Expr)] -&gt; Maybe Expr
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156538"><span class="hs-identifier hs-var">midx</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156551"><span class="hs-identifier hs-var">exprs</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-213"></span><span>                   </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([(MetaId, Expr)] -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)])
-&gt; [(MetaId, Expr)] -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]] -&gt; [(MetaId, Expr)]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156535"><span class="hs-identifier hs-var">asolss</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; [(MetaId, Expr)] -&gt; [(MetaId, Expr)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156532"><span class="hs-identifier hs-var">asols</span></a></span><span>
</span><span id="line-214"></span><span>             </span><span class="hs-special">(</span><span id="local-6989586621681156525"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156525"><span class="hs-identifier hs-var">asols</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
-&gt; [MetaId] -&gt; TCMT IO ([(MetaId, Expr)], [MetaId])
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; StateT [MetaId] (TCMT IO) [(MetaId, Expr)]
</span><a href="#local-6989586621681156539"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-215"></span><span>             </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; TCM [(MetaId, Expr)]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156525"><span class="hs-identifier hs-var">asols</span></a></span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156602"><span class="hs-identifier hs-var">disprove</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-218"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156632"><span class="hs-identifier hs-var">eqcons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-219"></span><span>           </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-220"></span><span>            </span><span class="hs-special">(</span><span id="local-6989586621681156523"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156523"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156522"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156522"><span class="hs-identifier hs-var">mytype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156521"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156521"><span class="hs-identifier hs-var">mylocalVars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-221"></span><span>                </span><span id="local-6989586621681156520"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156520"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-222"></span><span>                           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156519"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156519"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156519"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-223"></span><span>                           </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-224"></span><span>                </span><span id="local-6989586621681156517"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156517"><span class="hs-identifier hs-var">ee</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCMT IO (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">(ConstDef O -&gt; IO (ConstRef O)) -&gt; ConstDef O -&gt; IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: [Char]
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;T&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">O
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MM (Exp O) (RefInfo O)
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MM (Exp O) (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MM (Exp O) (RefInfo O))
-&gt; Exp O -&gt; MM (Exp O) (RefInfo O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Sort -&gt; Exp O
forall o. Sort -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Sort"><span class="hs-identifier hs-var">Sort</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Sort
</span><a href="Agda.Auto.Syntax.html#Set"><span class="hs-identifier hs-var">Set</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">}</span><span>
</span><span id="line-225"></span><span>                </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156506"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156506"><span class="hs-identifier hs-var">restargs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156505"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156505"><span class="hs-identifier hs-var">modargs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [MM (Exp O) (RefInfo O)]
-&gt; ([MM (Exp O) (RefInfo O)], [MM (Exp O) (RefInfo O)])
forall a. Int -&gt; [a] -&gt; ([a], [a])
</span><span class="hs-identifier hs-var">splitAt</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156521"><span class="hs-identifier hs-var">mylocalVars</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156520"><span class="hs-identifier hs-var">defdfv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156521"><span class="hs-identifier hs-var">mylocalVars</span></a></span><span>
</span><span id="line-226"></span><span>                    </span><span id="local-6989586621681156504"><span class="annot"><span class="annottext">mytype' :: MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156504"><span class="hs-identifier hs-var hs-var">mytype'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(MM (Exp O) (RefInfo O)
 -&gt; MM (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O))
-&gt; MM (Exp O) (RefInfo O)
-&gt; [MM (Exp O) (RefInfo O)]
-&gt; MM (Exp O) (RefInfo O)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156502"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156502"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681156501"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156501"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Exp O -&gt; MM (Exp O) (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MM (Exp O) (RefInfo O))
-&gt; Exp O -&gt; MM (Exp O) (RefInfo O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; Hiding
-&gt; Bool
-&gt; MM (Exp O) (RefInfo O)
-&gt; Abs (MM (Exp O) (RefInfo O))
-&gt; Exp O
forall o.
Maybe (UId o) -&gt; Hiding -&gt; Bool -&gt; MExp o -&gt; Abs (MExp o) -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#Pi"><span class="hs-identifier hs-var">Pi</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="Agda.Syntax.Common.html#NotHidden"><span class="hs-identifier hs-var">NotHidden</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; MM (Exp O) (RefInfo O) -&gt; Bool
forall o. Int -&gt; MExp o -&gt; Bool
</span><a href="Agda.Auto.Convert.html#freeIn"><span class="hs-identifier hs-var">freeIn</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156501"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156501"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId -&gt; MM (Exp O) (RefInfo O) -&gt; Abs (MM (Exp O) (RefInfo O))
forall a. MId -&gt; a -&gt; Abs a
</span><a href="Agda.Auto.Syntax.html#Abs"><span class="hs-identifier hs-var">Abs</span></a></span><span> </span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156502"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156522"><span class="hs-identifier hs-var">mytype</span></a></span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156506"><span class="hs-identifier hs-var">restargs</span></a></span><span>
</span><span id="line-227"></span><span>                    </span><span id="local-6989586621681156495"><span class="annot"><span class="annottext">htyp :: MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156495"><span class="hs-identifier hs-var hs-var">htyp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConstRef O -&gt; MM (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O)
forall o. ConstRef o -&gt; MExp o -&gt; MExp o
</span><a href="Agda.Auto.Convert.html#negtype"><span class="hs-identifier hs-var">negtype</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156517"><span class="hs-identifier hs-var">ee</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156504"><span class="hs-identifier hs-var">mytype'</span></a></span><span>
</span><span id="line-228"></span><span>                    </span><span id="local-6989586621681156493"><span class="annot"><span class="annottext">sctx :: Ctx O
</span><a href="#local-6989586621681156493"><span class="hs-identifier hs-var hs-var">sctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; MId
</span><a href="Agda.Auto.Syntax.html#Id"><span class="hs-identifier hs-var">Id</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;h&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156495"><span class="hs-identifier hs-var">htyp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(MId, CExp O) -&gt; Ctx O -&gt; Ctx O
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">(MM (Exp O) (RefInfo O) -&gt; (MId, CExp O))
-&gt; [MM (Exp O) (RefInfo O)] -&gt; Ctx O
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156490"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156490"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156490"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156505"><span class="hs-identifier hs-var">modargs</span></a></span><span>
</span><span id="line-229"></span><span>                    </span><span id="local-6989586621681156489"><span class="annot"><span class="annottext">ntt :: CExp O
</span><a href="#local-6989586621681156489"><span class="hs-identifier hs-var hs-var">ntt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Exp O -&gt; MM (Exp O) (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">(Exp O -&gt; MM (Exp O) (RefInfo O))
-&gt; Exp O -&gt; MM (Exp O) (RefInfo O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
-&gt; OKHandle (RefInfo O) -&gt; Elr O -&gt; MArgList O -&gt; Exp O
forall o.
Maybe (UId o)
-&gt; OKHandle (RefInfo o) -&gt; Elr o -&gt; MArgList o -&gt; Exp o
</span><a href="Agda.Auto.Syntax.html#App"><span class="hs-identifier hs-var">App</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Metavar (Exp O) (RefInfo O))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OKVal -&gt; OKHandle (RefInfo O)
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">OKVal
</span><a href="Agda.Auto.NarrowingSearch.html#OKVal"><span class="hs-identifier hs-var">OKVal</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstRef O -&gt; Elr O
forall o. ConstRef o -&gt; Elr o
</span><a href="Agda.Auto.Syntax.html#Const"><span class="hs-identifier hs-var">Const</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156517"><span class="hs-identifier hs-var">ee</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ArgList O -&gt; MArgList O
forall a blk. a -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#NotM"><span class="hs-identifier hs-var">NotM</span></a></span><span> </span><span class="annot"><span class="annottext">ArgList O
forall o. ArgList o
</span><a href="Agda.Auto.Syntax.html#ALNil"><span class="hs-identifier hs-var">ALNil</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>                </span><span id="local-6989586621681156484"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156484"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
-&gt; Maybe ([CSPat O], ConstRef O) -&gt; Int -&gt; TCMT IO (Maybe Bool)
</span><a href="#local-6989586621681156578"><span class="hs-identifier hs-var">exsearch</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Ctx O -&gt; CExp O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156617"><span class="hs-identifier hs-var">tcSearchSC</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">Ctx O
</span><a href="#local-6989586621681156493"><span class="hs-identifier hs-var">sctx</span></a></span><span> </span><span class="annot"><span class="annottext">CExp O
</span><a href="#local-6989586621681156489"><span class="hs-identifier hs-var">ntt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O)
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156523"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156520"><span class="hs-identifier hs-var">defdfv</span></a></span><span>
</span><span id="line-231"></span><span>                </span><span id="local-6989586621681156483"><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156483"><span class="hs-identifier hs-var">rsols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([[Term]] -&gt; [[Term]]) -&gt; TCMT IO [[Term]] -&gt; TCMT IO [[Term]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; [[Term]]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [[Term]] -&gt; TCMT IO [[Term]])
-&gt; TCMT IO [[Term]] -&gt; TCMT IO [[Term]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO [[Term]] -&gt; TCMT IO [[Term]]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO [[Term]] -&gt; TCMT IO [[Term]])
-&gt; IO [[Term]] -&gt; TCMT IO [[Term]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]] -&gt; IO [[Term]]
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]]
</span><a href="#local-6989586621681156600"><span class="hs-identifier hs-var">sols</span></a></span><span>
</span><span id="line-232"></span><span>                </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156483"><span class="hs-identifier hs-var">rsols</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-233"></span><span>                  </span><span id="local-6989586621681156480"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156480"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-234"></span><span>                  </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-var">insuffsols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156480"><span class="hs-identifier hs-var">nsol'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-235"></span><span>                 </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-236"></span><span>                  </span><span id="local-6989586621681156478"><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156478"><span class="hs-identifier hs-var">aexprss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; TCM [(MetaId, Expr)])
-&gt; [[Term]] -&gt; TCMT IO [[(MetaId, Expr)]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCM [(MetaId, Expr)]
</span><a href="#local-6989586621681156553"><span class="hs-identifier hs-var">getsols</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156483"><span class="hs-identifier hs-var">rsols</span></a></span><span>
</span><span id="line-237"></span><span>                  </span><span id="local-6989586621681156477"><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156477"><span class="hs-identifier hs-var">cexprss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
-&gt; ([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; TCMT IO [[(MetaId, Expr)]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156478"><span class="hs-identifier hs-var">aexprss</span></a></span><span> </span><span class="annot"><span class="annottext">(([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
 -&gt; TCMT IO [[(MetaId, Expr)]])
-&gt; ([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; TCMT IO [[(MetaId, Expr)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; [(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
 -&gt; [(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; ((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; [(MetaId, Expr)]
-&gt; TCMT IO [(MetaId, Expr)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681156476"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156476"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156475"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156475"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-238"></span><span>                    </span><span id="local-6989586621681156474"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156474"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156476"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-239"></span><span>                    </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156474"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-240"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156476"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; (MetaId, Expr)) -&gt; TCMT IO Expr -&gt; TCMT IO (MetaId, Expr)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; TCMT IO (ConOfAbs Expr)
forall a (m :: * -&gt; *).
(ToConcrete a, MonadAbsToCon m) =&gt;
a -&gt; m (ConOfAbs a)
</span><a href="Agda.Syntax.Translation.AbstractToConcrete.html#abstractToConcrete_"><span class="hs-identifier hs-var">abstractToConcrete_</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156475"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-241"></span><span>                  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156470"><span class="annot"><span class="annottext">ss :: Expr -&gt; [Char]
</span><a href="#local-6989586621681156470"><span class="hs-identifier hs-var hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; [Char] -&gt; [Char]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">dropWhile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Char]) -&gt; (Expr -&gt; [Char]) -&gt; Expr -&gt; [Char]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; [Char] -&gt; [Char]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">dropWhile</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">' '</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Char]) -&gt; (Expr -&gt; [Char]) -&gt; Expr -&gt; [Char]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span>
</span><span id="line-242"></span><span>                      </span><span id="local-6989586621681156467"><span class="annot"><span class="annottext">disp :: [(MetaId, Expr)] -&gt; [Char]
</span><a href="#local-6989586621681156467"><span class="hs-identifier hs-var hs-var">disp</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156466"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156466"><span class="hs-identifier hs-var">cexpr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
</span><a href="#local-6989586621681156470"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156466"><span class="hs-identifier hs-var">cexpr</span></a></span><span>
</span><span id="line-243"></span><span>                      </span><span class="annot"><a href="#local-6989586621681156467"><span class="hs-identifier hs-var">disp</span></a></span><span> </span><span id="local-6989586621681156465"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156465"><span class="hs-identifier hs-var">cexprs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((MetaId, Expr) -&gt; [Char]) -&gt; [(MetaId, Expr)] -&gt; [Char]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156463"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156463"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156462"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156462"><span class="hs-identifier hs-var">cexpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
</span><a href="#local-6989586621681156470"><span class="hs-identifier hs-var">ss</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156462"><span class="hs-identifier hs-var">cexpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156465"><span class="hs-identifier hs-var">cexprs</span></a></span><span>
</span><span id="line-244"></span><span>                  </span><span id="local-6989586621681156461"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156461"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156579"><span class="hs-identifier hs-var">ticks</span></a></span><span>
</span><span id="line-245"></span><span>                  </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="annot"><span class="annottext">([[Char]] -&gt; [Char]) -&gt; [[Char]] -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-246"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Listing disproof(s) &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156483"><span class="hs-identifier hs-var">rsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]] -&gt; [[Char]]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span>
</span><span id="line-247"></span><span>                    </span><span class="annot"><span class="annottext">[([(MetaId, Expr)], Int)]
-&gt; (([(MetaId, Expr)], Int) -&gt; [Char]) -&gt; [[Char]]
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[(MetaId, Expr)]] -&gt; [Int] -&gt; [([(MetaId, Expr)], Int)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156477"><span class="hs-identifier hs-var">cexprss</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156457"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156457"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156456"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156456"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156456"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;  &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; [Char]
</span><a href="#local-6989586621681156467"><span class="hs-identifier hs-var">disp</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156457"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-248"></span><span>            </span><span class="annot"><span class="annottext">[(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
  [MM (Exp O) (RefInfo O)], [MetaId])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Metavariable dependencies not allowed in disprove mode&quot;</span></span><span>
</span><span id="line-249"></span><span>           </span><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Metavariable dependencies not allowed in disprove mode&quot;</span></span><span>
</span><span id="line-250"></span><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-251"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681156455"><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><a href="#local-6989586621681156455"><span class="hs-identifier hs-var">recinfo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156454"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156454"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-252"></span><span>           </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-253"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156453"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156453"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156452"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681156452"><span class="hs-identifier hs-var">clause</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-254"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681156451"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156451"><span class="hs-identifier hs-var">rectyp'</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156634"><span class="hs-identifier hs-var">mymrectyp</span></a></span><span>
</span><span id="line-255"></span><span>             </span><span id="local-6989586621681156450"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156450"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156453"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-256"></span><span>             </span><span id="local-6989586621681156449"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156449"><span class="hs-identifier hs-var">myrecdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCMT IO (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">(ConstDef O -&gt; IO (ConstRef O)) -&gt; ConstDef O -&gt; IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: [Char]
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156453"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MM (Exp O) (RefInfo O)
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156451"><span class="hs-identifier hs-var">rectyp'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156450"><span class="hs-identifier hs-var">defdfv</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-257"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156448"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156448"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
-&gt; MetaId -&gt; Clause -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-var">constructPats</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681156631"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681156452"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-258"></span><span>             </span><span id="local-6989586621681156446"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156446"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156453"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-259"></span><span>             </span><span class="annot"><span class="annottext">(Maybe ([CSPat O], ConstRef O), Int)
-&gt; TCMT IO (Maybe ([CSPat O], ConstRef O), Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">((Maybe ([CSPat O], ConstRef O), Int)
 -&gt; TCMT IO (Maybe ([CSPat O], ConstRef O), Int))
-&gt; (Maybe ([CSPat O], ConstRef O), Int)
-&gt; TCMT IO (Maybe ([CSPat O], ConstRef O), Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[CSPat O] -&gt; Bool
</span><a href="Agda.Auto.Convert.html#contains_constructor"><span class="hs-identifier hs-var">contains_constructor</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156448"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-260"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([CSPat O], ConstRef O) -&gt; Maybe ([CSPat O], ConstRef O)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156448"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156449"><span class="hs-identifier hs-var">myrecdef</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156446"><span class="hs-identifier hs-var">defdfv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span>              </span><span class="hs-keyword">else</span><span>
</span><span id="line-262"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156446"><span class="hs-identifier hs-var">defdfv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-263"></span><span>            </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Maybe ([CSPat O], ConstRef O), Int)
-&gt; TCMT IO (Maybe ([CSPat O], ConstRef O), Int)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-264"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156444"><span class="annot"><span class="annottext">tc :: (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
 [MM (Exp O) (RefInfo O)])
-&gt; Bool -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156444"><span class="hs-identifier hs-var hs-var">tc</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156443"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156443"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156442"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156442"><span class="hs-identifier hs-var">mytype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156441"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156441"><span class="hs-identifier hs-var">mylocalVars</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681156440"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156440"><span class="hs-identifier hs-var">isdep</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Ctx O -&gt; CExp O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156617"><span class="hs-identifier hs-var">tcSearchSC</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156440"><span class="hs-identifier hs-var">isdep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(MM (Exp O) (RefInfo O) -&gt; (MId, CExp O))
-&gt; [MM (Exp O) (RefInfo O)] -&gt; Ctx O
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156439"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156439"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId
</span><a href="Agda.Auto.Syntax.html#NoId"><span class="hs-identifier hs-var">NoId</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156439"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156441"><span class="hs-identifier hs-var">mylocalVars</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156442"><span class="hs-identifier hs-var">mytype</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O)
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156443"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>              </span><span id="local-6989586621681156438"><span class="annot"><span class="annottext">initprop :: EE (MyPB O)
</span><a href="#local-6989586621681156438"><span class="hs-identifier hs-var hs-var">initprop</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-266"></span><span>                </span><span class="annot"><span class="annottext">(EE (MyPB O)
 -&gt; (Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))
 -&gt; EE (MyPB O))
-&gt; EE (MyPB O)
-&gt; [(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
-&gt; EE (MyPB O)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156437"><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156437"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156436"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156436"><span class="hs-identifier hs-var">ineq</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156435"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156435"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156434"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156434"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">(Prop (RefInfo O) -&gt; EE (MyPB O))
-&gt; Prop (RefInfo O) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
-&gt; EE (MyPB O) -&gt; EE (MyPB O) -&gt; Prop (RefInfo O)
forall blk.
Maybe [Term blk]
-&gt; MetaEnv (PB blk) -&gt; MetaEnv (PB blk) -&gt; Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#And"><span class="hs-identifier hs-var">And</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156437"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; CExp O -&gt; CExp O -&gt; EE (MyPB O)
forall o. Bool -&gt; CExp o -&gt; CExp o -&gt; EE (MyPB o)
</span><a href="Agda.Auto.Typecheck.html#comp%27"><span class="hs-identifier hs-var">comp'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156436"><span class="hs-identifier hs-var">ineq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156435"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O) -&gt; CExp O
forall o. MExp o -&gt; CExp o
</span><a href="Agda.Auto.Syntax.html#closify"><span class="hs-identifier hs-var">closify</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156434"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-267"></span><span>                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(EE (MyPB O)
 -&gt; (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])
 -&gt; EE (MyPB O))
-&gt; EE (MyPB O)
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
-&gt; EE (MyPB O)
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156431"><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156431"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156430"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156429"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156429"><span class="hs-identifier hs-var">mt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156428"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156428"><span class="hs-identifier hs-var">mlv</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-268"></span><span>                   </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; Metavar (Exp O) (RefInfo O) -&gt; Bool
forall a1 blk1 a2 bkl2. Metavar a1 blk1 -&gt; Metavar a2 bkl2 -&gt; Bool
</span><a href="Agda.Auto.NarrowingSearch.html#hequalMetavar"><span class="hs-identifier hs-var">hequalMetavar</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156606"><span class="hs-identifier hs-var">mainm</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-269"></span><span>                    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><a href="#local-6989586621681156455"><span class="hs-identifier hs-var">recinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-270"></span><span>                     </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156426"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156426"><span class="hs-identifier hs-var">recpats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156425"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156425"><span class="hs-identifier hs-var">recdef</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-271"></span><span>                      </span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">(Prop (RefInfo O) -&gt; EE (MyPB O))
-&gt; Prop (RefInfo O) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O) -&gt; EE (MyPB O) -&gt; Prop (RefInfo O)
forall blk. MetaEnv (PB blk) -&gt; MetaEnv (PB blk) -&gt; Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#Sidecondition"><span class="hs-identifier hs-var">Sidecondition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([Int], Int, [Int])
-&gt; ConstRef O -&gt; MM (Exp O) (RefInfo O) -&gt; EE (MyPB O)
forall o.
([Int], Int, [Int]) -&gt; ConstRef o -&gt; MExp o -&gt; EE (MyPB o)
</span><a href="Agda.Auto.CaseSplit.html#localTerminationSidecond"><span class="hs-identifier hs-var">localTerminationSidecond</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[CSPat O] -&gt; ([Int], Int, [Int])
forall o. [CSPat o] -&gt; ([Int], Int, [Int])
</span><a href="Agda.Auto.CaseSplit.html#localTerminationEnv"><span class="hs-identifier hs-var">localTerminationEnv</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156426"><span class="hs-identifier hs-var">recpats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156425"><span class="hs-identifier hs-var">recdef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O) -&gt; MM (Exp O) (RefInfo O)
forall a blk. Metavar a blk -&gt; MM a blk
</span><a href="Agda.Auto.NarrowingSearch.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span><span> </span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-272"></span><span>                                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
 [MM (Exp O) (RefInfo O)])
-&gt; Bool -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156444"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156429"><span class="hs-identifier hs-var">mt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156428"><span class="hs-identifier hs-var">mlv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>                     </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">(Prop (RefInfo O) -&gt; EE (MyPB O))
-&gt; Prop (RefInfo O) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
-&gt; EE (MyPB O) -&gt; EE (MyPB O) -&gt; Prop (RefInfo O)
forall blk.
Maybe [Term blk]
-&gt; MetaEnv (PB blk) -&gt; MetaEnv (PB blk) -&gt; Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#And"><span class="hs-identifier hs-var">And</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156431"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
 [MM (Exp O) (RefInfo O)])
-&gt; Bool -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156444"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156429"><span class="hs-identifier hs-var">mt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156428"><span class="hs-identifier hs-var">mlv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>                   </span><span class="hs-keyword">else</span><span>
</span><span id="line-275"></span><span>                    </span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">(Prop (RefInfo O) -&gt; EE (MyPB O))
-&gt; Prop (RefInfo O) -&gt; EE (MyPB O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
-&gt; EE (MyPB O) -&gt; EE (MyPB O) -&gt; Prop (RefInfo O)
forall blk.
Maybe [Term blk]
-&gt; MetaEnv (PB blk) -&gt; MetaEnv (PB blk) -&gt; Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#And"><span class="hs-identifier hs-var">And</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Term (RefInfo O)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156431"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
 [MM (Exp O) (RefInfo O)])
-&gt; Bool -&gt; EE (MyPB O)
</span><a href="#local-6989586621681156444"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156430"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156429"><span class="hs-identifier hs-var">mt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156428"><span class="hs-identifier hs-var">mlv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>                  </span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prop (RefInfo O) -&gt; EE (MyPB O)
forall blk. Prop blk -&gt; MetaEnv (PB blk)
</span><a href="Agda.Auto.NarrowingSearch.html#mpret"><span class="hs-identifier hs-var">mpret</span></a></span><span> </span><span class="annot"><span class="annottext">Prop (RefInfo O)
forall blk. Prop blk
</span><a href="Agda.Auto.NarrowingSearch.html#OK"><span class="hs-identifier hs-var">OK</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>                 </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156632"><span class="hs-identifier hs-var">eqcons</span></a></span><span>
</span><span id="line-280"></span><span>          </span><span id="local-6989586621681156421"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156421"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
-&gt; Maybe ([CSPat O], ConstRef O) -&gt; Int -&gt; TCMT IO (Maybe Bool)
</span><a href="#local-6989586621681156578"><span class="hs-identifier hs-var">exsearch</span></a></span><span> </span><span class="annot"><span class="annottext">EE (MyPB O)
</span><a href="#local-6989586621681156438"><span class="hs-identifier hs-var">initprop</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ([CSPat O], ConstRef O)
</span><a href="#local-6989586621681156455"><span class="hs-identifier hs-var">recinfo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156454"><span class="hs-identifier hs-var">defdfv</span></a></span><span>
</span><span id="line-281"></span><span>          </span><span id="local-6989586621681156420"><span class="annot"><span class="annottext">[(MetaId, InteractionId)]
</span><a href="#local-6989586621681156420"><span class="hs-identifier hs-var">riis</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((InteractionId, MetaId) -&gt; (MetaId, InteractionId))
-&gt; [(InteractionId, MetaId)] -&gt; [(MetaId, InteractionId)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(InteractionId, MetaId) -&gt; (MetaId, InteractionId)
forall a b. (a, b) -&gt; (b, a)
</span><span class="hs-identifier hs-var">swap</span></span><span> </span><span class="annot"><span class="annottext">([(InteractionId, MetaId)] -&gt; [(MetaId, InteractionId)])
-&gt; TCMT IO [(InteractionId, MetaId)]
-&gt; TCMT IO [(MetaId, InteractionId)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO [(InteractionId, MetaId)]
forall (m :: * -&gt; *). ReadTCState m =&gt; m [(InteractionId, MetaId)]
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#getInteractionIdsAndMetas"><span class="hs-identifier hs-var">getInteractionIdsAndMetas</span></a></span><span>
</span><span id="line-282"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156417"><span class="annot"><span class="annottext">timeoutString :: [Char]
</span><a href="#local-6989586621681156417"><span class="hs-identifier hs-var hs-var">timeoutString</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Maybe Bool -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isNothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156421"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; after timeout (&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">TimeOut -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">TimeOut
</span><a href="#local-6989586621681156674"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;ms)&quot;</span></span><span>
</span><span id="line-283"></span><span>                            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-284"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156603"><span class="hs-identifier hs-var">listmode</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-285"></span><span>            </span><span id="local-6989586621681156415"><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156415"><span class="hs-identifier hs-var">rsols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([[Term]] -&gt; [[Term]]) -&gt; TCMT IO [[Term]] -&gt; TCMT IO [[Term]]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; [[Term]]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [[Term]] -&gt; TCMT IO [[Term]])
-&gt; TCMT IO [[Term]] -&gt; TCMT IO [[Term]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO [[Term]] -&gt; TCMT IO [[Term]]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO [[Term]] -&gt; TCMT IO [[Term]])
-&gt; IO [[Term]] -&gt; TCMT IO [[Term]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]] -&gt; IO [[Term]]
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]]
</span><a href="#local-6989586621681156600"><span class="hs-identifier hs-var">sols</span></a></span><span>
</span><span id="line-286"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156415"><span class="hs-identifier hs-var">rsols</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-287"></span><span>              </span><span id="local-6989586621681156414"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156414"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-288"></span><span>              </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-var">insuffsols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156414"><span class="hs-identifier hs-var">nsol'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156417"><span class="hs-identifier hs-var">timeoutString</span></a></span><span>
</span><span id="line-289"></span><span>             </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>              </span><span id="local-6989586621681156413"><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156413"><span class="hs-identifier hs-var">aexprss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([Term] -&gt; TCM [(MetaId, Expr)])
-&gt; [[Term]] -&gt; TCMT IO [[(MetaId, Expr)]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCM [(MetaId, Expr)]
</span><a href="#local-6989586621681156553"><span class="hs-identifier hs-var">getsols</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156415"><span class="hs-identifier hs-var">rsols</span></a></span><span>
</span><span id="line-291"></span><span>              </span><span class="hs-comment">-- cexprss &lt;- mapM (mapM (\(mi, e) -&gt; lookupMeta mi &gt;&gt;= \mv -&gt; withMetaInfo (getMetaInfo mv) $ abstractToConcrete_ e &gt;&gt;= \e' -&gt; return (mi, e'))) aexprss</span><span>
</span><span id="line-292"></span><span>              </span><span id="local-6989586621681156412"><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156412"><span class="hs-identifier hs-var">cexprss</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
-&gt; ([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; TCMT IO [[(MetaId, Expr)]]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156413"><span class="hs-identifier hs-var">aexprss</span></a></span><span> </span><span class="annot"><span class="annottext">(([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
 -&gt; TCMT IO [[(MetaId, Expr)]])
-&gt; ([(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; TCMT IO [[(MetaId, Expr)]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-293"></span><span>                </span><span class="annot"><span class="annottext">((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; [(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
 -&gt; [(MetaId, Expr)] -&gt; TCMT IO [(MetaId, Expr)])
-&gt; ((MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; [(MetaId, Expr)]
-&gt; TCMT IO [(MetaId, Expr)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156411"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156411"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156410"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156410"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-294"></span><span>                  </span><span id="local-6989586621681156409"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156409"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156411"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-295"></span><span>                  </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156409"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr))
-&gt; TCMT IO (MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-296"></span><span>                    </span><span id="local-6989586621681156408"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156408"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; TCMT IO (ConOfAbs Expr)
forall a (m :: * -&gt; *).
(ToConcrete a, MonadAbsToCon m) =&gt;
a -&gt; m (ConOfAbs a)
</span><a href="Agda.Syntax.Translation.AbstractToConcrete.html#abstractToConcrete_"><span class="hs-identifier hs-var">abstractToConcrete_</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156410"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-297"></span><span>                    </span><span class="annot"><span class="annottext">(MetaId, Expr) -&gt; TCMT IO (MetaId, Expr)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156411"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156408"><span class="hs-identifier hs-var">e'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156407"><span class="annot"><span class="annottext">disp :: [(MetaId, Expr)] -&gt; [Char]
</span><a href="#local-6989586621681156407"><span class="hs-identifier hs-var hs-var">disp</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156406"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156406"><span class="hs-identifier hs-var">cexpr</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156406"><span class="hs-identifier hs-var">cexpr</span></a></span><span>
</span><span id="line-299"></span><span>                  </span><span class="annot"><a href="#local-6989586621681156407"><span class="hs-identifier hs-var">disp</span></a></span><span> </span><span id="local-6989586621681156405"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156405"><span class="hs-identifier hs-var">cexprs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[Char]] -&gt; [Char]) -&gt; [[Char]] -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; ((MetaId, Expr) -&gt; [Char]) -&gt; [[Char]]
forall (m :: * -&gt; *) a b. Functor m =&gt; m a -&gt; (a -&gt; b) -&gt; m b
</span><a href="Agda.Utils.Functor.html#for"><span class="hs-identifier hs-var">for</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156405"><span class="hs-identifier hs-var">cexprs</span></a></span><span> </span><span class="annot"><span class="annottext">(((MetaId, Expr) -&gt; [Char]) -&gt; [[Char]])
-&gt; ((MetaId, Expr) -&gt; [Char]) -&gt; [[Char]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156404"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156404"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156403"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156403"><span class="hs-identifier hs-var">cexpr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-300"></span><span>                    </span><span class="annot"><span class="annottext">[Char]
-&gt; (InteractionId -&gt; [Char]) -&gt; Maybe InteractionId -&gt; [Char]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156404"><span class="hs-identifier hs-var">mi</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaId -&gt; [(MetaId, InteractionId)] -&gt; Maybe InteractionId
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156404"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, InteractionId)]
</span><a href="#local-6989586621681156420"><span class="hs-identifier hs-var">riis</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-301"></span><span>                      </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; := &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156403"><span class="hs-identifier hs-var">cexpr</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-302"></span><span>              </span><span id="local-6989586621681156401"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156401"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156579"><span class="hs-identifier hs-var">ticks</span></a></span><span>
</span><span id="line-303"></span><span>              </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Listing solution(s) &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156415"><span class="hs-identifier hs-var">rsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156417"><span class="hs-identifier hs-var">timeoutString</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-304"></span><span>                        </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">([(MetaId, Expr)] -&gt; Int -&gt; [Char])
-&gt; [[(MetaId, Expr)]] -&gt; [Int] -&gt; [[Char]]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156399"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156399"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681156398"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156398"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156398"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;  &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; [Char]
</span><a href="#local-6989586621681156407"><span class="hs-identifier hs-var">disp</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156399"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[(MetaId, Expr)]]
</span><a href="#local-6989586621681156412"><span class="hs-identifier hs-var">cexprss</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span class="hs-glyph">..</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>           </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">{- not listmode -}</span><span>
</span><span id="line-306"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156421"><span class="hs-identifier hs-var">res</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-307"></span><span>             </span><span class="annot"><span class="annottext">Maybe Bool
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-308"></span><span>              </span><span id="local-6989586621681156397"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156397"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-309"></span><span>              </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-var">insuffsols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156397"><span class="hs-identifier hs-var">nsol'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156417"><span class="hs-identifier hs-var">timeoutString</span></a></span><span>
</span><span id="line-310"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156396"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156396"><span class="hs-identifier hs-var">depthreached</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-311"></span><span>              </span><span id="local-6989586621681156395"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156395"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156579"><span class="hs-identifier hs-var">ticks</span></a></span><span>
</span><span id="line-312"></span><span>              </span><span id="local-6989586621681156394"><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156394"><span class="hs-identifier hs-var">rsols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [[Term]] -&gt; TCMT IO [[Term]]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO [[Term]] -&gt; TCMT IO [[Term]])
-&gt; IO [[Term]] -&gt; TCMT IO [[Term]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]] -&gt; IO [[Term]]
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [[Term]]
</span><a href="#local-6989586621681156600"><span class="hs-identifier hs-var">sols</span></a></span><span>
</span><span id="line-313"></span><span>              </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156394"><span class="hs-identifier hs-var">rsols</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-314"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-315"></span><span>                  </span><span id="local-6989586621681156393"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156393"><span class="hs-identifier hs-var">nsol'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156597"><span class="hs-identifier hs-var">nsol</span></a></span><span>
</span><span id="line-316"></span><span>                  </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-var">insuffsols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156601"><span class="hs-identifier hs-var">numsols</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156393"><span class="hs-identifier hs-var">nsol'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>                </span><span id="local-6989586621681156392"><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156392"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[[Term]] -&gt; TCM AutoResult
</span><a href="#local-6989586621681156391"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156392"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-318"></span><span>                  </span><span class="hs-comment">-- Andreas, 2015-05-17  Issue 1504</span><span>
</span><span id="line-319"></span><span>                  </span><span class="hs-comment">-- If giving a solution failed (e.g. ill-typed)</span><span>
</span><span id="line-320"></span><span>                  </span><span class="hs-comment">-- we could try the next one.</span><span>
</span><span id="line-321"></span><span>                  </span><span class="hs-comment">-- However, currently @terms@ is always a singleton list.</span><span>
</span><span id="line-322"></span><span>                  </span><span class="hs-comment">-- Thus, the following @loop@ is not doing something very</span><span>
</span><span id="line-323"></span><span>                  </span><span class="hs-comment">-- meaningful.</span><span>
</span><span id="line-324"></span><span>                  </span><span class="annot"><a href="#local-6989586621681156391"><span class="hs-identifier hs-type">loop</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">I.Term</span></a></span><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="annot"><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-type">AutoResult</span></a></span><span>
</span><span id="line-325"></span><span>                  </span><span id="local-6989586621681156391"><span class="annot"><span class="annottext">loop :: [[Term]] -&gt; TCM AutoResult
</span><a href="#local-6989586621681156391"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AutoResult -&gt; TCM AutoResult) -&gt; AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AutoProgress -&gt; Maybe [Char] -&gt; AutoResult
</span><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(InteractionId, [Char])] -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#Solutions"><span class="hs-identifier hs-var">Solutions</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; Maybe [Char]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>                  </span><span class="annot"><a href="#local-6989586621681156391"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156390"><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156390"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681156389"><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156389"><span class="hs-identifier hs-var">terms'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-327"></span><span>                    </span><span class="hs-comment">-- On exception, try next solution</span><span>
</span><span id="line-328"></span><span>                    </span><span class="annot"><span class="annottext">(TCM AutoResult -&gt; (TCErr -&gt; TCM AutoResult) -&gt; TCM AutoResult)
-&gt; (TCErr -&gt; TCM AutoResult) -&gt; TCM AutoResult -&gt; TCM AutoResult
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">TCM AutoResult -&gt; (TCErr -&gt; TCM AutoResult) -&gt; TCM AutoResult
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-identifier hs-var">catchError</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681156386"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681156386"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
[Char] -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;auto&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Solution failed:&quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%3F%3E"><span class="hs-operator hs-var">TCM.&lt;?&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">TCM.prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681156386"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-329"></span><span>                                               </span><span class="annot"><span class="annottext">[[Term]] -&gt; TCM AutoResult
</span><a href="#local-6989586621681156391"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[[Term]]
</span><a href="#local-6989586621681156389"><span class="hs-identifier hs-var">terms'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCM AutoResult -&gt; TCM AutoResult)
-&gt; TCM AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-330"></span><span>                      </span><span id="local-6989586621681156382"><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156382"><span class="hs-identifier hs-var">exprs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Term] -&gt; TCM [(MetaId, Expr)]
</span><a href="#local-6989586621681156553"><span class="hs-identifier hs-var">getsols</span></a></span><span> </span><span class="annot"><span class="annottext">[Term]
</span><a href="#local-6989586621681156390"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-331"></span><span>                      </span><span class="annot"><span class="annottext">[Char] -&gt; Int -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
[Char] -&gt; Int -&gt; TCMT IO Doc -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSDoc"><span class="hs-identifier hs-var">reportSDoc</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;auto&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">20</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Doc -&gt; TCMT IO ()) -&gt; TCMT IO Doc -&gt; TCMT IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc
</span><span class="hs-string">&quot;Trying solution &quot;</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Doc -&gt; TCMT IO Doc -&gt; TCMT IO Doc
forall (m :: * -&gt; *). Applicative m =&gt; m Doc -&gt; m Doc -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#%3C%2B%3E"><span class="hs-operator hs-var">TCM.&lt;+&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; TCMT IO Doc
forall a (m :: * -&gt; *). (PrettyTCM a, MonadPretty m) =&gt; a -&gt; m Doc
</span><a href="Agda.TypeChecking.Pretty.html#prettyTCM"><span class="hs-identifier hs-var">TCM.prettyTCM</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156382"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-332"></span><span>                      </span><span id="local-6989586621681156380"><span class="annot"><span class="annottext">[(Maybe (InteractionId, [Char]), Maybe [Char])]
</span><a href="#local-6989586621681156380"><span class="hs-identifier hs-var">giveress</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
-&gt; ((MetaId, Expr)
    -&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char]))
-&gt; TCMT IO [(Maybe (InteractionId, [Char]), Maybe [Char])]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156382"><span class="hs-identifier hs-var">exprs</span></a></span><span> </span><span class="annot"><span class="annottext">(((MetaId, Expr)
  -&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char]))
 -&gt; TCMT IO [(Maybe (InteractionId, [Char]), Maybe [Char])])
-&gt; ((MetaId, Expr)
    -&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char]))
-&gt; TCMT IO [(Maybe (InteractionId, [Char]), Maybe [Char])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156379"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156379"><span class="hs-identifier hs-var">mi</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156378"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156378"><span class="hs-identifier hs-var">expr0</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-333"></span><span>                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156377"><span class="annot"><span class="annottext">expr :: Expr
</span><a href="#local-6989586621681156377"><span class="hs-identifier hs-var hs-var">expr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Expr
forall a. KillRange a =&gt; KillRangeT a
</span><a href="Agda.Syntax.Position.html#killRange"><span class="hs-identifier hs-var">killRange</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156378"><span class="hs-identifier hs-var">expr0</span></a></span><span>
</span><span id="line-334"></span><span>                        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [(MetaId, InteractionId)] -&gt; Maybe InteractionId
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156379"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, InteractionId)]
</span><a href="#local-6989586621681156420"><span class="hs-identifier hs-var">riis</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>                         </span><span class="annot"><span class="annottext">Maybe InteractionId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>                          </span><span class="hs-comment">-- catchError</span><span>
</span><span id="line-337"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">UseForce -&gt; Maybe InteractionId -&gt; MetaId -&gt; Expr -&gt; TCMT IO Term
</span><a href="Agda.Interaction.BasicOps.html#giveExpr"><span class="hs-identifier hs-var">giveExpr</span></a></span><span> </span><span class="annot"><span class="annottext">UseForce
</span><a href="Agda.Interaction.Base.html#WithoutForce"><span class="hs-identifier hs-var">WithoutForce</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe InteractionId
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156379"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156377"><span class="hs-identifier hs-var">expr</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO Term
-&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char])
-&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char])
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (InteractionId, [Char]), Maybe [Char])
-&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (InteractionId, [Char])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>                           </span><span class="hs-comment">-- (const retry)</span><span>
</span><span id="line-339"></span><span>                           </span><span class="hs-comment">-- (\_ -&gt; return (Nothing, Just (&quot;Failed to give expr for side solution of &quot; ++ show mi)))</span><span>
</span><span id="line-340"></span><span>                         </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156373"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156373"><span class="hs-identifier hs-var">ii'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><span id="local-6989586621681156372"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156372"><span class="hs-identifier hs-var">ae</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">UseForce -&gt; InteractionId -&gt; Maybe Range -&gt; Expr -&gt; TCMT IO Expr
</span><a href="Agda.Interaction.BasicOps.html#give"><span class="hs-identifier hs-var">give</span></a></span><span> </span><span class="annot"><span class="annottext">UseForce
</span><a href="Agda.Interaction.Base.html#WithoutForce"><span class="hs-identifier hs-var">WithoutForce</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156373"><span class="hs-identifier hs-var">ii'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Range
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156377"><span class="hs-identifier hs-var">expr</span></a></span><span>
</span><span id="line-341"></span><span>                                        </span><span id="local-6989586621681156370"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156370"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156379"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-342"></span><span>                                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156369"><span class="annot"><span class="annottext">scope :: ScopeInfo
</span><a href="#local-6989586621681156369"><span class="hs-identifier hs-var hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; ScopeInfo
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaScope"><span class="hs-identifier hs-var">getMetaScope</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156370"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-343"></span><span>                                        </span><span id="local-6989586621681156367"><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156367"><span class="hs-identifier hs-var">ce</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; Expr -&gt; TCMT IO (ConOfAbs Expr)
forall a (m :: * -&gt; *).
(ToConcrete a, MonadAbsToCon m) =&gt;
ScopeInfo -&gt; a -&gt; m (ConOfAbs a)
</span><a href="Agda.Syntax.Translation.AbstractToConcrete.html#abstractToConcreteScope"><span class="hs-identifier hs-var">abstractToConcreteScope</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681156369"><span class="hs-identifier hs-var">scope</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156372"><span class="hs-identifier hs-var">ae</span></a></span><span>
</span><span id="line-344"></span><span>                                        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156366"><span class="annot"><span class="annottext">cmnt :: [Char]
</span><a href="#local-6989586621681156366"><span class="hs-identifier hs-var hs-var">cmnt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156373"><span class="hs-identifier hs-var">ii'</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; InteractionId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall {a} {p}. IsString a =&gt; p -&gt; a
</span><a href="#local-6989586621681156365"><span class="hs-identifier hs-var">agsyinfo</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156395"><span class="hs-identifier hs-var">ticks</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-345"></span><span>                                        </span><span class="annot"><span class="annottext">(Maybe (InteractionId, [Char]), Maybe [Char])
-&gt; TCMT IO (Maybe (InteractionId, [Char]), Maybe [Char])
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(InteractionId, [Char]) -&gt; Maybe (InteractionId, [Char])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156373"><span class="hs-identifier hs-var">ii'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Expr
</span><a href="#local-6989586621681156367"><span class="hs-identifier hs-var">ce</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156366"><span class="hs-identifier hs-var">cmnt</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>                           </span><span class="hs-comment">-- Andreas, 2015-05-17, Issue 1504</span><span>
</span><span id="line-347"></span><span>                           </span><span class="hs-comment">-- When Agsy produces an ill-typed solution, return nothing.</span><span>
</span><span id="line-348"></span><span>                           </span><span class="hs-comment">-- TODO: try other solution.</span><span>
</span><span id="line-349"></span><span>                           </span><span class="hs-comment">-- `catchError` const retry -- (return (Nothing, Nothing))</span><span>
</span><span id="line-350"></span><span>                      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156364"><span class="annot"><span class="annottext">msg :: Maybe [Char]
</span><a href="#local-6989586621681156364"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156382"><span class="hs-identifier hs-var">exprs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-351"></span><span>                                 </span><span class="annot"><span class="annottext">Maybe [Char]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-352"></span><span>                                </span><span class="hs-keyword">else</span><span>
</span><span id="line-353"></span><span>                                 </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe [Char]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; Maybe [Char]) -&gt; [Char] -&gt; Maybe [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Also gave solution(s) for hole(s)&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-354"></span><span>                                         </span><span class="annot"><span class="annottext">((MetaId, Expr) -&gt; [Char]) -&gt; [(MetaId, Expr)] -&gt; [Char]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681156363"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156363"><span class="hs-identifier hs-var">mi'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Expr
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-355"></span><span>                                          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156363"><span class="hs-identifier hs-var">mi'</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; MetaId -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [(MetaId, InteractionId)] -&gt; Maybe InteractionId
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156363"><span class="hs-identifier hs-var">mi'</span></a></span><span> </span><span class="annot"><span class="annottext">[(MetaId, InteractionId)]
</span><a href="#local-6989586621681156420"><span class="hs-identifier hs-var">riis</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Maybe InteractionId
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156363"><span class="hs-identifier hs-var">mi'</span></a></span><span class="hs-special">;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156362"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156362"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156362"><span class="hs-identifier hs-var">ii</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>                                         </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(MetaId, Expr)]
</span><a href="#local-6989586621681156382"><span class="hs-identifier hs-var">exprs</span></a></span><span>
</span><span id="line-357"></span><span>                      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156361"><span class="annot"><span class="annottext">msgs :: [[Char]]
</span><a href="#local-6989586621681156361"><span class="hs-identifier hs-var hs-var">msgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe [Char]] -&gt; [[Char]]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe [Char]] -&gt; [[Char]]) -&gt; [Maybe [Char]] -&gt; [[Char]]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621681156364"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe [Char] -&gt; [Maybe [Char]] -&gt; [Maybe [Char]]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">((Maybe (InteractionId, [Char]), Maybe [Char]) -&gt; Maybe [Char])
-&gt; [(Maybe (InteractionId, [Char]), Maybe [Char])]
-&gt; [Maybe [Char]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (InteractionId, [Char]), Maybe [Char]) -&gt; Maybe [Char]
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(Maybe (InteractionId, [Char]), Maybe [Char])]
</span><a href="#local-6989586621681156380"><span class="hs-identifier hs-var">giveress</span></a></span><span>
</span><span id="line-358"></span><span>                          </span><span id="local-6989586621681156359"><span class="annot"><span class="annottext">msg' :: Maybe [Char]
</span><a href="#local-6989586621681156359"><span class="hs-identifier hs-var hs-var">msg'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621681156361"><span class="hs-identifier hs-var">msgs</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Maybe () -&gt; Maybe [Char]
forall (f :: * -&gt; *) a b. Functor f =&gt; a -&gt; f b -&gt; f a
</span><span class="hs-operator hs-var">&lt;$</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe ()
forall (f :: * -&gt; *). Alternative f =&gt; Bool -&gt; f ()
</span><span class="hs-identifier hs-var">guard</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621681156361"><span class="hs-identifier hs-var">msgs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>                      </span><span class="annot"><span class="annottext">AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AutoResult -&gt; TCM AutoResult) -&gt; AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AutoProgress -&gt; Maybe [Char] -&gt; AutoResult
</span><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(InteractionId, [Char])] -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#Solutions"><span class="hs-identifier hs-var">Solutions</span></a></span><span> </span><span class="annot"><span class="annottext">([(InteractionId, [Char])] -&gt; AutoProgress)
-&gt; [(InteractionId, [Char])] -&gt; AutoProgress
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Maybe (InteractionId, [Char]), Maybe [Char])
 -&gt; Maybe (InteractionId, [Char]))
-&gt; [(Maybe (InteractionId, [Char]), Maybe [Char])]
-&gt; [(InteractionId, [Char])]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (InteractionId, [Char]), Maybe [Char])
-&gt; Maybe (InteractionId, [Char])
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">[(Maybe (InteractionId, [Char]), Maybe [Char])]
</span><a href="#local-6989586621681156380"><span class="hs-identifier hs-var">giveress</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
</span><a href="#local-6989586621681156359"><span class="hs-identifier hs-var">msg'</span></a></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>     </span><span class="annot"><span class="annottext">Mode
</span><a href="Agda.Auto.Options.html#MCaseSplit"><span class="hs-identifier hs-var">MCaseSplit</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-362"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-363"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156354"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156353"><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681156353"><span class="hs-identifier hs-var">clause</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
-&gt; [(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
     [MM (Exp O) (RefInfo O)], [MetaId])]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map
  MetaId
  (Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
   [MM (Exp O) (RefInfo O)], [MetaId])
</span><a href="#local-6989586621681156633"><span class="hs-identifier hs-var">tccons</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-365"></span><span>         </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621681156352"><span class="annot"><span class="annottext">Metavar (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156352"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156351"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156351"><span class="hs-identifier hs-var">mytype</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156350"><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156350"><span class="hs-identifier hs-var">mylocalVars</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[MetaId]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))] -&gt; Bool
forall a. Null a =&gt; a -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[(Bool, MM (Exp O) (RefInfo O), MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156632"><span class="hs-identifier hs-var">eqcons</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-366"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681156349"><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681156349"><span class="hs-identifier hs-var">ids</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156348"><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156348"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
-&gt; MetaId -&gt; Clause -&gt; TCM ([(Hiding, MId)], [CSPat O])
</span><a href="Agda.Auto.Convert.html#constructPats"><span class="hs-identifier hs-var">constructPats</span></a></span><span> </span><span class="annot"><span class="annottext">Map QName (TMode, ConstRef O)
</span><a href="#local-6989586621681156631"><span class="hs-identifier hs-var">cmap</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">Clause
</span><a href="#local-6989586621681156353"><span class="hs-identifier hs-var">clause</span></a></span><span>
</span><span id="line-367"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156347"><span class="annot"><span class="annottext">ctx :: [HI (MId, MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156347"><span class="hs-identifier hs-var hs-var">ctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Hiding, MId)
 -&gt; MM (Exp O) (RefInfo O) -&gt; HI (MId, MM (Exp O) (RefInfo O)))
-&gt; [(Hiding, MId)]
-&gt; [MM (Exp O) (RefInfo O)]
-&gt; [HI (MId, MM (Exp O) (RefInfo O))]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681156346"><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681156346"><span class="hs-identifier hs-var">hid</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156345"><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681156345"><span class="hs-identifier hs-var">id</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681156344"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156344"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Hiding
-&gt; (MId, MM (Exp O) (RefInfo O))
-&gt; HI (MId, MM (Exp O) (RefInfo O))
forall a. Hiding -&gt; a -&gt; HI a
</span><a href="Agda.Auto.CaseSplit.html#HI"><span class="hs-identifier hs-var">HI</span></a></span><span> </span><span class="annot"><span class="annottext">Hiding
</span><a href="#local-6989586621681156346"><span class="hs-identifier hs-var">hid</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MId
</span><a href="#local-6989586621681156345"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156344"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Hiding, MId)]
</span><a href="#local-6989586621681156349"><span class="hs-identifier hs-var">ids</span></a></span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156350"><span class="hs-identifier hs-var">mylocalVars</span></a></span><span>
</span><span id="line-368"></span><span>          </span><span id="local-6989586621681156342"><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156342"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (IORef Int) -&gt; TCMT IO (IORef Int))
-&gt; IO (IORef Int) -&gt; TCMT IO (IORef Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (IORef Int)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-369"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681156341"><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156341"><span class="hs-identifier hs-var">rectyp'</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MM (Exp O) (RefInfo O)]
</span><a href="#local-6989586621681156634"><span class="hs-identifier hs-var">mymrectyp</span></a></span><span>
</span><span id="line-370"></span><span>          </span><span id="local-6989586621681156340"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156340"><span class="hs-identifier hs-var">defdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; QName -&gt; TCMT IO Int
</span><a href="Agda.Auto.Convert.html#getdfv"><span class="hs-identifier hs-var">getdfv</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span><span>
</span><span id="line-371"></span><span>          </span><span id="local-6989586621681156339"><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156339"><span class="hs-identifier hs-var">myrecdef</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (ConstRef O) -&gt; TCMT IO (ConstRef O))
-&gt; IO (ConstRef O) -&gt; TCMT IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConstDef O -&gt; IO (ConstRef O)
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">(ConstDef O -&gt; IO (ConstRef O)) -&gt; ConstDef O -&gt; IO (ConstRef O)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Agda.Auto.Syntax.html#ConstDef"><span class="hs-identifier hs-type">ConstDef</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">cdname :: [Char]
</span><a href="Agda.Auto.Syntax.html#cdname"><span class="hs-identifier hs-var">cdname</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdorigin :: O
</span><a href="Agda.Auto.Syntax.html#cdorigin"><span class="hs-identifier hs-var">cdorigin</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Int, [Arg QName])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdtype :: MM (Exp O) (RefInfo O)
</span><a href="Agda.Auto.Syntax.html#cdtype"><span class="hs-identifier hs-var">cdtype</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156341"><span class="hs-identifier hs-var">rectyp'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cdcont :: DeclCont O
</span><a href="Agda.Auto.Syntax.html#cdcont"><span class="hs-identifier hs-var">cdcont</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DeclCont O
forall o. DeclCont o
</span><a href="Agda.Auto.Syntax.html#Postulate"><span class="hs-identifier hs-var">Postulate</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cddeffreevars :: Int
</span><a href="Agda.Auto.Syntax.html#cddeffreevars"><span class="hs-identifier hs-var">cddeffreevars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156340"><span class="hs-identifier hs-var">defdfv</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-372"></span><span>          </span><span id="local-6989586621681156338"><span class="annot"><span class="annottext">Maybe [Sol O]
</span><a href="#local-6989586621681156338"><span class="hs-identifier hs-var">sols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe [Sol O]) -&gt; TCMT IO (Maybe [Sol O])
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe [Sol O]) -&gt; TCMT IO (Maybe [Sol O]))
-&gt; IO (Maybe [Sol O]) -&gt; TCMT IO (Maybe [Sol O])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO [Sol O] -&gt; IO (Maybe [Sol O])
forall a. Int -&gt; IO a -&gt; IO (Maybe a)
</span><span class="hs-identifier hs-var">System.Timeout.timeout</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimeOut -&gt; Int
</span><a href="Agda.Auto.Options.html#getTimeOut"><span class="hs-identifier hs-var">getTimeOut</span></a></span><span> </span><span class="annot"><span class="annottext">TimeOut
</span><a href="#local-6989586621681156674"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1000</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-373"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156337"><span class="annot"><span class="annottext">r :: Cost -&gt; IO [Sol O]
</span><a href="#local-6989586621681156337"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681156336"><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156336"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-374"></span><span>                  </span><span id="local-6989586621681156335"><span class="annot"><span class="annottext">[Sol O]
</span><a href="#local-6989586621681156335"><span class="hs-identifier hs-var">sols</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO [Sol O] -&gt; IO [Sol O]
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO [Sol O] -&gt; IO [Sol O]) -&gt; IO [Sol O] -&gt; IO [Sol O]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
-&gt; Int
-&gt; [ConstRef O]
-&gt; Maybe (EqReasoningConsts O)
-&gt; Int
-&gt; Cost
-&gt; ConstRef O
-&gt; [HI (MId, MM (Exp O) (RefInfo O))]
-&gt; MM (Exp O) (RefInfo O)
-&gt; [CSPat O]
-&gt; IO [Sol O]
forall o.
IORef Int
-&gt; Int
-&gt; [ConstRef o]
-&gt; Maybe (EqReasoningConsts o)
-&gt; Int
-&gt; Cost
-&gt; ConstRef o
-&gt; CSCtx o
-&gt; MExp o
-&gt; [CSPat o]
-&gt; IO [Sol o]
</span><a href="Agda.Auto.CaseSplit.html#caseSplitSearch"><span class="hs-identifier hs-var">caseSplitSearch</span></a></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156342"><span class="hs-identifier hs-var">ticks</span></a></span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">[ConstRef O]
</span><a href="#local-6989586621681156629"><span class="hs-identifier hs-var">myhints</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (EqReasoningConsts O)
</span><a href="#local-6989586621681156626"><span class="hs-identifier hs-var">meqr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span> </span><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156336"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">ConstRef O
</span><a href="#local-6989586621681156339"><span class="hs-identifier hs-var">myrecdef</span></a></span><span> </span><span class="annot"><span class="annottext">[HI (MId, MM (Exp O) (RefInfo O))]
</span><a href="#local-6989586621681156347"><span class="hs-identifier hs-var">ctx</span></a></span><span> </span><span class="annot"><span class="annottext">MM (Exp O) (RefInfo O)
</span><a href="#local-6989586621681156351"><span class="hs-identifier hs-var">mytype</span></a></span><span> </span><span class="annot"><span class="annottext">[CSPat O]
</span><a href="#local-6989586621681156348"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-375"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Sol O]
</span><a href="#local-6989586621681156335"><span class="hs-identifier hs-var">sols</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-376"></span><span>                   </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Cost -&gt; IO [Sol O]
</span><a href="#local-6989586621681156337"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Cost
</span><a href="#local-6989586621681156336"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Cost -&gt; Cost -&gt; Cost
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Cost
</span><a href="Agda.Auto.SearchControl.html#costIncrease"><span class="hs-identifier hs-var">costIncrease</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>                   </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sol O
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[Sol O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Sol O] -&gt; IO [Sol O]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[Sol O]
</span><a href="#local-6989586621681156335"><span class="hs-identifier hs-var">sols</span></a></span><span>
</span><span id="line-378"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Cost -&gt; IO [Sol O]
</span><a href="#local-6989586621681156337"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Cost
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe [Sol O]
</span><a href="#local-6989586621681156338"><span class="hs-identifier hs-var">sols</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-380"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156333"><span class="annot"><span class="annottext">Sol O
</span><a href="#local-6989586621681156333"><span class="hs-identifier hs-var">cls</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[Sol O]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCM AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a.
(MonadDebug m, MonadFail m, ReadTCState m, MonadError TCErr m,
 MonadTCEnv m, MonadTrace m) =&gt;
InteractionId -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-var">withInteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM AutoResult -&gt; TCM AutoResult)
-&gt; TCM AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-381"></span><span>            </span><span id="local-6989586621681156331"><span class="annot"><span class="annottext">Either [Char] [Clause]
</span><a href="#local-6989586621681156331"><span class="hs-identifier hs-var">cls'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either [Char] [Clause]) -&gt; TCMT IO (Either [Char] [Clause])
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Either [Char] [Clause]) -&gt; TCMT IO (Either [Char] [Clause]))
-&gt; IO (Either [Char] [Clause]) -&gt; TCMT IO (Either [Char] [Clause])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExceptT [Char] IO [Clause] -&gt; IO (Either [Char] [Clause])
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(([HI (MId, MM (Exp O) (RefInfo O))], [CSPat O],
  Maybe (MM (Exp O) (RefInfo O)))
 -&gt; ExceptT [Char] IO Clause)
-&gt; Sol O -&gt; ExceptT [Char] IO [Clause]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">([HI (MId, MM (Exp O) (RefInfo O))], [CSPat O],
 Maybe (MM (Exp O) (RefInfo O)))
-&gt; ExceptT [Char] IO Clause
</span><a href="Agda.Auto.Convert.html#frommyClause"><span class="hs-identifier hs-var">frommyClause</span></a></span><span> </span><span class="annot"><span class="annottext">Sol O
</span><a href="#local-6989586621681156333"><span class="hs-identifier hs-var">cls</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either [Char] [Clause]
</span><a href="#local-6989586621681156331"><span class="hs-identifier hs-var">cls'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-383"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No solution found&quot;</span></span><span>
</span><span id="line-384"></span><span>             </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681156329"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681156329"><span class="hs-identifier hs-var">cls'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-385"></span><span>              </span><span id="local-6989586621681156328"><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681156328"><span class="hs-identifier hs-var">cls''</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Clause] -&gt; (Clause -&gt; TCMT IO Clause) -&gt; TCMT IO [Clause]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681156329"><span class="hs-identifier hs-var">cls'</span></a></span><span> </span><span class="annot"><span class="annottext">((Clause -&gt; TCMT IO Clause) -&gt; TCMT IO [Clause])
-&gt; (Clause -&gt; TCMT IO Clause) -&gt; TCMT IO [Clause]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-type">I.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Range
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681156326"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681156326"><span class="hs-identifier hs-var">tel</span></a></span></span><span> </span><span id="local-6989586621681156325"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681156325"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621681156324"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681156324"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span id="local-6989586621681156323"><span class="annot"><span class="annottext">Maybe (Arg Type)
</span><a href="#local-6989586621681156323"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681156322"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156322"><span class="hs-identifier hs-var">catchall</span></a></span></span><span> </span><span id="local-6989586621681156321"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156321"><span class="hs-identifier hs-var">exact</span></a></span></span><span> </span><span id="local-6989586621681156320"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156320"><span class="hs-identifier hs-var">recursive</span></a></span></span><span> </span><span id="local-6989586621681156319"><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156319"><span class="hs-identifier hs-var">reachable</span></a></span></span><span> </span><span id="local-6989586621681156318"><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="#local-6989586621681156318"><span class="hs-identifier hs-var">ell</span></a></span></span><span> </span><span id="local-6989586621681156317"><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681156317"><span class="hs-identifier hs-var">wm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-386"></span><span>                </span><span class="annot"><span class="annottext">ModuleName -&gt; TCMT IO Clause -&gt; TCMT IO Clause
forall (m :: * -&gt; *) a.
(ReadTCState m, MonadTCState m) =&gt;
ModuleName -&gt; m a -&gt; m a
</span><a href="Agda.Syntax.Scope.Monad.html#withCurrentModule"><span class="hs-identifier hs-var">withCurrentModule</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; ModuleName
</span><a href="Agda.Syntax.Abstract.Name.html#qnameModule"><span class="hs-identifier hs-var">AN.qnameModule</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(TCMT IO Clause -&gt; TCMT IO Clause)
-&gt; TCMT IO Clause -&gt; TCMT IO Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-387"></span><span>                 </span><span class="hs-comment">-- Normalise the dot patterns</span><span>
</span><span id="line-388"></span><span>                 </span><span id="local-6989586621681156315"><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681156315"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO NAPs -&gt; TCMT IO NAPs
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681156326"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO NAPs -&gt; TCMT IO NAPs) -&gt; TCMT IO NAPs -&gt; TCMT IO NAPs
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NAPs -&gt; TCMT IO NAPs
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681156325"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-389"></span><span>                 </span><span id="local-6989586621681156313"><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681156313"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe Term -&gt; TCMT IO (Maybe Term)
forall (m :: * -&gt; *) a.
(MonadTCEnv m, HasConstInfo m, HasOptions m, TermLike a) =&gt;
a -&gt; m a
</span><a href="Agda.TypeChecking.EtaContract.html#etaContract"><span class="hs-identifier hs-var">etaContract</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681156324"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-390"></span><span>                 </span><span class="annot"><span class="annottext">(Clause -&gt; Clause) -&gt; TCMT IO Clause -&gt; TCMT IO Clause
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; Clause
</span><a href="Agda.Auto.Convert.html#modifyAbstractClause"><span class="hs-identifier hs-var">modifyAbstractClause</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Clause -&gt; TCMT IO Clause)
-&gt; TCMT IO Clause -&gt; TCMT IO Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO Clause -&gt; TCMT IO Clause
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Clause -&gt; TCMT IO Clause)
-&gt; TCMT IO Clause -&gt; TCMT IO Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QNamed Clause -&gt; TCMT IO (ReifiesTo (QNamed Clause))
forall i (m :: * -&gt; *).
(Reify i, MonadReify m) =&gt;
i -&gt; m (ReifiesTo i)
</span><a href="Agda.Syntax.Translation.InternalToAbstract.html#reify"><span class="hs-identifier hs-var">reify</span></a></span><span> </span><span class="annot"><span class="annottext">(QNamed Clause -&gt; TCMT IO (ReifiesTo (QNamed Clause)))
-&gt; QNamed Clause -&gt; TCMT IO (ReifiesTo (QNamed Clause))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; Clause -&gt; QNamed Clause
forall a. QName -&gt; a -&gt; QNamed a
</span><a href="Agda.Syntax.Abstract.Name.html#QNamed"><span class="hs-identifier hs-var">AN.QNamed</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; QNamed Clause) -&gt; Clause -&gt; QNamed Clause
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Range
-&gt; Range
-&gt; Telescope
-&gt; NAPs
-&gt; Maybe Term
-&gt; Maybe (Arg Type)
-&gt; Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; Maybe Bool
-&gt; ExpandedEllipsis
-&gt; Maybe ModuleName
-&gt; Clause
</span><a href="Agda.Syntax.Internal.html#Clause"><span class="hs-identifier hs-var">I.Clause</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="annot"><span class="annottext">Range
forall a. Range' a
</span><a href="Agda.Syntax.Position.html#noRange"><span class="hs-identifier hs-var">noRange</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681156326"><span class="hs-identifier hs-var">tel</span></a></span><span> </span><span class="annot"><span class="annottext">NAPs
</span><a href="#local-6989586621681156315"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Term
</span><a href="#local-6989586621681156313"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Arg Type)
</span><a href="#local-6989586621681156323"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156322"><span class="hs-identifier hs-var">catchall</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156321"><span class="hs-identifier hs-var">exact</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156320"><span class="hs-identifier hs-var">recursive</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Bool
</span><a href="#local-6989586621681156319"><span class="hs-identifier hs-var">reachable</span></a></span><span> </span><span class="annot"><span class="annottext">ExpandedEllipsis
</span><a href="#local-6989586621681156318"><span class="hs-identifier hs-var">ell</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ModuleName
</span><a href="#local-6989586621681156317"><span class="hs-identifier hs-var">wm</span></a></span><span>
</span><span id="line-391"></span><span>              </span><span id="local-6989586621681156308"><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681156308"><span class="hs-identifier hs-var">moduleTel</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; TCMT IO Telescope
forall (m :: * -&gt; *).
(Functor m, ReadTCState m) =&gt;
ModuleName -&gt; m Telescope
</span><a href="Agda.TypeChecking.Monad.Signature.html#lookupSection"><span class="hs-identifier hs-var">lookupSection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; ModuleName
</span><a href="Agda.Syntax.Abstract.Name.html#qnameModule"><span class="hs-identifier hs-var">AN.qnameModule</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156354"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span>              </span><span id="local-6989586621681156306"><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621681156306"><span class="hs-identifier hs-var">pcs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">InteractionId -&gt; TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall (m :: * -&gt; *) a.
(MonadDebug m, MonadFail m, ReadTCState m, MonadError TCErr m,
 MonadTCEnv m, MonadTrace m) =&gt;
InteractionId -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withInteractionId"><span class="hs-identifier hs-var">withInteractionId</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156690"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [Doc] -&gt; TCMT IO [Doc]) -&gt; TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall (tcm :: * -&gt; *) a.
(MonadTCEnv tcm, ReadTCState tcm) =&gt;
tcm a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Context.html#inTopContext"><span class="hs-identifier hs-var">inTopContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [Doc] -&gt; TCMT IO [Doc]) -&gt; TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Telescope -&gt; TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall b (m :: * -&gt; *) a.
(AddContext b, MonadAddContext m) =&gt;
b -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Context.html#addContext"><span class="hs-identifier hs-var">addContext</span></a></span><span> </span><span class="annot"><span class="annottext">Telescope
</span><a href="#local-6989586621681156308"><span class="hs-identifier hs-var">moduleTel</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO [Doc] -&gt; TCMT IO [Doc]) -&gt; TCMT IO [Doc] -&gt; TCMT IO [Doc]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Clause -&gt; TCMT IO Doc) -&gt; [Clause] -&gt; TCMT IO [Doc]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Clause -&gt; TCMT IO Doc
forall a (m :: * -&gt; *).
(ToConcrete a, Pretty (ConOfAbs a), MonadAbsToCon m) =&gt;
a -&gt; m Doc
</span><a href="Agda.Syntax.Abstract.Pretty.html#prettyA"><span class="hs-identifier hs-var">prettyA</span></a></span><span> </span><span class="annot"><span class="annottext">[Clause]
</span><a href="#local-6989586621681156328"><span class="hs-identifier hs-var">cls''</span></a></span><span>
</span><span id="line-393"></span><span>              </span><span id="local-6989586621681156305"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156305"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Int -&gt; TCMT IO Int) -&gt; IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IORef Int -&gt; IO Int
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef Int
</span><a href="#local-6989586621681156342"><span class="hs-identifier hs-var">ticks</span></a></span><span>
</span><span id="line-394"></span><span>
</span><span id="line-395"></span><span>
</span><span id="line-396"></span><span>              </span><span class="annot"><span class="annottext">AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AutoResult -&gt; TCM AutoResult) -&gt; AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AutoProgress -&gt; Maybe [Char] -&gt; AutoResult
</span><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[[Char]] -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#FunClauses"><span class="hs-identifier hs-var">FunClauses</span></a></span><span> </span><span class="annot"><span class="annottext">([[Char]] -&gt; AutoProgress) -&gt; [[Char]] -&gt; AutoProgress
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Doc -&gt; [Char]) -&gt; [Doc] -&gt; [[Char]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insertAbsurdPattern"><span class="hs-identifier hs-var">insertAbsurdPattern</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; [Char]) -&gt; (Doc -&gt; [Char]) -&gt; Doc -&gt; [Char]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Style -&gt; Doc -&gt; [Char]
</span><span class="hs-identifier hs-var">PP.renderStyle</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Style
</span><span class="hs-identifier hs-var">PP.style</span></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">mode :: Mode
</span><a href="#local-6989586621681156302"><span class="hs-identifier hs-var">PP.mode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Mode
</span><span class="hs-identifier hs-var">PP.OneLineMode</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Doc]
</span><a href="#local-6989586621681156306"><span class="hs-identifier hs-var">pcs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No solution found&quot;</span></span><span> </span><span class="hs-comment">-- case not possible at the moment because case split doesnt care about search exhaustiveness</span><span>
</span><span id="line-399"></span><span>           </span><span class="annot"><span class="annottext">Maybe [Sol O]
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No solution found at time out (&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">TimeOut -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">TimeOut
</span><a href="#local-6989586621681156674"><span class="hs-identifier hs-var">timeout</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;s)&quot;</span></span><span>
</span><span id="line-400"></span><span>         </span><span class="annot"><span class="annottext">[(Metavar (Exp O) (RefInfo O), MM (Exp O) (RefInfo O),
  [MM (Exp O) (RefInfo O)], [MetaId])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Metavariable dependencies not allowed in case split mode&quot;</span></span><span>
</span><span id="line-401"></span><span>       </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Metavariable is not at top level of clause RHS&quot;</span></span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span>     </span><span class="annot"><a href="Agda.Auto.Options.html#MRefine"><span class="hs-identifier hs-type">MRefine</span></a></span><span> </span><span id="local-6989586621681156300"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156300"><span class="hs-identifier hs-var">listmode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-404"></span><span>      </span><span id="local-6989586621681156299"><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156299"><span class="hs-identifier hs-var">mv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156649"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-405"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156298"><span class="annot"><span class="annottext">tt :: Type
</span><a href="#local-6989586621681156298"><span class="hs-identifier hs-var hs-var">tt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Judgement MetaId -&gt; Type
forall a. Judgement a -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#jMetaType"><span class="hs-identifier hs-var">jMetaType</span></a></span><span> </span><span class="annot"><span class="annottext">(Judgement MetaId -&gt; Type) -&gt; Judgement MetaId -&gt; Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Judgement MetaId
</span><a href="Agda.TypeChecking.Monad.Base.html#mvJudgement"><span class="hs-identifier hs-var">mvJudgement</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156299"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-406"></span><span>          </span><span id="local-6989586621681156295"><span class="annot"><span class="annottext">minfo :: Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var hs-var">minfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156299"><span class="hs-identifier hs-var">mv</span></a></span><span>
</span><span id="line-407"></span><span>      </span><span id="local-6989586621681156294"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156294"><span class="hs-identifier hs-var">targettyp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Type -&gt; TCMT IO Type
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Type -&gt; TCMT IO Type) -&gt; TCMT IO Type -&gt; TCMT IO Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-408"></span><span>       </span><span id="local-6989586621681156293"><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681156293"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCMT IO [Arg Term]
forall (m :: * -&gt; *). (Applicative m, MonadTCEnv m) =&gt; m [Arg Term]
</span><a href="Agda.TypeChecking.Monad.Context.html#getContextArgs"><span class="hs-identifier hs-var">getContextArgs</span></a></span><span>
</span><span id="line-409"></span><span>       </span><span id="local-6989586621681156291"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156291"><span class="hs-identifier hs-var">targettype</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156298"><span class="hs-identifier hs-var">tt</span></a></span><span> </span><span class="annot"><span class="annottext">Type -&gt; [Arg Term] -&gt; TCMT IO Type
forall a (m :: * -&gt; *).
(PiApplyM a, MonadReduce m, HasBuiltins m) =&gt;
Type -&gt; a -&gt; m Type
</span><a href="Agda.TypeChecking.Telescope.html#piApplyM"><span class="hs-operator hs-var">`piApplyM`</span></a></span><span> </span><span class="annot"><span class="annottext">Permutation -&gt; [Arg Term] -&gt; [Arg Term]
forall a. Permutation -&gt; [a] -&gt; [a]
</span><a href="Agda.Utils.Permutation.html#permute"><span class="hs-identifier hs-var">permute</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Permutation -&gt; Permutation
</span><a href="Agda.Utils.Permutation.html#takeP"><span class="hs-identifier hs-var">takeP</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Arg Term] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681156293"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Permutation -&gt; Permutation) -&gt; Permutation -&gt; Permutation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Permutation
</span><a href="Agda.TypeChecking.Monad.Base.html#mvPermutation"><span class="hs-identifier hs-var">mvPermutation</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156299"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Arg Term]
</span><a href="#local-6989586621681156293"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-410"></span><span>       </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156291"><span class="hs-identifier hs-var">targettype</span></a></span><span>
</span><span id="line-411"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156288"><span class="annot"><span class="annottext">tctx :: Int
</span><a href="#local-6989586621681156288"><span class="hs-identifier hs-var hs-var">tctx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[ContextEntry] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">([ContextEntry] -&gt; Int) -&gt; [ContextEntry] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCEnv -&gt; [ContextEntry]
</span><a href="Agda.TypeChecking.Monad.Base.html#envContext"><span class="hs-identifier hs-var">envContext</span></a></span><span> </span><span class="annot"><span class="annottext">(TCEnv -&gt; [ContextEntry]) -&gt; TCEnv -&gt; [ContextEntry]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCEnv
forall a. Closure a -&gt; TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#clEnv"><span class="hs-identifier hs-var">clEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var">minfo</span></a></span><span>
</span><span id="line-412"></span><span>
</span><span id="line-413"></span><span>      </span><span id="local-6989586621681156285"><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156285"><span class="hs-identifier hs-var">hits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-a&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [[Char]] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621681156679"><span class="hs-identifier hs-var">hints</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-414"></span><span>        </span><span id="local-6989586621681156284"><span class="annot"><span class="annottext">TCState
</span><a href="#local-6989586621681156284"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TCM TCState -&gt; TCM TCState
forall (tcm :: * -&gt; *) a. MonadTCM tcm =&gt; TCM a -&gt; tcm a
</span><a href="Agda.TypeChecking.Monad.Base.html#liftTCM"><span class="hs-identifier hs-var">liftTCM</span></a></span><span> </span><span class="annot"><span class="annottext">(TCM TCState -&gt; TCM TCState) -&gt; TCM TCState -&gt; TCM TCState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO (TCM TCState) -&gt; TCM TCState
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(TCMT IO (TCM TCState) -&gt; TCM TCState)
-&gt; TCMT IO (TCM TCState) -&gt; TCM TCState
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(TCState -&gt; TCEnv -&gt; TCM TCState) -&gt; TCMT IO (TCM TCState)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
(TCState -&gt; TCEnv -&gt; a) -&gt; TCMT m a
</span><a href="Agda.TypeChecking.Monad.Base.html#pureTCM"><span class="hs-identifier hs-var">pureTCM</span></a></span><span> </span><span class="annot"><span class="annottext">((TCState -&gt; TCEnv -&gt; TCM TCState) -&gt; TCMT IO (TCM TCState))
-&gt; (TCState -&gt; TCEnv -&gt; TCM TCState) -&gt; TCMT IO (TCM TCState)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681156282"><span class="annot"><span class="annottext">TCState
</span><a href="#local-6989586621681156282"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="annot"><span class="annottext">TCEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCState -&gt; TCM TCState
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">TCState
</span><a href="#local-6989586621681156282"><span class="hs-identifier hs-var">st</span></a></span><span>
</span><span id="line-415"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156281"><span class="annot"><span class="annottext">defs :: HashMap QName Definition
</span><a href="#local-6989586621681156281"><span class="hs-identifier hs-var hs-var">defs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCState
</span><a href="#local-6989586621681156284"><span class="hs-identifier hs-var">st</span></a></span><span class="annot"><span class="annottext">TCState
-&gt; Lens' (HashMap QName Definition) TCState
-&gt; HashMap QName Definition
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">(Signature -&gt; f Signature) -&gt; TCState -&gt; f TCState
Lens' Signature TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stSignature"><span class="hs-identifier hs-var">stSignature</span></a></span><span class="annot"><span class="annottext">((Signature -&gt; f Signature) -&gt; TCState -&gt; f TCState)
-&gt; ((HashMap QName Definition -&gt; f (HashMap QName Definition))
    -&gt; Signature -&gt; f Signature)
-&gt; (HashMap QName Definition -&gt; f (HashMap QName Definition))
-&gt; TCState
-&gt; f TCState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(HashMap QName Definition -&gt; f (HashMap QName Definition))
-&gt; Signature -&gt; f Signature
Lens' (HashMap QName Definition) Signature
</span><a href="Agda.TypeChecking.Monad.Base.html#sigDefinitions"><span class="hs-identifier hs-var">sigDefinitions</span></a></span><span>
</span><span id="line-416"></span><span>            </span><span id="local-6989586621681156275"><span class="annot"><span class="annottext">idefs :: HashMap QName Definition
</span><a href="#local-6989586621681156275"><span class="hs-identifier hs-var hs-var">idefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCState
</span><a href="#local-6989586621681156284"><span class="hs-identifier hs-var">st</span></a></span><span class="annot"><span class="annottext">TCState
-&gt; Lens' (HashMap QName Definition) TCState
-&gt; HashMap QName Definition
forall o i. o -&gt; Lens' i o -&gt; i
</span><a href="Agda.Utils.Lens.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span class="annot"><span class="annottext">(Signature -&gt; f Signature) -&gt; TCState -&gt; f TCState
Lens' Signature TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stImports"><span class="hs-identifier hs-var">stImports</span></a></span><span class="annot"><span class="annottext">((Signature -&gt; f Signature) -&gt; TCState -&gt; f TCState)
-&gt; ((HashMap QName Definition -&gt; f (HashMap QName Definition))
    -&gt; Signature -&gt; f Signature)
-&gt; (HashMap QName Definition -&gt; f (HashMap QName Definition))
-&gt; TCState
-&gt; f TCState
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span class="annot"><span class="annottext">(HashMap QName Definition -&gt; f (HashMap QName Definition))
-&gt; Signature -&gt; f Signature
Lens' (HashMap QName Definition) Signature
</span><a href="Agda.TypeChecking.Monad.Base.html#sigDefinitions"><span class="hs-identifier hs-var">sigDefinitions</span></a></span><span>
</span><span id="line-417"></span><span>            </span><span id="local-6989586621681156270"><span class="annot"><span class="annottext">alldefs :: [QName]
</span><a href="#local-6989586621681156270"><span class="hs-identifier hs-var hs-var">alldefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap QName Definition -&gt; [QName]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">HMap.keys</span></span><span> </span><span class="annot"><span class="annottext">HashMap QName Definition
</span><a href="#local-6989586621681156281"><span class="hs-identifier hs-var">defs</span></a></span><span> </span><span class="annot"><span class="annottext">[QName] -&gt; [QName] -&gt; [QName]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">HashMap QName Definition -&gt; [QName]
forall k v. HashMap k v -&gt; [k]
</span><span class="hs-identifier hs-var">HMap.keys</span></span><span> </span><span class="annot"><span class="annottext">HashMap QName Definition
</span><a href="#local-6989586621681156275"><span class="hs-identifier hs-var">idefs</span></a></span><span>
</span><span id="line-418"></span><span>        </span><span class="annot"><span class="annottext">[Maybe ([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe ([Char], (Int, Int))] -&gt; [([Char], (Int, Int))])
-&gt; TCMT IO [Maybe ([Char], (Int, Int))]
-&gt; TCMT IO [([Char], (Int, Int))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(QName -&gt; TCMT IO (Maybe ([Char], (Int, Int))))
-&gt; [QName] -&gt; TCMT IO [Maybe ([Char], (Int, Int))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156268"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156268"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-419"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-420"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156267"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156267"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156267"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156268"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int)) -&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-421"></span><span>           </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-422"></span><span>            </span><span id="local-6989586621681156266"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156266"><span class="hs-identifier hs-var">cn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO QName -&gt; TCMT IO QName
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO QName -&gt; TCMT IO QName) -&gt; TCMT IO QName -&gt; TCMT IO QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AbsToCon QName -&gt; TCMT IO QName
forall (m :: * -&gt; *) c. MonadAbsToCon m =&gt; AbsToCon c -&gt; m c
</span><a href="Agda.Syntax.Translation.AbstractToConcrete.html#runAbsToCon"><span class="hs-identifier hs-var">runAbsToCon</span></a></span><span> </span><span class="annot"><span class="annottext">(AbsToCon QName -&gt; TCMT IO QName)
-&gt; AbsToCon QName -&gt; TCMT IO QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; AbsToCon (ConOfAbs QName)
forall a. ToConcrete a =&gt; a -&gt; AbsToCon (ConOfAbs a)
</span><a href="Agda.Syntax.Translation.AbstractToConcrete.html#toConcrete"><span class="hs-identifier hs-var">toConcrete</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156268"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-423"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">QName -&gt; NameInScope
forall a. LensInScope a =&gt; a -&gt; NameInScope
</span><a href="Agda.Syntax.Concrete.Name.html#isInScope"><span class="hs-identifier hs-var">C.isInScope</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156266"><span class="hs-identifier hs-var">cn</span></a></span><span> </span><span class="annot"><span class="annottext">NameInScope -&gt; NameInScope -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">NameInScope
</span><a href="Agda.Syntax.Concrete.Name.html#NotInScope"><span class="hs-identifier hs-var">C.NotInScope</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-424"></span><span>              </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int)) -&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-425"></span><span>            </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-426"></span><span>              </span><span id="local-6989586621681156263"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156263"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156268"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-427"></span><span>              </span><span id="local-6989586621681156262"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156262"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Type) -&gt; Type -&gt; TCMT IO Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156263"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-428"></span><span>              </span><span id="local-6989586621681156261"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156261"><span class="hs-identifier hs-var">cdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; TCMT IO Int) -&gt; TCMT IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Int
forall (m :: * -&gt; *).
(Functor m, Applicative m, ReadTCState m, MonadTCEnv m) =&gt;
QName -&gt; m Int
</span><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-var">getDefFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156268"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-429"></span><span>              </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int)) -&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ([Char], (Int, Int))
 -&gt; TCMT IO (Maybe ([Char], (Int, Int))))
-&gt; Maybe ([Char], (Int, Int))
-&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-var">matchType</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156261"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156288"><span class="hs-identifier hs-var">tctx</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156262"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156294"><span class="hs-identifier hs-var">targettyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-430"></span><span>               </span><span class="annot"><span class="annottext">Maybe (Int, Int)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-431"></span><span>               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156258"><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621681156258"><span class="hs-identifier hs-var">score</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Char], (Int, Int)) -&gt; Maybe ([Char], (Int, Int))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QName -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156266"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621681156258"><span class="hs-identifier hs-var">score</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681156270"><span class="hs-identifier hs-var">alldefs</span></a></span><span>
</span><span id="line-433"></span><span>       </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-434"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156257"><span class="annot"><span class="annottext">scopeinfo :: ScopeInfo
</span><a href="#local-6989586621681156257"><span class="hs-identifier hs-var hs-var">scopeinfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; ScopeInfo
forall a. Closure a -&gt; ScopeInfo
</span><a href="Agda.TypeChecking.Monad.Base.html#clScope"><span class="hs-identifier hs-var">clScope</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">MetaVariable
</span><a href="#local-6989586621681156299"><span class="hs-identifier hs-var">mv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-435"></span><span>            </span><span id="local-6989586621681156255"><span class="annot"><span class="annottext">namespace :: NameSpace
</span><a href="#local-6989586621681156255"><span class="hs-identifier hs-var hs-var">namespace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; NameSpace
</span><a href="Agda.Syntax.Scope.Base.html#everythingInScope"><span class="hs-identifier hs-var">Scope.everythingInScope</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681156257"><span class="hs-identifier hs-var">scopeinfo</span></a></span><span>
</span><span id="line-436"></span><span>            </span><span id="local-6989586621681156253"><span class="annot"><span class="annottext">names :: NamesInScope
</span><a href="#local-6989586621681156253"><span class="hs-identifier hs-var hs-var">names</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NamesInScope
</span><a href="Agda.Syntax.Scope.Base.html#nsNames"><span class="hs-identifier hs-var">Scope.nsNames</span></a></span><span> </span><span class="annot"><span class="annottext">NameSpace
</span><a href="#local-6989586621681156255"><span class="hs-identifier hs-var">namespace</span></a></span><span>
</span><span id="line-437"></span><span>            </span><span id="local-6989586621681156251"><span class="annot"><span class="annottext">qnames :: [(Name, QName)]
</span><a href="#local-6989586621681156251"><span class="hs-identifier hs-var hs-var">qnames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, [AbstractName]) -&gt; (Name, QName))
-&gt; [(Name, [AbstractName])] -&gt; [(Name, QName)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681156250"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681156250"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156249"><span class="annot"><span class="annottext">[AbstractName]
</span><a href="#local-6989586621681156249"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681156250"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">AbstractName -&gt; QName
</span><a href="Agda.Syntax.Scope.Base.html#anameName"><span class="hs-identifier hs-var">Scope.anameName</span></a></span><span> </span><span class="annot"><span class="annottext">(AbstractName -&gt; QName) -&gt; AbstractName -&gt; QName
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[AbstractName] -&gt; AbstractName
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">[AbstractName]
</span><a href="#local-6989586621681156249"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Name, [AbstractName])] -&gt; [(Name, QName)])
-&gt; [(Name, [AbstractName])] -&gt; [(Name, QName)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesInScope -&gt; [(Name, [AbstractName])]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">NamesInScope
</span><a href="#local-6989586621681156253"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-438"></span><span>            </span><span id="local-6989586621681156245"><span class="annot"><span class="annottext">modnames :: [(Name, QName)]
</span><a href="#local-6989586621681156245"><span class="hs-identifier hs-var hs-var">modnames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><a href="#local-6989586621681156647"><span class="hs-identifier hs-var">thisdefinfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-439"></span><span>                        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156244"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156244"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Clause
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">((Name, QName) -&gt; Bool) -&gt; [(Name, QName)] -&gt; [(Name, QName)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156243"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156243"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156243"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156244"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, QName)]
</span><a href="#local-6989586621681156251"><span class="hs-identifier hs-var">qnames</span></a></span><span>
</span><span id="line-440"></span><span>                        </span><span class="annot"><span class="annottext">Maybe (QName, Clause, Bool)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Name, QName)]
</span><a href="#local-6989586621681156251"><span class="hs-identifier hs-var">qnames</span></a></span><span>
</span><span id="line-441"></span><span>        </span><span class="annot"><span class="annottext">[Maybe ([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a. [Maybe a] -&gt; [a]
</span><span class="hs-identifier hs-var">catMaybes</span></span><span> </span><span class="annot"><span class="annottext">([Maybe ([Char], (Int, Int))] -&gt; [([Char], (Int, Int))])
-&gt; TCMT IO [Maybe ([Char], (Int, Int))]
-&gt; TCMT IO [([Char], (Int, Int))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Name, QName) -&gt; TCMT IO (Maybe ([Char], (Int, Int))))
-&gt; [(Name, QName)] -&gt; TCMT IO [Maybe ([Char], (Int, Int))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681156242"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681156242"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156241"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156241"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-442"></span><span>          </span><span id="local-6989586621681156240"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156240"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156241"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-443"></span><span>          </span><span id="local-6989586621681156239"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156239"><span class="hs-identifier hs-var">ctyp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Type -&gt; TCMT IO Type
forall a (m :: * -&gt; *). (Normalise a, MonadReduce m) =&gt; a -&gt; m a
</span><a href="Agda.TypeChecking.Reduce.html#normalise"><span class="hs-identifier hs-var">normalise</span></a></span><span> </span><span class="annot"><span class="annottext">(Type -&gt; TCMT IO Type) -&gt; Type -&gt; TCMT IO Type
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Type
</span><a href="Agda.TypeChecking.Monad.Base.html#defType"><span class="hs-identifier hs-var">defType</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156240"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-444"></span><span>          </span><span id="local-6989586621681156238"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156238"><span class="hs-identifier hs-var">cdfv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; TCMT IO Int -&gt; TCMT IO Int
forall (m :: * -&gt; *) a.
(MonadTCEnv m, ReadTCState m, MonadTrace m) =&gt;
Closure Range -&gt; m a -&gt; m a
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#withMetaInfo"><span class="hs-identifier hs-var">withMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Closure Range
</span><a href="#local-6989586621681156295"><span class="hs-identifier hs-var">minfo</span></a></span><span> </span><span class="annot"><span class="annottext">(TCMT IO Int -&gt; TCMT IO Int) -&gt; TCMT IO Int -&gt; TCMT IO Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Int
forall (m :: * -&gt; *).
(Functor m, Applicative m, ReadTCState m, MonadTCEnv m) =&gt;
QName -&gt; m Int
</span><a href="Agda.TypeChecking.Monad.Signature.html#getDefFreeVars"><span class="hs-identifier hs-var">getDefFreeVars</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156241"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-445"></span><span>          </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int)) -&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe ([Char], (Int, Int))
 -&gt; TCMT IO (Maybe ([Char], (Int, Int))))
-&gt; Maybe ([Char], (Int, Int))
-&gt; TCMT IO (Maybe ([Char], (Int, Int)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Type -&gt; Type -&gt; Maybe (Int, Int)
</span><a href="Agda.Auto.Convert.html#matchType"><span class="hs-identifier hs-var">matchType</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156238"><span class="hs-identifier hs-var">cdfv</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156288"><span class="hs-identifier hs-var">tctx</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156239"><span class="hs-identifier hs-var">ctyp</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681156294"><span class="hs-identifier hs-var">targettyp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-446"></span><span>           </span><span class="annot"><span class="annottext">Maybe (Int, Int)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ([Char], (Int, Int))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-447"></span><span>           </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156237"><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621681156237"><span class="hs-identifier hs-var">score</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([Char], (Int, Int)) -&gt; Maybe ([Char], (Int, Int))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; [Char]
forall a. Pretty a =&gt; a -&gt; [Char]
</span><a href="Agda.Utils.Pretty.html#prettyShow"><span class="hs-identifier hs-var">prettyShow</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681156242"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Int, Int)
</span><a href="#local-6989586621681156237"><span class="hs-identifier hs-var">score</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>         </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Name, QName)]
</span><a href="#local-6989586621681156245"><span class="hs-identifier hs-var">modnames</span></a></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156236"><span class="annot"><span class="annottext">sorthits :: [([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var hs-var">sorthits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(([Char], (Int, Int)) -&gt; ([Char], (Int, Int)) -&gt; Ordering)
-&gt; [([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a. (a -&gt; a -&gt; Ordering) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">List.sortBy</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156234"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156234"><span class="hs-identifier hs-var">pa1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156233"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156233"><span class="hs-identifier hs-var">pb1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156232"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156232"><span class="hs-identifier hs-var">pa2</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681156231"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156231"><span class="hs-identifier hs-var">pb2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156232"><span class="hs-identifier hs-var">pa2</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156234"><span class="hs-identifier hs-var">pa1</span></a></span><span> </span><span class="hs-keyword">of</span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156233"><span class="hs-identifier hs-var">pb1</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156231"><span class="hs-identifier hs-var">pb2</span></a></span><span class="hs-special">;</span><span> </span><span id="local-6989586621681156229"><span class="annot"><span class="annottext">Ordering
</span><a href="#local-6989586621681156229"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><a href="#local-6989586621681156229"><span class="hs-identifier hs-var">o</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156285"><span class="hs-identifier hs-var">hits</span></a></span><span>
</span><span id="line-451"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681156300"><span class="hs-identifier hs-var">listmode</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-452"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156227"><span class="annot"><span class="annottext">pick' :: Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var hs-var">pick'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span>
</span><span id="line-453"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-454"></span><span>             </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffcands"><span class="hs-identifier hs-var">insuffcands</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [Char]) -&gt; Int -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span>
</span><span id="line-455"></span><span>            </span><span class="hs-keyword">else</span><span>
</span><span id="line-456"></span><span>             </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156224"><span class="annot"><span class="annottext">showhits :: [([Char], (Int, Int))]
</span><a href="#local-6989586621681156224"><span class="hs-identifier hs-var hs-var">showhits</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">([([Char], (Int, Int))] -&gt; [([Char], (Int, Int))])
-&gt; [([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [([Char], (Int, Int))] -&gt; [([Char], (Int, Int))]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span>
</span><span id="line-457"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Listing candidate(s) &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;-&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156224"><span class="hs-identifier hs-var">showhits</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; (found &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot; in total)\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-458"></span><span>                           </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><span class="hs-identifier hs-var">unlines</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Int -&gt; ([Char], (Int, Int)) -&gt; [Char])
-&gt; [Int] -&gt; [([Char], (Int, Int))] -&gt; [[Char]]
forall a b c. (a -&gt; b -&gt; c) -&gt; [a] -&gt; [b] -&gt; [c]
</span><span class="hs-identifier hs-var">zipWith</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156223"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156223"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681156222"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156222"><span class="hs-identifier hs-var">cn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Int, Int)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156223"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;  &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156222"><span class="hs-identifier hs-var">cn</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span class="hs-glyph">..</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156227"><span class="hs-identifier hs-var">pick'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156224"><span class="hs-identifier hs-var">showhits</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156224"><span class="hs-identifier hs-var">showhits</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>       </span><span class="hs-keyword">else</span><span>
</span><span id="line-460"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-461"></span><span>         </span><span class="annot"><span class="annottext">[Char] -&gt; TCM AutoResult
</span><a href="Agda.Auto.Auto.html#stopWithMsg"><span class="hs-identifier hs-var">stopWithMsg</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCM AutoResult) -&gt; [Char] -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffcands"><span class="hs-identifier hs-var">insuffcands</span></a></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; [Char]) -&gt; Int -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span>
</span><span id="line-462"></span><span>        </span><span class="hs-keyword">else</span><span>
</span><span id="line-463"></span><span>         </span><span class="annot"><span class="annottext">AutoResult -&gt; TCM AutoResult
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(AutoResult -&gt; TCM AutoResult) -&gt; AutoResult -&gt; TCM AutoResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AutoProgress -&gt; Maybe [Char] -&gt; AutoResult
</span><a href="Agda.Auto.Auto.html#AutoResult"><span class="hs-identifier hs-var">AutoResult</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; AutoProgress
</span><a href="Agda.Auto.Auto.html#Refinement"><span class="hs-identifier hs-var">Refinement</span></a></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; AutoProgress) -&gt; [Char] -&gt; AutoProgress
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">([Char], (Int, Int)) -&gt; [Char]
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(([Char], (Int, Int)) -&gt; [Char]) -&gt; ([Char], (Int, Int)) -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))]
</span><a href="#local-6989586621681156236"><span class="hs-identifier hs-var">sorthits</span></a></span><span> </span><span class="annot"><span class="annottext">[([Char], (Int, Int))] -&gt; Int -&gt; ([Char], (Int, Int))
forall a. HasCallStack =&gt; [a] -&gt; Int -&gt; a
</span><a href="Agda.Utils.List.html#%21%21"><span class="hs-operator hs-var">!!</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156670"><span class="hs-identifier hs-var">pick</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe [Char]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-465"></span><span>    </span><span id="local-6989586621681156365"><span class="annot"><span class="annottext">agsyinfo :: p -&gt; a
</span><a href="#local-6989586621681156365"><span class="hs-identifier hs-var hs-var">agsyinfo</span></a></span></span><span> </span><span id="local-6989586621681156218"><span class="annot"><span class="annottext">p
</span><a href="#local-6989586621681156218"><span class="hs-identifier hs-var">ticks</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-466"></span><span>
</span><span id="line-467"></span><span class="hs-comment">-- Get the functions and axioms defined in the same module as @def@.</span><span>
</span><span id="line-468"></span><span class="annot"><a href="Agda.Auto.Auto.html#autohints"><span class="hs-identifier hs-type">autohints</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Auto.Options.html#AutoHintMode"><span class="hs-identifier hs-type">AutoHintMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#MetaId"><span class="hs-identifier hs-type">I.MetaId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Agda.Syntax.Abstract.Name.html#QName"><span class="hs-identifier hs-type">AN.QName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-469"></span><span id="autohints"><span class="annot"><span class="annottext">autohints :: AutoHintMode -&gt; MetaId -&gt; Maybe QName -&gt; TCM [Hint]
</span><a href="Agda.Auto.Auto.html#autohints"><span class="hs-identifier hs-var hs-var">autohints</span></a></span></span><span> </span><span class="annot"><span class="annottext">AutoHintMode
</span><a href="Agda.Auto.Options.html#AHMModule"><span class="hs-identifier hs-var">AHMModule</span></a></span><span> </span><span id="local-6989586621681156216"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156216"><span class="hs-identifier hs-var">mi</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681156215"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156215"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-470"></span><span>  </span><span id="local-6989586621681156214"><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681156214"><span class="hs-identifier hs-var">scope</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Closure Range -&gt; ScopeInfo
forall a. Closure a -&gt; ScopeInfo
</span><a href="Agda.TypeChecking.Monad.Base.html#clScope"><span class="hs-identifier hs-var">clScope</span></a></span><span> </span><span class="annot"><span class="annottext">(Closure Range -&gt; ScopeInfo)
-&gt; (MetaVariable -&gt; Closure Range) -&gt; MetaVariable -&gt; ScopeInfo
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; Closure Range
</span><a href="Agda.TypeChecking.Monad.Base.html#getMetaInfo"><span class="hs-identifier hs-var">getMetaInfo</span></a></span><span> </span><span class="annot"><span class="annottext">(MetaVariable -&gt; ScopeInfo)
-&gt; TCM MetaVariable -&gt; TCMT IO ScopeInfo
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; TCM MetaVariable
</span><a href="Agda.Auto.Convert.html#lookupLocalMetaAuto"><span class="hs-identifier hs-var">lookupLocalMetaAuto</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681156216"><span class="hs-identifier hs-var">mi</span></a></span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156213"><span class="annot"><span class="annottext">names :: NamesInScope
</span><a href="#local-6989586621681156213"><span class="hs-identifier hs-var hs-var">names</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameSpace -&gt; NamesInScope
</span><a href="Agda.Syntax.Scope.Base.html#nsNames"><span class="hs-identifier hs-var">Scope.nsNames</span></a></span><span> </span><span class="annot"><span class="annottext">(NameSpace -&gt; NamesInScope) -&gt; NameSpace -&gt; NamesInScope
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ScopeInfo -&gt; NameSpace
</span><a href="Agda.Syntax.Scope.Base.html#everythingInScope"><span class="hs-identifier hs-var">Scope.everythingInScope</span></a></span><span> </span><span class="annot"><span class="annottext">ScopeInfo
</span><a href="#local-6989586621681156214"><span class="hs-identifier hs-var">scope</span></a></span><span>
</span><span id="line-472"></span><span>      </span><span id="local-6989586621681156212"><span class="annot"><span class="annottext">qnames :: [QName]
</span><a href="#local-6989586621681156212"><span class="hs-identifier hs-var hs-var">qnames</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([AbstractName] -&gt; QName) -&gt; [[AbstractName]] -&gt; [QName]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AbstractName -&gt; QName
</span><a href="Agda.Syntax.Scope.Base.html#anameName"><span class="hs-identifier hs-var">Scope.anameName</span></a></span><span> </span><span class="annot"><span class="annottext">(AbstractName -&gt; QName)
-&gt; ([AbstractName] -&gt; AbstractName) -&gt; [AbstractName] -&gt; QName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[AbstractName] -&gt; AbstractName
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([[AbstractName]] -&gt; [QName]) -&gt; [[AbstractName]] -&gt; [QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamesInScope -&gt; [[AbstractName]]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">NamesInScope
</span><a href="#local-6989586621681156213"><span class="hs-identifier hs-var">names</span></a></span><span>
</span><span id="line-473"></span><span>      </span><span id="local-6989586621681156211"><span class="annot"><span class="annottext">modnames :: [QName]
</span><a href="#local-6989586621681156211"><span class="hs-identifier hs-var hs-var">modnames</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(QName -&gt; Bool) -&gt; [QName] -&gt; [QName]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681156210"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156210"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QName -&gt; ModuleName
</span><a href="Agda.Syntax.Abstract.Name.html#qnameModule"><span class="hs-identifier hs-var">AN.qnameModule</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156210"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">ModuleName -&gt; ModuleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">QName -&gt; ModuleName
</span><a href="Agda.Syntax.Abstract.Name.html#qnameModule"><span class="hs-identifier hs-var">AN.qnameModule</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156215"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156210"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">QName -&gt; QName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156215"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681156212"><span class="hs-identifier hs-var">qnames</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><span class="annottext">(QName -&gt; Hint) -&gt; [QName] -&gt; [Hint]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; QName -&gt; Hint
</span><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-var">Hint</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([QName] -&gt; [Hint]) -&gt; TCMT IO [QName] -&gt; TCM [Hint]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(QName -&gt; TCMT IO Bool) -&gt; [QName] -&gt; TCMT IO [QName]
forall (m :: * -&gt; *) a.
Applicative m =&gt;
(a -&gt; m Bool) -&gt; [a] -&gt; m [a]
</span><span class="hs-operator hs-var">`filterM`</span></span><span> </span><span class="annot"><span class="annottext">[QName]
</span><a href="#local-6989586621681156211"><span class="hs-identifier hs-var">modnames</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((QName -&gt; TCMT IO Bool) -&gt; TCMT IO [QName])
-&gt; (QName -&gt; TCMT IO Bool) -&gt; TCMT IO [QName]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span> </span><span id="local-6989586621681156209"><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156209"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-476"></span><span>      </span><span id="local-6989586621681156208"><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156208"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">QName -&gt; TCMT IO Definition
forall (m :: * -&gt; *). HasConstInfo m =&gt; QName -&gt; m Definition
</span><a href="Agda.TypeChecking.Monad.Signature.html#getConstInfo"><span class="hs-identifier hs-var">getConstInfo</span></a></span><span> </span><span class="annot"><span class="annottext">QName
</span><a href="#local-6989586621681156209"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-477"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Definition -&gt; Defn
</span><a href="Agda.TypeChecking.Monad.Base.html#theDef"><span class="hs-identifier hs-var">theDef</span></a></span><span> </span><span class="annot"><span class="annottext">Definition
</span><a href="#local-6989586621681156208"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-478"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Axiom"><span class="hs-identifier hs-type">Axiom</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#AbstractDefn"><span class="hs-identifier hs-type">AbstractDefn</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-480"></span><span>        </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Function"><span class="hs-identifier hs-type">Function</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-481"></span><span>        </span><span class="annot"><span class="annottext">Defn
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; TCMT IO Bool
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-482"></span><span>
</span><span id="line-483"></span><span class="annot"><a href="Agda.Auto.Auto.html#autohints"><span class="hs-identifier hs-var">autohints</span></a></span><span> </span><span class="annot"><span class="annottext">AutoHintMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe QName
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Hint] -&gt; TCM [Hint]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span>
</span><span id="line-486"></span><span>
</span><span id="line-487"></span><span class="hs-comment">-- | Names for the equality reasoning combinators</span><span>
</span><span id="line-488"></span><span class="hs-comment">--   Empty if any of these names is not defined.</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="annot"><a href="Agda.Auto.Auto.html#getEqCombinators"><span class="hs-identifier hs-type">getEqCombinators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#InteractionId"><span class="hs-identifier hs-type">InteractionId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Position.html#Range"><span class="hs-identifier hs-type">Range</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCM"><span class="hs-identifier hs-type">TCM</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Agda.Auto.Convert.html#Hint"><span class="hs-identifier hs-type">Hint</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-491"></span><span id="getEqCombinators"><span class="annot"><span class="annottext">getEqCombinators :: InteractionId -&gt; Range -&gt; TCM [Hint]
</span><a href="Agda.Auto.Auto.html#getEqCombinators"><span class="hs-identifier hs-var hs-var">getEqCombinators</span></a></span></span><span> </span><span id="local-6989586621681156203"><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156203"><span class="hs-identifier hs-var">ii</span></a></span></span><span> </span><span id="local-6989586621681156202"><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621681156202"><span class="hs-identifier hs-var">rng</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-492"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681156195"><span class="annot"><span class="annottext">eqCombinators :: [[Char]]
</span><a href="#local-6989586621681156195"><span class="hs-identifier hs-var hs-var">eqCombinators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;_&#8801;_&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;begin_&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;_&#8801;&#10216;_&#10217;_&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;_&#8718;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;sym&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;cong&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-493"></span><span>  </span><span id="local-6989586621681156194"><span class="annot"><span class="annottext">[Expr]
</span><a href="#local-6989586621681156194"><span class="hs-identifier hs-var">raw</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; TCMT IO Expr) -&gt; [[Char]] -&gt; TCMT IO [Expr]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">InteractionId -&gt; Range -&gt; [Char] -&gt; TCMT IO Expr
</span><a href="Agda.Interaction.BasicOps.html#parseExprIn"><span class="hs-identifier hs-var">parseExprIn</span></a></span><span> </span><span class="annot"><span class="annottext">InteractionId
</span><a href="#local-6989586621681156203"><span class="hs-identifier hs-var">ii</span></a></span><span> </span><span class="annot"><span class="annottext">Range
</span><a href="#local-6989586621681156202"><span class="hs-identifier hs-var">rng</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[[Char]]
</span><a href="#local-6989586621681156195"><span class="hs-identifier hs-var">eqCombinators</span></a></span><span> </span><span class="annot"><span class="annottext">TCMT IO [Expr] -&gt; (TCErr -&gt; TCMT IO [Expr]) -&gt; TCMT IO [Expr]
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="annot"><span class="annottext">TCMT IO [Expr] -&gt; TCErr -&gt; TCMT IO [Expr]
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Expr] -&gt; TCMT IO [Expr]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-494"></span><span>  </span><span class="annot"><span class="annottext">[Hint] -&gt; TCM [Hint]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">([Hint] -&gt; TCM [Hint]) -&gt; [Hint] -&gt; TCM [Hint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Hint] -&gt; Maybe [Hint] -&gt; [Hint]
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">(Maybe [Hint] -&gt; [Hint]) -&gt; Maybe [Hint] -&gt; [Hint]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Expr -&gt; Maybe Hint) -&gt; [Expr] -&gt; Maybe [Hint]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Expr -&gt; Maybe Hint
</span><a href="Agda.Auto.Auto.html#getHeadAsHint"><span class="hs-identifier hs-var">getHeadAsHint</span></a></span><span> </span><span class="annot"><span class="annottext">[Expr]
</span><a href="#local-6989586621681156194"><span class="hs-identifier hs-var">raw</span></a></span><span>
</span><span id="line-495"></span><span>
</span><span id="line-496"></span><span class="hs-comment">-- | Templates for error messages</span><span>
</span><span id="line-497"></span><span>
</span><span id="line-498"></span><span class="annot"><a href="Agda.Auto.Auto.html#genericNotEnough"><span class="hs-identifier hs-type">genericNotEnough</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-499"></span><span id="genericNotEnough"><span class="annot"><span class="annottext">genericNotEnough :: [Char] -&gt; Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#genericNotEnough"><span class="hs-identifier hs-var hs-var">genericNotEnough</span></a></span></span><span> </span><span id="local-6989586621681156192"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156192"><span class="hs-identifier hs-var">str</span></a></span></span><span> </span><span id="local-6989586621681156191"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156191"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Char]] -&gt; [Char]
</span><span class="hs-identifier hs-var">unwords</span></span><span> </span><span class="annot"><span class="annottext">([[Char]] -&gt; [Char]) -&gt; [[Char]] -&gt; [Char]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156191"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-500"></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;No&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156192"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-501"></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Only 1&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156192"><span class="hs-identifier hs-var">str</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-502"></span><span>  </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;Only&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681156191"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681156192"><span class="hs-identifier hs-var">str</span></a></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;s&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;found&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="annot"><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-type">insuffsols</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-505"></span><span id="insuffsols"><span class="annot"><span class="annottext">insuffsols :: Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffsols"><span class="hs-identifier hs-var hs-var">insuffsols</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#genericNotEnough"><span class="hs-identifier hs-var">genericNotEnough</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;solution&quot;</span></span><span>
</span><span id="line-506"></span><span>
</span><span id="line-507"></span><span class="annot"><a href="Agda.Auto.Auto.html#insuffcands"><span class="hs-identifier hs-type">insuffcands</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-508"></span><span id="insuffcands"><span class="annot"><span class="annottext">insuffcands :: Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#insuffcands"><span class="hs-identifier hs-var hs-var">insuffcands</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; Int -&gt; [Char]
</span><a href="Agda.Auto.Auto.html#genericNotEnough"><span class="hs-identifier hs-var">genericNotEnough</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;candidate&quot;</span></span><span>
</span><span id="line-509"></span></pre></body></html>