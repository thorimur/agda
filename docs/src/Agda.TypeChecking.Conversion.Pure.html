<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Agda.TypeChecking.Conversion.Pure</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- Control.Monad.Fail import is redundant since GHC 8.8.1</span><span>
</span><span id="line-5"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Fail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadFail</span></span><span class="hs-special">)</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Except</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span>
</span><span id="line-9"></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span>
</span><span id="line-11"></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html"><span class="hs-identifier">Agda.Syntax.Common</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html"><span class="hs-identifier">Agda.Syntax.Internal</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.MetaVars.html"><span class="hs-identifier">Agda.Syntax.Internal.MetaVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.Syntax.Internal.MetaVars.html#unblockOnAnyMetaIn"><span class="hs-identifier">unblockOnAnyMetaIn</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-pragma">{-# SOURCE</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.html"><span class="hs-identifier">Agda.TypeChecking.Conversion</span></a></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.html"><span class="hs-identifier">Agda.TypeChecking.Monad</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html"><span class="hs-identifier">Agda.TypeChecking.Pretty</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Reduce.html"><span class="hs-identifier">Agda.TypeChecking.Reduce</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Reduce.html#isBlocked"><span class="hs-identifier">isBlocked</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html"><span class="hs-identifier">Agda.TypeChecking.Warnings</span></a></span><span>
</span><span id="line-21"></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Either.html"><span class="hs-identifier">Agda.Utils.Either</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Maybe.html"><span class="hs-identifier">Agda.Utils.Maybe</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html"><span class="hs-identifier">Agda.Utils.Null</span></a></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Agda.Utils.Impossible.html"><span class="hs-identifier">Agda.Utils.Impossible</span></a></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="hs-keyword">data</span><span> </span><span id="FreshThings"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#FreshThings"><span class="hs-identifier hs-var">FreshThings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="FreshThings"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#FreshThings"><span class="hs-identifier hs-var">FreshThings</span></a></span></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="freshInt"><span class="annot"><span class="annottext">FreshThings -&gt; Int
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshInt"><span class="hs-identifier hs-var hs-var">freshInt</span></a></span></span><span>       </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="freshProblemId"><span class="annot"><span class="annottext">FreshThings -&gt; ProblemId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshProblemId"><span class="hs-identifier hs-var hs-var">freshProblemId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ProblemId"><span class="hs-identifier hs-type">ProblemId</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="freshNameId"><span class="annot"><span class="annottext">FreshThings -&gt; NameId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshNameId"><span class="hs-identifier hs-var hs-var">freshNameId</span></a></span></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NameId"><span class="hs-identifier hs-type">NameId</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span class="hs-keyword">newtype</span><span> </span><span id="PureConversionT"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-var">PureConversionT</span></a></span></span><span> </span><span id="local-6989586621681032458"><span class="annot"><a href="#local-6989586621681032458"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621681032457"><span class="annot"><a href="#local-6989586621681032457"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PureConversionT"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-var">PureConversionT</span></a></span></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="unPureConversionT"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
PureConversionT m a -&gt; ExceptT TCErr (StateT FreshThings m) a
</span><a href="Agda.TypeChecking.Conversion.Pure.html#unPureConversionT"><span class="hs-identifier hs-var hs-var">unPureConversionT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#FreshThings"><span class="hs-identifier hs-type">FreshThings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032458"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681032457"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681032061"><span id="local-6989586621681032067"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b) -&gt; PureConversionT m a -&gt; PureConversionT m b)
-&gt; (forall a b. a -&gt; PureConversionT m b -&gt; PureConversionT m a)
-&gt; Functor (PureConversionT m)
forall a b. a -&gt; PureConversionT m b -&gt; PureConversionT m a
forall a b. (a -&gt; b) -&gt; PureConversionT m a -&gt; PureConversionT m b
forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; PureConversionT m b -&gt; PureConversionT m a
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; PureConversionT m a -&gt; PureConversionT m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
&lt;$ :: forall a b. a -&gt; PureConversionT m b -&gt; PureConversionT m a
$c&lt;$ :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; PureConversionT m b -&gt; PureConversionT m a
fmap :: forall a b. (a -&gt; b) -&gt; PureConversionT m a -&gt; PureConversionT m b
$cfmap :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; PureConversionT m a -&gt; PureConversionT m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681032024"><span id="local-6989586621681032030"><span id="local-6989586621681032036"><span id="local-6989586621681032042"><span id="local-6989586621681032049"><span class="annot"><span class="annottext">Functor (PureConversionT m)
Functor (PureConversionT m)
-&gt; (forall a. a -&gt; PureConversionT m a)
-&gt; (forall a b.
    PureConversionT m (a -&gt; b)
    -&gt; PureConversionT m a -&gt; PureConversionT m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; PureConversionT m a
    -&gt; PureConversionT m b
    -&gt; PureConversionT m c)
-&gt; (forall a b.
    PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b)
-&gt; (forall a b.
    PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m a)
-&gt; Applicative (PureConversionT m)
forall a. a -&gt; PureConversionT m a
forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m a
forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
forall a b.
PureConversionT m (a -&gt; b)
-&gt; PureConversionT m a -&gt; PureConversionT m b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; PureConversionT m a
-&gt; PureConversionT m b
-&gt; PureConversionT m c
forall {m :: * -&gt; *}. Monad m =&gt; Functor (PureConversionT m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; PureConversionT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m (a -&gt; b)
-&gt; PureConversionT m a -&gt; PureConversionT m b
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; b -&gt; c)
-&gt; PureConversionT m a
-&gt; PureConversionT m b
-&gt; PureConversionT m c
forall (f :: * -&gt; *).
Functor f
-&gt; (forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
&lt;* :: forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m a
$c&lt;* :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m a
*&gt; :: forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
$c*&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; PureConversionT m a
-&gt; PureConversionT m b
-&gt; PureConversionT m c
$cliftA2 :: forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; b -&gt; c)
-&gt; PureConversionT m a
-&gt; PureConversionT m b
-&gt; PureConversionT m c
&lt;*&gt; :: forall a b.
PureConversionT m (a -&gt; b)
-&gt; PureConversionT m a -&gt; PureConversionT m b
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m (a -&gt; b)
-&gt; PureConversionT m a -&gt; PureConversionT m b
pure :: forall a. a -&gt; PureConversionT m a
$cpure :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; PureConversionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681032000"><span id="local-6989586621681032005"><span id="local-6989586621681032011"><span class="annot"><span class="annottext">Applicative (PureConversionT m)
Applicative (PureConversionT m)
-&gt; (forall a b.
    PureConversionT m a
    -&gt; (a -&gt; PureConversionT m b) -&gt; PureConversionT m b)
-&gt; (forall a b.
    PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b)
-&gt; (forall a. a -&gt; PureConversionT m a)
-&gt; Monad (PureConversionT m)
forall a. a -&gt; PureConversionT m a
forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
forall a b.
PureConversionT m a
-&gt; (a -&gt; PureConversionT m b) -&gt; PureConversionT m b
forall (m :: * -&gt; *). Monad m =&gt; Applicative (PureConversionT m)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; PureConversionT m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a
-&gt; (a -&gt; PureConversionT m b) -&gt; PureConversionT m b
forall (m :: * -&gt; *).
Applicative m
-&gt; (forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
return :: forall a. a -&gt; PureConversionT m a
$creturn :: forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; PureConversionT m a
&gt;&gt; :: forall a b.
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a -&gt; PureConversionT m b -&gt; PureConversionT m b
&gt;&gt;= :: forall a b.
PureConversionT m a
-&gt; (a -&gt; PureConversionT m b) -&gt; PureConversionT m b
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
PureConversionT m a
-&gt; (a -&gt; PureConversionT m b) -&gt; PureConversionT m b
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681031984"><span id="local-6989586621681031990"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TCErr"><span class="hs-identifier hs-type">TCErr</span></a></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681031963"><span id="local-6989586621681031968"><span id="local-6989586621681031974"><span class="annot"><span class="hs-identifier hs-type">MonadState</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#FreshThings"><span class="hs-identifier hs-type">FreshThings</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MonadDebug (PureConversionT m)
MonadTCEnv (PureConversionT m)
MonadReduce (PureConversionT m)
ReadTCState (PureConversionT m)
MonadAddContext (PureConversionT m)
HasBuiltins (PureConversionT m)
HasConstInfo (PureConversionT m)
HasBuiltins (PureConversionT m)
-&gt; HasConstInfo (PureConversionT m)
-&gt; MonadAddContext (PureConversionT m)
-&gt; MonadDebug (PureConversionT m)
-&gt; MonadReduce (PureConversionT m)
-&gt; MonadTCEnv (PureConversionT m)
-&gt; ReadTCState (PureConversionT m)
-&gt; PureTCM (PureConversionT m)
forall (m :: * -&gt; *).
HasBuiltins m
-&gt; HasConstInfo m
-&gt; MonadAddContext m
-&gt; MonadDebug m
-&gt; MonadReduce m
-&gt; MonadTCEnv m
-&gt; ReadTCState m
-&gt; PureTCM m
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
MonadDebug (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
MonadTCEnv (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
MonadReduce (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
ReadTCState (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
MonadAddContext (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
HasBuiltins (PureConversionT m)
forall {m :: * -&gt; *}.
(HasBuiltins m, HasConstInfo m, MonadAddContext m,
 MonadReduce m) =&gt;
HasConstInfo (PureConversionT m)
</span><a href="Agda.TypeChecking.Monad.Pure.html#C%3APureTCM"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">PureTCM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span id="local-6989586621681032358"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualTerm"><span class="hs-identifier hs-type">pureEqualTerm</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032358"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032358"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681032358"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-41"></span><span id="pureEqualTerm"><span class="annot"><span class="annottext">pureEqualTerm :: forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m) =&gt;
Type -&gt; Term -&gt; Term -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualTerm"><span class="hs-identifier hs-var hs-var">pureEqualTerm</span></a></span></span><span> </span><span id="local-6989586621681031883"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031883"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681031882"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031882"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681031881"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031881"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><span class="annottext">Maybe () -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe () -&gt; Bool) -&gt; m (Maybe ()) -&gt; m Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PureConversionT m () -&gt; m (Maybe ())
forall (m :: * -&gt; *) a.
(MonadBlock m, PureTCM m, Show a) =&gt;
PureConversionT m a -&gt; m (Maybe a)
</span><a href="Agda.TypeChecking.Conversion.Pure.html#runPureConversion"><span class="hs-identifier hs-var">runPureConversion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Term -&gt; Term -&gt; PureConversionT m ()
forall (m :: * -&gt; *).
MonadConversion m =&gt;
Type -&gt; Term -&gt; Term -&gt; m ()
</span><a href="Agda.TypeChecking.Conversion.html#equalTerm"><span class="hs-identifier hs-var">equalTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031883"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031882"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031881"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span id="local-6989586621681032331"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualType"><span class="hs-identifier hs-type">pureEqualType</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Type"><span class="hs-identifier hs-type">Type</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681032331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-47"></span><span id="pureEqualType"><span class="annot"><span class="annottext">pureEqualType :: forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m) =&gt;
Type -&gt; Type -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.Pure.html#pureEqualType"><span class="hs-identifier hs-var hs-var">pureEqualType</span></a></span></span><span> </span><span id="local-6989586621681031851"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031851"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681031850"><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031850"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-48"></span><span>  </span><span class="annot"><span class="annottext">Maybe () -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe () -&gt; Bool) -&gt; m (Maybe ()) -&gt; m Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PureConversionT m () -&gt; m (Maybe ())
forall (m :: * -&gt; *) a.
(MonadBlock m, PureTCM m, Show a) =&gt;
PureConversionT m a -&gt; m (Maybe a)
</span><a href="Agda.TypeChecking.Conversion.Pure.html#runPureConversion"><span class="hs-identifier hs-var">runPureConversion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type -&gt; Type -&gt; PureConversionT m ()
forall (m :: * -&gt; *). MonadConversion m =&gt; Type -&gt; Type -&gt; m ()
</span><a href="Agda.TypeChecking.Conversion.html#equalType"><span class="hs-identifier hs-var">equalType</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031851"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Type
</span><a href="#local-6989586621681031850"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span id="local-6989586621681032328"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#pureCompareAs"><span class="hs-identifier hs-type">pureCompareAs</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032328"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032328"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Comparison"><span class="hs-identifier hs-type">Comparison</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#CompareAs"><span class="hs-identifier hs-type">CompareAs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Agda.Syntax.Internal.html#Term"><span class="hs-identifier hs-type">Term</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681032328"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-53"></span><span id="pureCompareAs"><span class="annot"><span class="annottext">pureCompareAs :: forall (m :: * -&gt; *).
(PureTCM m, MonadBlock m) =&gt;
Comparison -&gt; CompareAs -&gt; Term -&gt; Term -&gt; m Bool
</span><a href="Agda.TypeChecking.Conversion.Pure.html#pureCompareAs"><span class="hs-identifier hs-var hs-var">pureCompareAs</span></a></span></span><span> </span><span id="local-6989586621681031823"><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621681031823"><span class="hs-identifier hs-var">cmp</span></a></span></span><span> </span><span id="local-6989586621681031822"><span class="annot"><span class="annottext">CompareAs
</span><a href="#local-6989586621681031822"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681031821"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031821"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span id="local-6989586621681031820"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031820"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-54"></span><span>  </span><span class="annot"><span class="annottext">Maybe () -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe () -&gt; Bool) -&gt; m (Maybe ()) -&gt; m Bool
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PureConversionT m () -&gt; m (Maybe ())
forall (m :: * -&gt; *) a.
(MonadBlock m, PureTCM m, Show a) =&gt;
PureConversionT m a -&gt; m (Maybe a)
</span><a href="Agda.TypeChecking.Conversion.Pure.html#runPureConversion"><span class="hs-identifier hs-var">runPureConversion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Comparison -&gt; CompareAs -&gt; Term -&gt; Term -&gt; PureConversionT m ()
forall (m :: * -&gt; *).
MonadConversion m =&gt;
Comparison -&gt; CompareAs -&gt; Term -&gt; Term -&gt; m ()
</span><a href="Agda.TypeChecking.Conversion.html#compareAs"><span class="hs-identifier hs-var">compareAs</span></a></span><span> </span><span class="annot"><span class="annottext">Comparison
</span><a href="#local-6989586621681031823"><span class="hs-identifier hs-var">cmp</span></a></span><span> </span><span class="annot"><span class="annottext">CompareAs
</span><a href="#local-6989586621681031822"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031821"><span class="hs-identifier hs-var">u</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031820"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span id="local-6989586621681032333"><span id="local-6989586621681032334"><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#runPureConversion"><span class="hs-identifier hs-type">runPureConversion</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032334"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032334"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621681032333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032334"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032333"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681032334"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681032333"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-59"></span><span id="runPureConversion"><span class="annot"><span class="annottext">runPureConversion :: forall (m :: * -&gt; *) a.
(MonadBlock m, PureTCM m, Show a) =&gt;
PureConversionT m a -&gt; m (Maybe a)
</span><a href="Agda.TypeChecking.Conversion.Pure.html#runPureConversion"><span class="hs-identifier hs-var hs-var">runPureConversion</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span id="local-6989586621681031778"><span class="annot"><span class="annottext">ExceptT TCErr (StateT FreshThings m) a
</span><a href="#local-6989586621681031778"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv -&gt; (Bool -&gt; Bool) -&gt; m (Maybe a) -&gt; m (Maybe a)
forall (m :: * -&gt; *) a b.
MonadTCEnv m =&gt;
Lens' a TCEnv -&gt; (a -&gt; a) -&gt; m b -&gt; m b
</span><a href="Agda.TypeChecking.Monad.Base.html#locallyTC"><span class="hs-identifier hs-var">locallyTC</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Bool TCEnv
</span><a href="Agda.TypeChecking.Monad.Base.html#eCompareBlocked"><span class="hs-identifier hs-var">eCompareBlocked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m (Maybe a) -&gt; m (Maybe a)) -&gt; m (Maybe a) -&gt; m (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-60"></span><span>  </span><span id="local-6989586621681031772"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681031772"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens' Int TCState -&gt; m Int
forall (m :: * -&gt; *) a. ReadTCState m =&gt; Lens' a TCState -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#useR"><span class="hs-identifier hs-var">useR</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' Int TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stFreshInt"><span class="hs-identifier hs-var">stFreshInt</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span id="local-6989586621681031767"><span class="annot"><span class="annottext">ProblemId
</span><a href="#local-6989586621681031767"><span class="hs-identifier hs-var">pid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens' ProblemId TCState -&gt; m ProblemId
forall (m :: * -&gt; *) a. ReadTCState m =&gt; Lens' a TCState -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#useR"><span class="hs-identifier hs-var">useR</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ProblemId TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stFreshProblemId"><span class="hs-identifier hs-var">stFreshProblemId</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span id="local-6989586621681031763"><span class="annot"><span class="annottext">NameId
</span><a href="#local-6989586621681031763"><span class="hs-identifier hs-var">nid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens' NameId TCState -&gt; m NameId
forall (m :: * -&gt; *) a. ReadTCState m =&gt; Lens' a TCState -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#useR"><span class="hs-identifier hs-var">useR</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' NameId TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stFreshNameId"><span class="hs-identifier hs-var">stFreshNameId</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681031759"><span class="annot"><span class="annottext">frsh :: FreshThings
</span><a href="#local-6989586621681031759"><span class="hs-identifier hs-var hs-var">frsh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ProblemId -&gt; NameId -&gt; FreshThings
</span><a href="Agda.TypeChecking.Conversion.Pure.html#FreshThings"><span class="hs-identifier hs-var">FreshThings</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681031772"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemId
</span><a href="#local-6989586621681031767"><span class="hs-identifier hs-var">pid</span></a></span><span> </span><span class="annot"><span class="annottext">NameId
</span><a href="#local-6989586621681031763"><span class="hs-identifier hs-var">nid</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span id="local-6989586621681031758"><span class="annot"><span class="annottext">Either TCErr a
</span><a href="#local-6989586621681031758"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Either TCErr a, FreshThings) -&gt; Either TCErr a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Either TCErr a, FreshThings) -&gt; Either TCErr a)
-&gt; m (Either TCErr a, FreshThings) -&gt; m (Either TCErr a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StateT FreshThings m (Either TCErr a)
-&gt; FreshThings -&gt; m (Either TCErr a, FreshThings)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExceptT TCErr (StateT FreshThings m) a
-&gt; StateT FreshThings m (Either TCErr a)
forall e (m :: * -&gt; *) a. ExceptT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var">runExceptT</span></span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr (StateT FreshThings m) a
</span><a href="#local-6989586621681031778"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031759"><span class="hs-identifier hs-var">frsh</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="annottext">[Char] -&gt; Int -&gt; [Char] -&gt; m ()
forall (m :: * -&gt; *).
MonadDebug m =&gt;
[Char] -&gt; Int -&gt; [Char] -&gt; m ()
</span><a href="Agda.TypeChecking.Monad.Debug.html#reportSLn"><span class="hs-identifier hs-var">reportSLn</span></a></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;tc.conv.pure&quot;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">40</span></span><span> </span><span class="annot"><span class="annottext">([Char] -&gt; m ()) -&gt; [Char] -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-string">&quot;runPureConversion result: &quot;</span></span><span> </span><span class="annot"><span class="annottext">[Char] -&gt; [Char] -&gt; [Char]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Either TCErr a -&gt; [Char]
forall a. Show a =&gt; a -&gt; [Char]
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Either TCErr a
</span><a href="#local-6989586621681031758"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either TCErr a
</span><a href="#local-6989586621681031758"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PatternErr"><span class="hs-identifier hs-type">PatternErr</span></a></span><span> </span><span id="local-6989586621681031752"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031752"><span class="hs-identifier hs-var">block</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031752"><span class="hs-identifier hs-var">block</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Blocker -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#neverUnblock"><span class="hs-identifier hs-var">neverUnblock</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-69"></span><span>     </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; m (Maybe a)
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031752"><span class="hs-identifier hs-var">block</span></a></span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#TypeError"><span class="hs-identifier hs-type">TypeError</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#Exception"><span class="hs-identifier hs-type">Exception</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe a)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#IOException"><span class="hs-identifier hs-type">IOException</span></a></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe a)
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681031745"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681031745"><span class="hs-identifier hs-var">x</span></a></span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe a -&gt; m (Maybe a)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; m (Maybe a)) -&gt; Maybe a -&gt; m (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681031745"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-76"></span><span>  </span><span id="local-6989586621681031734"><span class="annot"><span class="annottext">lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; PureConversionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">lift</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExceptT TCErr (StateT FreshThings m) a -&gt; PureConversionT m a
forall (m :: * -&gt; *) a.
ExceptT TCErr (StateT FreshThings m) a -&gt; PureConversionT m a
</span><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-var">PureConversionT</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT TCErr (StateT FreshThings m) a -&gt; PureConversionT m a)
-&gt; (m a -&gt; ExceptT TCErr (StateT FreshThings m) a)
-&gt; m a
-&gt; PureConversionT m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">StateT FreshThings m a -&gt; ExceptT TCErr (StateT FreshThings m) a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(StateT FreshThings m a -&gt; ExceptT TCErr (StateT FreshThings m) a)
-&gt; (m a -&gt; StateT FreshThings m a)
-&gt; m a
-&gt; ExceptT TCErr (StateT FreshThings m) a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; StateT FreshThings m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span>
</span><span id="line-77"></span><span>
</span><span id="line-78"></span><span id="local-6989586621681031726"><span id="local-6989586621681032339"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span>       </span><span class="annot"><a href="#local-6989586621681032339"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadFail</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032339"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-79"></span><span id="local-6989586621681031708"><span id="local-6989586621681032359"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span>     </span><span class="annot"><a href="#local-6989586621681032359"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Builtin.html#HasBuiltins"><span class="hs-identifier hs-type">HasBuiltins</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032359"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-80"></span><span id="local-6989586621681031669"><span id="local-6989586621681031674"><span id="local-6989586621681031680"><span id="local-6989586621681032360"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span>    </span><span class="annot"><a href="#local-6989586621681032360"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Signature.html#HasConstInfo"><span class="hs-identifier hs-type">HasConstInfo</span></a></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032360"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-81"></span><span id="local-6989586621681031644"><span id="local-6989586621681031650"><span id="local-6989586621681032248"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-type">HasOptions</span></a></span><span>      </span><span class="annot"><a href="#local-6989586621681032248"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Interaction.Options.HasOptions.html#HasOptions"><span class="hs-identifier hs-type">HasOptions</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032248"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-82"></span><span id="local-6989586621681031625"><span id="local-6989586621681031631"><span id="local-6989586621681032361"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span>      </span><span class="annot"><a href="#local-6989586621681032361"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadTCEnv"><span class="hs-identifier hs-type">MonadTCEnv</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032361"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-83"></span><span id="local-6989586621681031602"><span id="local-6989586621681031607"><span id="local-6989586621681031613"><span id="local-6989586621681032362"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span>     </span><span class="annot"><a href="#local-6989586621681032362"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032362"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-84"></span><span id="local-6989586621681031582"><span id="local-6989586621681032363"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-type">MonadReduce</span></a></span><span>     </span><span class="annot"><a href="#local-6989586621681032363"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadReduce"><span class="hs-identifier hs-type">MonadReduce</span></a></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032363"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-85"></span><span id="local-6989586621681031552"><span id="local-6989586621681031557"><span id="local-6989586621681031562"><span id="local-6989586621681031568"><span id="local-6989586621681032364"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-type">MonadAddContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032364"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Context.html#MonadAddContext"><span class="hs-identifier hs-type">MonadAddContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032364"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-86"></span><span id="local-6989586621681031504"><span id="local-6989586621681031509"><span id="local-6989586621681031514"><span id="local-6989586621681031519"><span id="local-6989586621681031524"><span id="local-6989586621681031529"><span id="local-6989586621681031535"><span id="local-6989586621681032365"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-type">MonadDebug</span></a></span><span>      </span><span class="annot"><a href="#local-6989586621681032365"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Debug.html#MonadDebug"><span class="hs-identifier hs-type">MonadDebug</span></a></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032365"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681031492"><span id="local-6989586621681031494"><span id="local-6989586621681032174"><span id="local-6989586621681032175"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032175"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621681032174"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032175"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032174"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621681031487"><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031487"><span class="hs-identifier hs-var">d1</span></a></span></span><span> </span><span id="local-6989586621681031486"><span class="annot"><span class="annottext">&lt;&gt; :: PureConversionT m a -&gt; PureConversionT m a -&gt; PureConversionT m a
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621681031485"><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031485"><span class="hs-identifier hs-var">d2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; PureConversionT m a -&gt; PureConversionT m (a -&gt; a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031487"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">PureConversionT m (a -&gt; a)
-&gt; PureConversionT m a -&gt; PureConversionT m a
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031485"><span class="hs-identifier hs-var">d2</span></a></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032169"><span id="local-6989586621681032170"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="#local-6989586621681032170"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032169"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032169"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032170"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621681031477"><span class="annot"><span class="annottext">fromString :: [Char] -&gt; PureConversionT m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">fromString</span></span></span><span> </span><span id="local-6989586621681031476"><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681031476"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; PureConversionT m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Char] -&gt; a
forall a. IsString a =&gt; [Char] -&gt; a
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><a href="#local-6989586621681031476"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032165"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032165"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.Utils.Null.html#Null"><span class="hs-identifier hs-type">Null</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032165"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Agda.TypeChecking.Pretty.html#Doc"><span class="hs-identifier hs-type">Doc</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-95"></span><span>  </span><span id="local-6989586621681031466"><span class="annot"><span class="annottext">empty :: PureConversionT m Doc
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var hs-var hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Doc -&gt; PureConversionT m Doc
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Doc
forall a. Null a =&gt; a
</span><a href="Agda.Utils.Null.html#empty"><span class="hs-identifier hs-var">empty</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span id="local-6989586621681031462"><span class="annot"><span class="annottext">null :: PureConversionT m Doc -&gt; Bool
</span><a href="Agda.Utils.Null.html#null"><span class="hs-identifier hs-var hs-var hs-var hs-var">null</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PureConversionT m Doc -&gt; Bool
forall a. HasCallStack =&gt; a
</span><a href="Agda.Utils.Impossible.html#__IMPOSSIBLE__"><span class="hs-identifier hs-var">__IMPOSSIBLE__</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032162"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032162"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032162"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>  </span><span id="local-6989586621681031452"><span class="annot"><span class="annottext">patternViolation :: forall a. Blocker -&gt; PureConversionT m a
</span><a href="#local-6989586621681031452"><span class="hs-identifier hs-var hs-var hs-var hs-var">patternViolation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; PureConversionT m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">(TCErr -&gt; PureConversionT m a)
-&gt; (Blocker -&gt; TCErr) -&gt; Blocker -&gt; PureConversionT m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; TCErr
</span><a href="Agda.TypeChecking.Monad.Base.html#PatternErr"><span class="hs-identifier hs-var">PatternErr</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span id="local-6989586621681031448"><span class="annot"><span class="annottext">catchPatternErr :: forall a.
(Blocker -&gt; PureConversionT m a)
-&gt; PureConversionT m a -&gt; PureConversionT m a
</span><a href="Agda.TypeChecking.Monad.Base.html#catchPatternErr"><span class="hs-identifier hs-var hs-var hs-var hs-var">catchPatternErr</span></a></span></span><span> </span><span id="local-6989586621681031446"><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m a
</span><a href="#local-6989586621681031446"><span class="hs-identifier hs-var">handle</span></a></span></span><span> </span><span id="local-6989586621681031445"><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031445"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PureConversionT m a
</span><a href="#local-6989586621681031445"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">PureConversionT m a
-&gt; (TCErr -&gt; PureConversionT m a) -&gt; PureConversionT m a
forall e (m :: * -&gt; *) a.
MonadError e m =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><span class="hs-operator hs-var">`catchError`</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#PatternErr"><span class="hs-identifier hs-type">PatternErr</span></a></span><span> </span><span id="local-6989586621681031443"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031443"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m a
</span><a href="#local-6989586621681031446"><span class="hs-identifier hs-var">handle</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031443"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-102"></span><span>    </span><span id="local-6989586621681031442"><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681031442"><span class="hs-identifier hs-var">err</span></a></span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TCErr -&gt; PureConversionT m a
forall e (m :: * -&gt; *) a. MonadError e m =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwError</span></span><span> </span><span class="annot"><span class="annottext">TCErr
</span><a href="#local-6989586621681031442"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032340"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032340"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032340"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Constraints.html#MonadConstraint"><span class="hs-identifier hs-type">MonadConstraint</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032340"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-106"></span><span>  </span><span id="local-6989586621681031408"><span class="annot"><span class="annottext">addConstraint :: Blocker -&gt; Constraint -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#addConstraint"><span class="hs-identifier hs-var hs-var hs-var hs-var">addConstraint</span></a></span></span><span> </span><span id="local-6989586621681031406"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031406"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constraint
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031406"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621681031404"><span class="annot"><span class="annottext">addAwakeConstraint :: Blocker -&gt; Constraint -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#addAwakeConstraint"><span class="hs-identifier hs-var hs-var hs-var hs-var">addAwakeConstraint</span></a></span></span><span> </span><span id="local-6989586621681031402"><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031402"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constraint
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031402"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621681031400"><span class="annot"><span class="annottext">solveConstraint :: Constraint -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#solveConstraint"><span class="hs-identifier hs-var hs-var hs-var hs-var">solveConstraint</span></a></span></span><span> </span><span id="local-6989586621681031398"><span class="annot"><span class="annottext">Constraint
</span><a href="#local-6989586621681031398"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621681031395"><span class="annot"><span class="annottext">solveSomeAwakeConstraints :: (ProblemConstraint -&gt; Bool) -&gt; Bool -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#solveSomeAwakeConstraints"><span class="hs-identifier hs-var hs-var hs-var hs-var">solveSomeAwakeConstraints</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621681031392"><span class="annot"><span class="annottext">wakeConstraints :: (ProblemConstraint -&gt; WakeUp) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#wakeConstraints"><span class="hs-identifier hs-var hs-var hs-var hs-var">wakeConstraints</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProblemConstraint -&gt; WakeUp
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-111"></span><span>  </span><span id="local-6989586621681031389"><span class="annot"><span class="annottext">stealConstraints :: ProblemId -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#stealConstraints"><span class="hs-identifier hs-var hs-var hs-var hs-var">stealConstraints</span></a></span></span><span> </span><span class="annot"><span class="annottext">ProblemId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>  </span><span id="local-6989586621681031386"><span class="annot"><span class="annottext">modifyAwakeConstraints :: (Constraints -&gt; Constraints) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#modifyAwakeConstraints"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifyAwakeConstraints</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constraints -&gt; Constraints
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-113"></span><span>  </span><span id="local-6989586621681031383"><span class="annot"><span class="annottext">modifySleepingConstraints :: (Constraints -&gt; Constraints) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Constraints.html#modifySleepingConstraints"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifySleepingConstraints</span></a></span></span><span> </span><span class="annot"><span class="annottext">Constraints -&gt; Constraints
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032341"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032341"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032341"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#MonadMetaSolver"><span class="hs-identifier hs-type">MonadMetaSolver</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032341"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621681031346"><span class="annot"><span class="annottext">newMeta' :: forall a.
MetaInstantiation
-&gt; Frozen
-&gt; MetaInfo
-&gt; MetaPriority
-&gt; Permutation
-&gt; Judgement a
-&gt; PureConversionT m MetaId
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#newMeta%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">newMeta'</span></a></span></span><span> </span><span class="annot"><span class="annottext">MetaInstantiation
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Frozen
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MetaInfo
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MetaPriority
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Permutation
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Judgement a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m MetaId
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621681031337"><span class="annot"><span class="annottext">assignV :: CompareDirection
-&gt; MetaId -&gt; Args -&gt; Term -&gt; CompareAs -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#assignV"><span class="hs-identifier hs-var hs-var hs-var hs-var">assignV</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompareDirection
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681031335"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681031335"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">Args
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681031334"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031334"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="annottext">CompareAs
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-118"></span><span>    </span><span id="local-6989586621681031333"><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621681031333"><span class="hs-identifier hs-var">bv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; PureConversionT m (Maybe Blocker)
forall t (m :: * -&gt; *).
(Reduce t, IsMeta t, MonadReduce m) =&gt;
t -&gt; m (Maybe Blocker)
</span><a href="Agda.TypeChecking.Reduce.html#isBlocked"><span class="hs-identifier hs-var">isBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031334"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681031332"><span class="annot"><span class="annottext">blocker :: Blocker
</span><a href="#local-6989586621681031332"><span class="hs-identifier hs-var hs-var">blocker</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; (Blocker -&gt; Blocker)
-&gt; (Blocker -&gt; Blocker -&gt; Blocker)
-&gt; Blocker
-&gt; Blocker
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621681031333"><span class="hs-identifier hs-var">bv</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Blocker
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Blocker -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnEither"><span class="hs-identifier hs-var">unblockOnEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocker -&gt; Blocker) -&gt; Blocker -&gt; Blocker
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnMeta"><span class="hs-identifier hs-var">unblockOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681031335"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031332"><span class="hs-identifier hs-var">blocker</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621681031312"><span class="annot"><span class="annottext">assignTerm' :: MonadMetaSolver (PureConversionT m) =&gt;
MetaId -&gt; [Arg [Char]] -&gt; Term -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#assignTerm%27"><span class="hs-identifier hs-var hs-var hs-var hs-var">assignTerm'</span></a></span></span><span> </span><span id="local-6989586621681031310"><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681031310"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Arg [Char]]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681031309"><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031309"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-122"></span><span>    </span><span id="local-6989586621681031308"><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621681031308"><span class="hs-identifier hs-var">bv</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term -&gt; PureConversionT m (Maybe Blocker)
forall t (m :: * -&gt; *).
(Reduce t, IsMeta t, MonadReduce m) =&gt;
t -&gt; m (Maybe Blocker)
</span><a href="Agda.TypeChecking.Reduce.html#isBlocked"><span class="hs-identifier hs-var">isBlocked</span></a></span><span> </span><span class="annot"><span class="annottext">Term
</span><a href="#local-6989586621681031309"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681031307"><span class="annot"><span class="annottext">blocker :: Blocker
</span><a href="#local-6989586621681031307"><span class="hs-identifier hs-var hs-var">blocker</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
-&gt; (Blocker -&gt; Blocker)
-&gt; (Blocker -&gt; Blocker -&gt; Blocker)
-&gt; Blocker
-&gt; Blocker
forall a b. Maybe a -&gt; b -&gt; (a -&gt; b) -&gt; b
</span><a href="Agda.Utils.Maybe.html#caseMaybe"><span class="hs-identifier hs-var">caseMaybe</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Blocker
</span><a href="#local-6989586621681031308"><span class="hs-identifier hs-var">bv</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Blocker
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; Blocker -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnEither"><span class="hs-identifier hs-var">unblockOnEither</span></a></span><span> </span><span class="annot"><span class="annottext">(Blocker -&gt; Blocker) -&gt; Blocker -&gt; Blocker
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetaId -&gt; Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#unblockOnMeta"><span class="hs-identifier hs-var">unblockOnMeta</span></a></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><a href="#local-6989586621681031310"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-124"></span><span>    </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="#local-6989586621681031307"><span class="hs-identifier hs-var">blocker</span></a></span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621681031305"><span class="annot"><span class="annottext">etaExpandMeta :: [MetaKind] -&gt; MetaId -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#etaExpandMeta"><span class="hs-identifier hs-var hs-var hs-var hs-var">etaExpandMeta</span></a></span></span><span> </span><span class="annot"><span class="annottext">[MetaKind]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>  </span><span id="local-6989586621681031302"><span class="annot"><span class="annottext">updateMetaVar :: MetaId -&gt; (MetaVariable -&gt; MetaVariable) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#updateMetaVar"><span class="hs-identifier hs-var hs-var hs-var hs-var">updateMetaVar</span></a></span></span><span> </span><span class="annot"><span class="annottext">MetaId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MetaVariable -&gt; MetaVariable
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-127"></span><span>  </span><span id="local-6989586621681031298"><span class="annot"><span class="annottext">speculateMetas :: PureConversionT m ()
-&gt; PureConversionT m KeepMetas -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#speculateMetas"><span class="hs-identifier hs-var hs-var hs-var hs-var">speculateMetas</span></a></span></span><span> </span><span id="local-6989586621681031296"><span class="annot"><span class="annottext">PureConversionT m ()
</span><a href="#local-6989586621681031296"><span class="hs-identifier hs-var">fallback</span></a></span></span><span> </span><span id="local-6989586621681031295"><span class="annot"><span class="annottext">PureConversionT m KeepMetas
</span><a href="#local-6989586621681031295"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PureConversionT m KeepMetas
</span><a href="#local-6989586621681031295"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">PureConversionT m KeepMetas
-&gt; (KeepMetas -&gt; PureConversionT m ()) -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">KeepMetas
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#KeepMetas"><span class="hs-identifier hs-var">KeepMetas</span></a></span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="annottext">KeepMetas
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#RollBackMetas"><span class="hs-identifier hs-var">RollBackMetas</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PureConversionT m ()
</span><a href="#local-6989586621681031296"><span class="hs-identifier hs-var">fallback</span></a></span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032124"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032124"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032124"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.MetaVars.html#MonadInteractionPoints"><span class="hs-identifier hs-type">MonadInteractionPoints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032124"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-132"></span><span>  </span><span id="local-6989586621681031274"><span class="annot"><span class="annottext">freshInteractionId :: PureConversionT m InteractionId
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#freshInteractionId"><span class="hs-identifier hs-var hs-var hs-var hs-var">freshInteractionId</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m InteractionId
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-133"></span><span>  </span><span id="local-6989586621681031271"><span class="annot"><span class="annottext">modifyInteractionPoints :: (InteractionPoints -&gt; InteractionPoints) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.MetaVars.html#modifyInteractionPoints"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifyInteractionPoints</span></a></span></span><span> </span><span class="annot"><span class="annottext">InteractionPoints -&gt; InteractionPoints
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#alwaysUnblock"><span class="hs-identifier hs-var">alwaysUnblock</span></a></span><span>  </span><span class="hs-comment">-- TODO: does this happen?</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- This is a bogus instance that promptly forgets all concrete names,</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- but we don't really care</span><span>
</span><span id="line-137"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681031263"><span id="local-6989586621681031265"><span id="local-6989586621681032120"><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032120"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadStConcreteNames"><span class="hs-identifier hs-type">MonadStConcreteNames</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032120"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-138"></span><span>  </span><span id="local-6989586621681031258"><span class="annot"><span class="annottext">runStConcreteNames :: forall a.
StateT ConcreteNames (PureConversionT m) a -&gt; PureConversionT m a
</span><a href="Agda.TypeChecking.Monad.Base.html#runStConcreteNames"><span class="hs-identifier hs-var hs-var hs-var hs-var">runStConcreteNames</span></a></span></span><span> </span><span id="local-6989586621681031256"><span class="annot"><span class="annottext">StateT ConcreteNames (PureConversionT m) a
</span><a href="#local-6989586621681031256"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621681031255"><span class="annot"><span class="annottext">ConcreteNames
</span><a href="#local-6989586621681031255"><span class="hs-identifier hs-var">concNames</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Lens' ConcreteNames TCState -&gt; PureConversionT m ConcreteNames
forall (m :: * -&gt; *) a. ReadTCState m =&gt; Lens' a TCState -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#useR"><span class="hs-identifier hs-var">useR</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' ConcreteNames TCState
</span><a href="Agda.TypeChecking.Monad.Base.html#stConcreteNames"><span class="hs-identifier hs-var">stConcreteNames</span></a></span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><span class="annottext">(a, ConcreteNames) -&gt; a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((a, ConcreteNames) -&gt; a)
-&gt; PureConversionT m (a, ConcreteNames) -&gt; PureConversionT m a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">StateT ConcreteNames (PureConversionT m) a
-&gt; ConcreteNames -&gt; PureConversionT m (a, ConcreteNames)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var">runStateT</span></span><span> </span><span class="annot"><span class="annottext">StateT ConcreteNames (PureConversionT m) a
</span><a href="#local-6989586621681031256"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">ConcreteNames
</span><a href="#local-6989586621681031255"><span class="hs-identifier hs-var">concNames</span></a></span><span>
</span><span id="line-141"></span><span>
</span><span id="line-142"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032342"><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Monad.Pure.html#PureTCM"><span class="hs-identifier hs-type">PureTCM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032342"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadBlock"><span class="hs-identifier hs-type">MonadBlock</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032342"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Warnings.html#MonadWarning"><span class="hs-identifier hs-type">MonadWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032342"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-143"></span><span>  </span><span id="local-6989586621681031220"><span class="annot"><span class="annottext">addWarning :: TCWarning -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Warnings.html#addWarning"><span class="hs-identifier hs-var hs-var hs-var hs-var">addWarning</span></a></span></span><span> </span><span id="local-6989586621681031218"><span class="annot"><span class="annottext">TCWarning
</span><a href="#local-6989586621681031218"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Warning -&gt; WhichWarnings
</span><a href="Agda.TypeChecking.Warnings.html#classifyWarning"><span class="hs-identifier hs-var">classifyWarning</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TCWarning -&gt; Warning
</span><a href="Agda.TypeChecking.Monad.Base.html#tcWarning"><span class="hs-identifier hs-var">tcWarning</span></a></span><span> </span><span class="annot"><span class="annottext">TCWarning
</span><a href="#local-6989586621681031218"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><span class="annottext">WhichWarnings
</span><a href="Agda.TypeChecking.Warnings.html#ErrorWarnings"><span class="hs-identifier hs-var">ErrorWarnings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Blocker -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. MonadBlock m =&gt; Blocker -&gt; m a
</span><a href="Agda.TypeChecking.Monad.Base.html#patternViolation"><span class="hs-identifier hs-var">patternViolation</span></a></span><span> </span><span class="annot"><span class="annottext">Blocker
</span><a href="Agda.Syntax.Internal.Blockers.html#neverUnblock"><span class="hs-identifier hs-var">neverUnblock</span></a></span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">WhichWarnings
</span><a href="Agda.TypeChecking.Warnings.html#AllWarnings"><span class="hs-identifier hs-var">AllWarnings</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032343"><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#ReadTCState"><span class="hs-identifier hs-type">ReadTCState</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032343"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Statistics.html#MonadStatistics"><span class="hs-identifier hs-type">MonadStatistics</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032343"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621681031206"><span class="annot"><span class="annottext">modifyCounter :: [Char] -&gt; (Integer -&gt; Integer) -&gt; PureConversionT m ()
</span><a href="Agda.TypeChecking.Monad.Statistics.html#modifyCounter"><span class="hs-identifier hs-var hs-var hs-var hs-var">modifyCounter</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Char]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; PureConversionT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032344"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032344"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#ProblemId"><span class="hs-identifier hs-type">ProblemId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032344"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621681031191"><span class="annot"><span class="annottext">fresh :: PureConversionT m ProblemId
</span><a href="Agda.TypeChecking.Monad.Base.html#fresh"><span class="hs-identifier hs-var hs-var hs-var hs-var">fresh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-152"></span><span>    </span><span id="local-6989586621681031189"><span class="annot"><span class="annottext">ProblemId
</span><a href="#local-6989586621681031189"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FreshThings -&gt; ProblemId) -&gt; PureConversionT m ProblemId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">FreshThings -&gt; ProblemId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshProblemId"><span class="hs-identifier hs-var">freshProblemId</span></a></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">(FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((FreshThings -&gt; FreshThings) -&gt; PureConversionT m ())
-&gt; (FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681031186"><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031186"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031186"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">freshProblemId :: ProblemId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshProblemId"><span class="hs-identifier hs-var">freshProblemId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ProblemId
</span><a href="#local-6989586621681031189"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ProblemId -&gt; ProblemId -&gt; ProblemId
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ProblemId
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="annottext">ProblemId -&gt; PureConversionT m ProblemId
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">ProblemId
</span><a href="#local-6989586621681031189"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-155"></span><span>
</span><span id="line-156"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032113"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032113"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><a href="Agda.Syntax.Common.html#NameId"><span class="hs-identifier hs-type">NameId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032113"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621681031173"><span class="annot"><span class="annottext">fresh :: PureConversionT m NameId
</span><a href="#local-6989586621681031173"><span class="hs-identifier hs-var hs-var hs-var hs-var">fresh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-158"></span><span>    </span><span id="local-6989586621681031172"><span class="annot"><span class="annottext">NameId
</span><a href="#local-6989586621681031172"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FreshThings -&gt; NameId) -&gt; PureConversionT m NameId
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">FreshThings -&gt; NameId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshNameId"><span class="hs-identifier hs-var">freshNameId</span></a></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="annottext">(FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((FreshThings -&gt; FreshThings) -&gt; PureConversionT m ())
-&gt; (FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681031171"><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031171"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031171"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">freshNameId :: NameId
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshNameId"><span class="hs-identifier hs-var">freshNameId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NameId -&gt; NameId
forall a. Enum a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">succ</span></span><span> </span><span class="annot"><span class="annottext">NameId
</span><a href="#local-6989586621681031172"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><span class="annottext">NameId -&gt; PureConversionT m NameId
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">NameId
</span><a href="#local-6989586621681031172"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681032345"><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681032345"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Agda.TypeChecking.Monad.Base.html#MonadFresh"><span class="hs-identifier hs-type">MonadFresh</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Agda.TypeChecking.Conversion.Pure.html#PureConversionT"><span class="hs-identifier hs-type">PureConversionT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681032345"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-163"></span><span>  </span><span id="local-6989586621681031157"><span class="annot"><span class="annottext">fresh :: PureConversionT m Int
</span><a href="#local-6989586621681031157"><span class="hs-identifier hs-var hs-var hs-var hs-var">fresh</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-164"></span><span>    </span><span id="local-6989586621681031156"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681031156"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(FreshThings -&gt; Int) -&gt; PureConversionT m Int
forall s (m :: * -&gt; *) a. MonadState s m =&gt; (s -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">gets</span></span><span> </span><span class="annot"><span class="annottext">FreshThings -&gt; Int
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshInt"><span class="hs-identifier hs-var">freshInt</span></a></span><span>
</span><span id="line-165"></span><span>    </span><span class="annot"><span class="annottext">(FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall s (m :: * -&gt; *). MonadState s m =&gt; (s -&gt; s) -&gt; m ()
</span><span class="hs-identifier hs-var">modify</span></span><span> </span><span class="annot"><span class="annottext">((FreshThings -&gt; FreshThings) -&gt; PureConversionT m ())
-&gt; (FreshThings -&gt; FreshThings) -&gt; PureConversionT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681031155"><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031155"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FreshThings
</span><a href="#local-6989586621681031155"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">freshInt :: Int
</span><a href="Agda.TypeChecking.Conversion.Pure.html#freshInt"><span class="hs-identifier hs-var">freshInt</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681031156"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><span class="annottext">Int -&gt; PureConversionT m Int
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681031156"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-167"></span></pre></body></html>